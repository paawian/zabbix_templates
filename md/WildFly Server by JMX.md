# WildFly Server by JMX template description

Official JMX Template for WildFly.
The metrics are collected by JMX. This template works with standalone and domain instances.
You can set {$WILDFLY.USER} and {$WILDFLY.PASSWORD} macros in the template for using on the host level.

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback

Generated by official Zabbix template tool "Templator"

## Summary
* [items](#items)
* [macros](#macros)
* [triggers](#triggers)
* [discoveries](#discoveries)
  * [Discovery Deployments discovery ](#discovery_deployments_discovery)
  * [Discovery JDBC metrics discovery ](#discovery_jdbc_metrics_discovery)
  * [Discovery Pools metrics discovery ](#discovery_pools_metrics_discovery)
  * [Discovery Undertow metrics discovery ](#discovery_undertow_metrics_discovery)

<a name="items" />

## Items
| name | description | key | type | delay |
| ------------- |------------- |------------- |------------- |------------- |
| Uptime | WildFly server uptime. | jmx["java.lang:type=Runtime","Uptime"] | JMX | no delay |
| Launch type | The manner in which the server process was launched. Either "DOMAIN" for a domain mode server launched by a Host Controller, "STANDALONE" for a standalone server launched from the command line, or "EMBEDDED" for a standalone server launched as an embedded part of an application running in the same virtual machine. | jmx["jboss.as:management-root=server","launchType"] | JMX | no delay |
| Name | For standalone mode: The name of this server. If not set, defaults to the runtime value of InetAddress.getLocalHost().getHostName().<br>For domain mode: The name given to this domain. | jmx["jboss.as:management-root=server","name"] | JMX | no delay |
| Process type | The type of process represented by this root resource. | jmx["jboss.as:management-root=server","processType"] | JMX | no delay |
| Version | The version of the WildFly Core based product release. | jmx["jboss.as:management-root=server","productVersion"] | JMX | no delay |
| Runtime configuration state | The current persistent configuration state, one of starting, ok, reload-required, restart-required, stopping or stopped. | jmx["jboss.as:management-root=server","runtimeConfigurationState"] | JMX | no delay |
| Server controller state | The current state of the server controller; either STARTING, RUNNING, RESTART_REQUIRED, RELOAD_REQUIRED or STOPPING. | jmx["jboss.as:management-root=server","serverState"] | JMX | no delay |
| Transactions: Aborted, rate | The number of aborted (i.e. rolledback) transactions per second. | jmx["jboss.as:subsystem=transactions","numberOfAbortedTransactions"] | JMX | no delay |
| Transactions: Application rollbacks, rate | The number of transactions that have been rolled back by application request. This includes those that timeout, since the timeout behavior is considered an attribute of the application configuration. | jmx["jboss.as:subsystem=transactions","numberOfApplicationRollbacks"] | JMX | no delay |
| Transactions: Committed, rate | The number of committed transactions. | jmx["jboss.as:subsystem=transactions","numberOfCommittedTransactions"] | JMX | no delay |
| Transactions: Heuristics, rate | The number of transactions which have terminated with heuristic outcomes. | jmx["jboss.as:subsystem=transactions","numberOfHeuristics"] | JMX | no delay |
| Transactions: Current | The number of transactions that have begun but not yet terminated. | jmx["jboss.as:subsystem=transactions","numberOfInflightTransactions"] | JMX | no delay |
| Transactions: Nested, rate | The total number of nested (sub) transactions created. | jmx["jboss.as:subsystem=transactions","numberOfNestedTransactions"] | JMX | no delay |
| Transactions: ResourceRollbacks, rate | The number of transactions that rolled back due to resource (participant) failure. | jmx["jboss.as:subsystem=transactions","numberOfResourceRollbacks"] | JMX | no delay |
| Transactions: System rollbacks, rate | The number of transactions that have been rolled back due to internal system errors. | jmx["jboss.as:subsystem=transactions","numberOfSystemRollbacks"] | JMX | no delay |
| Transactions: Timed out, rate | The number of transactions that have rolled back due to timeout. | jmx["jboss.as:subsystem=transactions","numberOfTimedOutTransactions"] | JMX | no delay |
| Transactions: Total, rate | The total number of transactions (top-level and nested) created per second. | jmx["jboss.as:subsystem=transactions","numberOfTransactions"] | JMX | no delay |


<a name="macros" />

## Macros
| macro | value |
| ------------- |------------- |
| {$WILDFLY.CONN.USAGE.WARN.MAX} | 80 |
| {$WILDFLY.CONN.WAIT.MAX.WARN} | 300 |
| {$WILDFLY.DEPLOYMENT.MATCHES} | .* |
| {$WILDFLY.DEPLOYMENT.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$WILDFLY.JMX.PROTOCOL} | remote+http |
| {$WILDFLY.PASSWORD} | zabbix |
| {$WILDFLY.USER} | zabbix |


<a name="triggers" />

## Triggers
| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Failed to fetch info data | WARNING | Zabbix has not received data for items for the last 15 minutes | nodata(/WildFly Server by JMX/jmx["java.lang:type=Runtime","Uptime"],15m)=1 | [{"tag": "scope", "value": "availability"}] | no url |
| Host has been restarted | INFO | Uptime is less than 10 minutes. | last(/WildFly Server by JMX/jmx["java.lang:type=Runtime","Uptime"])<10m | [{"tag": "scope", "value": "notice"}] | no url |
| Version has changed | INFO | WildFly version has changed. Acknowledge to close the problem manually. | last(/WildFly Server by JMX/jmx["jboss.as:management-root=server","productVersion"],#1)<>last(/WildFly Server by JMX/jmx["jboss.as:management-root=server","productVersion"],#2) and length(last(/WildFly Server by JMX/jmx["jboss.as:management-root=server","productVersion"]))>0 | [{"tag": "scope", "value": "notice"}] | no url |
| Server needs to restart for configuration change. | WARNING | no description | find(/WildFly Server by JMX/jmx["jboss.as:management-root=server","runtimeConfigurationState"],,"like","ok")=0 | [{"tag": "scope", "value": "notice"}] | no url |
| Server controller is not in RUNNING state | WARNING | no description | find(/WildFly Server by JMX/jmx["jboss.as:management-root=server","serverState"],,"like","running")=0 | [{"tag": "scope", "value": "availability"}] | no url |


<a name="discoveries" />

## Discoveries
| name | key | description | type | lifetime | delay |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Deployments discovery | jmx.get[beans,"jboss.as.expr:deployment=*"] | Discovery deployments metrics. | JMX | no lifetime | 1h |
| JDBC metrics discovery | jmx.get[beans,"jboss.as:subsystem=datasources,data-source=*,statistics=jdbc"] | no description | JMX | no lifetime | 1h |
| Pools metrics discovery | jmx.get[beans,"jboss.as:subsystem=datasources,data-source=*,statistics=pool"] | no description | JMX | no lifetime | 1h |
| Undertow metrics discovery | jmx.get[beans,"jboss.as:subsystem=undertow,server=*,http-listener=*"] | no description | JMX | no lifetime | 1h |


<a name="discovery_deployments_discovery" />

## Discovery Deployments discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| WildFly deployment [{#DEPLOYMENT}]: Enabled time | Indicates if the deployment is managed (aka uses the ContentRepository). | jmx["{#JMXOBJ}",enabledTime] | JMX |
| WildFly deployment [{#DEPLOYMENT}]: Enabled | Boolean indicating whether the deployment content is currently deployed in the runtime (or should be deployed in the runtime the next time the server starts). | jmx["{#JMXOBJ}",enabled] | JMX |
| WildFly deployment [{#DEPLOYMENT}]: Managed | Indicates if the deployment is managed (aka uses the ContentRepository). | jmx["{#JMXOBJ}",managed] | JMX |
| WildFly deployment [{#DEPLOYMENT}]: Persistent | Indicates if the deployment is managed (aka uses the ContentRepository). | jmx["{#JMXOBJ}",persistent] | JMX |
| WildFly deployment [{#DEPLOYMENT}]: Status | The current runtime status of a deployment.<br>Possible status modes are OK, FAILED, and STOPPED.<br>FAILED indicates a dependency is missing or a service could not start.<br>STOPPED indicates that the deployment was not enabled or was manually stopped. | jmx["{#JMXOBJ}",status] | JMX |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| WildFly deployment [{#DEPLOYMENT}]: Deployment status has changed | WARNING | Deployment status has changed. Acknowledge to close the problem manually. | last(/WildFly Server by JMX/jmx["{#JMXOBJ}",status],#1)<>last(/WildFly Server by JMX/jmx["{#JMXOBJ}",status],#2) and length(last(/WildFly Server by JMX/jmx["{#JMXOBJ}",status]))>0 | [{"tag": "scope", "value": "notice"}] | no url |


<a name="discovery_jdbc_metrics_discovery" />

## Discovery JDBC metrics discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| WildFly {#JMX_DATA_SOURCE}: Cache access, rate | The number of times that the statement cache was accessed  per second. | jmx["{#JMXOBJ}",PreparedStatementCacheAccessCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Cache add, rate | The number of statements added to the statement cache per second. | jmx["{#JMXOBJ}",PreparedStatementCacheAddCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Cache current size | The number of prepared and callable statements currently cached in the statement cache. | jmx["{#JMXOBJ}",PreparedStatementCacheCurrentSize] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Cache delete, rate | The number of statements discarded from the cache per second. | jmx["{#JMXOBJ}",PreparedStatementCacheDeleteCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Cache hit, rate | The number of times that statements from the cache were used per second. | jmx["{#JMXOBJ}",PreparedStatementCacheHitCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Cache miss, rate | The number of times that a statement request could not be satisfied with a statement from the cache per second. | jmx["{#JMXOBJ}",PreparedStatementCacheMissCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Statistics enabled | Define whether runtime statistics are enabled or not. | jmx["{#JMXOBJ}",statisticsEnabled, "JDBC"] | JMX |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| WildFly {#JMX_DATA_SOURCE}: JDBC monitoring statistic is not enabled | INFO | no description | last(/WildFly Server by JMX/jmx["{#JMXOBJ}",statisticsEnabled, "JDBC"])=0 | [{"tag": "scope", "value": "notice"}] | no url |


<a name="discovery_pools_metrics_discovery" />

## Discovery Pools metrics discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| WildFly {#JMX_DATA_SOURCE}: Connections: Active | The number of open connections. | jmx["{#JMXOBJ}",ActiveCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Connections: Available | The available count. | jmx["{#JMXOBJ}",AvailableCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Blocking time, avg | Average Blocking Time for pool. | jmx["{#JMXOBJ}",AverageBlockingTime] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Connections: Creating time, avg | The average time spent creating a physical connection. | jmx["{#JMXOBJ}",AverageCreationTime] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Connections: Get time, avg | The average time spent obtaining a physical connection. | jmx["{#JMXOBJ}",AverageGetTime] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Connections: Pool time, avg | The average time for a physical connection spent in the pool. | jmx["{#JMXOBJ}",AveragePoolTime] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Connections: Usage time, avg | The average time spent using a physical connection | jmx["{#JMXOBJ}",AverageUsageTime] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Connections: Blocking failure, rate | The number of failures trying to obtain a physical connection per second. | jmx["{#JMXOBJ}",BlockingFailureCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Connections: Created, rate | The created per second | jmx["{#JMXOBJ}",CreatedCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Connections: Destroyed, rate | The destroyed count. | jmx["{#JMXOBJ}",DestroyedCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Connections: Idle | The number of physical connections currently idle. | jmx["{#JMXOBJ}",IdleCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Connections: In use | The number of physical connections currently in use. | jmx["{#JMXOBJ}",InUseCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Connections: Used, max | The maximum number of connections used. | jmx["{#JMXOBJ}",MaxUsedCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Statistics enabled | Define whether runtime statistics are enabled or not. | jmx["{#JMXOBJ}",statisticsEnabled] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Connections: Timed out, rate | The timed out connections per second. | jmx["{#JMXOBJ}",TimedOut] | JMX |
| WildFly {#JMX_DATA_SOURCE}: Connections: Wait | The number of requests that had to wait to obtain a physical connection. | jmx["{#JMXOBJ}",WaitCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: XA: Commit time, avg | The average time for a XAResource commit invocation. | jmx["{#JMXOBJ}",XACommitAverageTime] | JMX |
| WildFly {#JMX_DATA_SOURCE}: XA: Commit, rate | The number of XAResource commit invocations per second. | jmx["{#JMXOBJ}",XACommitCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: XA: End time, avg | The average time for a XAResource end invocation. | jmx["{#JMXOBJ}",XAEndAverageTime] | JMX |
| WildFly {#JMX_DATA_SOURCE}: XA: End, rate | The number of XAResource end invocations per second. | jmx["{#JMXOBJ}",XAEndCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: XA: Forget time, avg | The average time for a XAResource forget invocation. | jmx["{#JMXOBJ}",XAForgetAverageTime] | JMX |
| WildFly {#JMX_DATA_SOURCE}: XA: Forget, rate | The number of XAResource forget invocations per second. | jmx["{#JMXOBJ}",XAForgetCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: XA: Prepare time, avg | The average time for a XAResource prepare invocation. | jmx["{#JMXOBJ}",XAPrepareAverageTime] | JMX |
| WildFly {#JMX_DATA_SOURCE}: XA: Prepare, rate | The number of XAResource prepare invocations per second. | jmx["{#JMXOBJ}",XAPrepareCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: XA: Recover time, avg | The average time for a XAResource recover invocation. | jmx["{#JMXOBJ}",XARecoverAverageTime] | JMX |
| WildFly {#JMX_DATA_SOURCE}: XA: Recover, rate | The number of XAResource recover invocations per second. | jmx["{#JMXOBJ}",XARecoverCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: XA: Rollback time, avg | The average time for a XAResource rollback invocation. | jmx["{#JMXOBJ}",XARollbackAverageTime] | JMX |
| WildFly {#JMX_DATA_SOURCE}: XA: Rollback, rate | The number of XAResource rollback invocations per second. | jmx["{#JMXOBJ}",XARollbackCount] | JMX |
| WildFly {#JMX_DATA_SOURCE}: XA: Start time, avg | The average time for a XAResource start invocation. | jmx["{#JMXOBJ}",XAStartAverageTime] | JMX |
| WildFly {#JMX_DATA_SOURCE}: XA: Start rate | The number of XAResource start invocations per second. | jmx["{#JMXOBJ}",XAStartCount] | JMX |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| WildFly {#JMX_DATA_SOURCE}: There are no active connections for 5m | WARNING | no description | max(/WildFly Server by JMX/jmx["{#JMXOBJ}",ActiveCount],5m)=0 | [{"tag": "scope", "value": "capacity"}] | no url |
| WildFly {#JMX_DATA_SOURCE}: Pools monitoring statistic is not enabled | INFO | Zabbix has not received data for items for the last 15 minutes | last(/WildFly Server by JMX/jmx["{#JMXOBJ}",statisticsEnabled])=0 | [{"tag": "scope", "value": "notice"}] | no url |
| WildFly {#JMX_DATA_SOURCE}: There are timeout connections | WARNING | no description | last(/WildFly Server by JMX/jmx["{#JMXOBJ}",TimedOut])>0 | [{"tag": "scope", "value": "performance"}] | no url |
| WildFly {#JMX_DATA_SOURCE}: Too many waiting connections | WARNING | no description | min(/WildFly Server by JMX/jmx["{#JMXOBJ}",WaitCount],5m)>{$WILDFLY.CONN.WAIT.MAX.WARN} | [{"tag": "scope", "value": "performance"}] | no url |
| WildFly {#JMX_DATA_SOURCE}: Connection usage is too high | HIGH | no description | min(/WildFly Server by JMX/jmx["{#JMXOBJ}",InUseCount],5m)/last(/WildFly Server by JMX/jmx["{#JMXOBJ}",AvailableCount])*100>{$WILDFLY.CONN.USAGE.WARN.MAX} | [{"tag": "scope", "value": "capacity"}] | no url |


<a name="discovery_undertow_metrics_discovery" />

## Discovery Undertow metrics discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| WildFly listener {#HTTP_LISTENER}: Bytes received, rate | The number of bytes that have been received by this listener per second. | jmx["{#JMXOBJ}",bytesReceived] | JMX |
| WildFly listener {#HTTP_LISTENER}: Bytes sent, rate | The number of bytes that have been sent out on this listener per second. | jmx["{#JMXOBJ}",bytesSent] | JMX |
| WildFly listener {#HTTP_LISTENER}: Errors, rate | The number of 500 responses that have been sent by this listener per second. | jmx["{#JMXOBJ}",errorCount] | JMX |
| WildFly listener {#HTTP_LISTENER}: Requests, rate | The number of requests this listener has served per second. | jmx["{#JMXOBJ}",requestCount] | JMX |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| WildFly listener {#HTTP_LISTENER}: There are 500 responses by this listener. | WARNING | no description | last(/WildFly Server by JMX/jmx["{#JMXOBJ}",errorCount])>0 | [{"tag": "scope", "value": "availability"}] | no url |

