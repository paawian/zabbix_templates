# GCP by HTTP template description

Discover GCP Compute Engine/Cloud SQL Instances and Compute Engine project quota metrics.
Don't forget to read the README.md for the correct setup of the template.

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback


Generated by official Zabbix template tool "Templator"

## Summary
* [items](#items)
* [macros](#macros)
* [triggers](#triggers)
* [discoveries](#discoveries)
  * [Discovery GCP Compute Engine: Project quotas discovery ](#discovery_gcp_compute_engine:_project_quotas_discovery)

<a name="items"></a>

## Items
| name | description | key | type | delay |
| ------------- |------------- |------------- |------------- |------------- |
| GCP: Authorization errors check | A list of errors from API requests. | gcp.auth.err.check | DEPENDENT | 0 |
| GCP: Authorization | Google Cloud Platform REST authorization with service account authentication parameters and temporary-generated RSA-based JWT-token usage.<br>The necessary scopes are pre-defined.<br>Returns a signed authorization token with 1 hour lifetime; it is required only once, and is used for all the dependent script items.<br>Check the template documentation for the details. | gcp.authorization | SCRIPT | {$GCP.AUTH.FREQUENCY} |
| Instances get | GCP Cloud SQL: Instances get. | gcp.cloudsql.instances.get | DEPENDENT | 0 |
| Instances total | GCP Cloud SQL instances total count. | gcp.cloudsql.instances.total | DEPENDENT | 0 |
| Container-Optimized instances count | GCP Compute Engine: count of instances with Container-Optimized OS used. | gcp.gce.instances.cos_count | DEPENDENT | 0 |
| Instances get | Get GCP Compute Engine instances. | gcp.gce.instances.get | DEPENDENT | 0 |
| Instances count | GCP Cloud SQL MSSQL instances count. | gcp.gce.instances.mssql_count | DEPENDENT | 0 |
| Instances count | GCP Cloud SQL MySQL instances count. | gcp.gce.instances.mysql_count | DEPENDENT | 0 |
| Instances count | GCP Cloud SQL PostgreSQL instances count. | gcp.gce.instances.pgsql_count | DEPENDENT | 0 |
| Regular instances count | GCP Compute Engine: Regular instances count. | gcp.gce.instances.regular_count | DEPENDENT | 0 |
| Instances total | GCP Compute Engine instances total count. | gcp.gce.instances.total | DEPENDENT | 0 |
| Project quotas get | GCP Compute Engine resource quotas available for the particular project. | gcp.gce.quotas.get | DEPENDENT | 0 |


<a name="macros"></a>

## Macros
| macro | value |
| ------------- |------------- |
| {$GCP.AUTH.FREQUENCY} | 45m |
| {$GCP.CLIENT.EMAIL} | no value |
| {$GCP.DATA.TIMEOUT} | 15s |
| {$GCP.GCE.INST.NAME.MATCHES} | .* |
| {$GCP.GCE.INST.NAME.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$GCP.GCE.QUOTA.MATCHES} | .* |
| {$GCP.GCE.QUOTA.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$GCP.GCE.QUOTA.PUSED.MIN.CRIT} | 95 |
| {$GCP.GCE.QUOTA.PUSED.MIN.WARN} | 80 |
| {$GCP.GCE.ZONE.MATCHES} | .* |
| {$GCP.GCE.ZONE.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$GCP.MSSQL.INST.NAME.MATCHES} | .* |
| {$GCP.MSSQL.INST.NAME.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$GCP.MSSQL.INST.TYPE.MATCHES} | .* |
| {$GCP.MSSQL.INST.TYPE.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$GCP.MSSQL.ZONE.MATCHES} | .* |
| {$GCP.MSSQL.ZONE.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$GCP.MYSQL.INST.NAME.MATCHES} | .* |
| {$GCP.MYSQL.INST.NAME.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$GCP.MYSQL.INST.TYPE.MATCHES} | .* |
| {$GCP.MYSQL.INST.TYPE.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$GCP.MYSQL.ZONE.MATCHES} | .* |
| {$GCP.MYSQL.ZONE.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$GCP.PGSQL.INST.NAME.MATCHES} | .* |
| {$GCP.PGSQL.INST.NAME.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$GCP.PGSQL.INST.TYPE.MATCHES} | .* |
| {$GCP.PGSQL.INST.TYPE.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$GCP.PGSQL.ZONE.MATCHES} | .* |
| {$GCP.PGSQL.ZONE.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$GCP.PRIVATE.KEY} | no value |
| {$GCP.PRIVATE.KEY.ID} | no value |
| {$GCP.PROJECT.ID} | no value |
| {$GCP.PROXY} | no value |


<a name="triggers"></a>

## Triggers
| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| GCP: Authorization has failed | AVERAGE | GCP: Authorization has failed.<br>Check the authorization parameters and GCP API availability from a network segment, where Zabbix-server/proxy is located. | length(last(/GCP by HTTP/gcp.auth.err.check)) > 0 | [{"tag": "scope", "value": "availability"}] | no url |


<a name="discoveries"></a>

## Discoveries
| name | key | description | type | lifetime | delay |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| GCP Cloud SQL: MSSQL instances discovery | gcp.cloudsql.mssql.inst.discovery | GCP Cloud SQL: MSSQL instances discovery. | DEPENDENT | no lifetime | 0 |
| GCP Cloud SQL: MySQL instances discovery | gcp.cloudsql.mysql.inst.discovery | GCP Cloud SQL: MySQL instances discovery. | DEPENDENT | no lifetime | 0 |
| GCP Cloud SQL: PostgreSQL instances discovery | gcp.cloudsql.pgsql.inst.discovery | GCP Cloud SQL: PostgreSQL instances discovery. | DEPENDENT | no lifetime | 0 |
| GCP Compute Engine: Instances discovery | gcp.gce.inst.discovery | GCP Compute Engine: Instances discovery. | DEPENDENT | no lifetime | 0 |
| GCP Compute Engine: Project quotas discovery | gcp.gce.quotas.discovery | GCP Compute Engine: Quotas discovery. | DEPENDENT | no lifetime | 0 |


<a name="discovery_gcp_compute_engine:_project_quotas_discovery" />

## Discovery GCP Compute Engine: Project quotas discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Quota [{#GCE.QUOTA.NAME}]: Limit | GCP Compute Engine: The current limit value for [{#GCE.QUOTA.NAME}] quota. | gcp.gce.quota.limit[{#GCE.QUOTA.NAME}] | DEPENDENT |
| Quota [{#GCE.QUOTA.NAME}]: Percentage used | GCP Compute Engine: Percentage usage for [{#GCE.QUOTA.NAME}] quota. | gcp.gce.quota.pused[{#GCE.QUOTA.NAME}] | DEPENDENT |
| Quota [{#GCE.QUOTA.NAME}]: Raw data | GCP Compute Engine: Get metrics for [{#GCE.QUOTA.NAME}] quota. | gcp.gce.quota.single.raw[{#GCE.QUOTA.NAME}] | DEPENDENT |
| Quota [{#GCE.QUOTA.NAME}]: Usage | GCP Compute Engine: The current usage value for [{#GCE.QUOTA.NAME}] quota. | gcp.gce.quota.usage[{#GCE.QUOTA.NAME}] | DEPENDENT |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Quota [{#GCE.QUOTA.NAME}] limit has been changed | INFO | GCP Compute Engine: The limit for the `{#GCE.QUOTA.NAME}` quota has been changed. | change(/GCP by HTTP/gcp.gce.quota.limit[{#GCE.QUOTA.NAME}]) <> 0 | [{"tag": "scope", "value": "capacity"}] | no url |
| Quota [{#GCE.QUOTA.NAME}] usage is close to reaching the limit | WARNING | GCP Compute Engine: The usage percentage for the `{#GCE.QUOTA.NAME}` quota is close to reaching the limit. | last(/GCP by HTTP/gcp.gce.quota.pused[{#GCE.QUOTA.NAME}]) >= {$GCP.GCE.QUOTA.PUSED.MIN.WARN:"{#GCE.QUOTA.NAME}"} | [{"tag": "scope", "value": "capacity"}] | no url |
| Quota [{#GCE.QUOTA.NAME}] usage is critically close to reaching the limit | AVERAGE | GCP Compute Engine: The usage percentage for the `{#GCE.QUOTA.NAME}` quota is critically close to reaching the limit. | last(/GCP by HTTP/gcp.gce.quota.pused[{#GCE.QUOTA.NAME}]) >= {$GCP.GCE.QUOTA.PUSED.MIN.CRIT:"{#GCE.QUOTA.NAME}"} | [{"tag": "scope", "value": "capacity"}, {"tag": "scope", "value": "notice"}] | no url |

