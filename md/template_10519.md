# Template: CockroachDB by HTTP

## Template ID
10519

## Description
The template to monitor CockroachDB nodes by Zabbix that works without any external scripts.
Most of the metrics are collected in one go, thanks to Zabbix bulk data collection.

The template collects metrics by HTTP agent from Prometheus endpoint and health endpoints.

Internal node metrics are collected from Prometheus /_status/vars endpoint.
Node health metrics are collected from /health and /health?ready=1 endpoints.
The template doesn't require usage of session token.

Note, that some metrics may not be collected depending on your CockroachDB version and configuration.

Setup:

Set the hostname or IP address of the CockroachDB node host in the '{$COCKROACHDB.API.HOST}' macro. You can also change the port in the '{$COCKROACHDB.API.PORT}' macro and the scheme in the '{$COCKROACHDB.API.SCHEME}' macro if necessary.

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback

Generated by official Zabbix template tool "Templator"

## Linked Hosts
None

## Items

### Item: CA certificate expiration date
- **Description**: CA certificate expires at that date.
- **Interval**: 0
- **Data Type**: 0

### Item: Node certificate expiration date
- **Description**: Node certificate expires at that date.
- **Interval**: 0
- **Data Type**: 0

### Item: Clock offset
- **Description**: Mean clock offset of the node against the rest of the cluster.
- **Interval**: 0
- **Data Type**: 0

### Item: CPU: System time
- **Description**: System CPU time.
- **Interval**: 0
- **Data Type**: 0

### Item: CPU: User time
- **Description**: User CPU time.
- **Interval**: 0
- **Data Type**: 0

### Item: CPU: Utilization
- **Description**: The CPU utilization expressed in %.
- **Interval**: 0
- **Data Type**: 0

### Item: File descriptors: Limit
- **Description**: Open file descriptors soft limit of the process.
- **Interval**: 0
- **Data Type**: 0

### Item: File descriptors: Open
- **Description**: The number of open file descriptors.
- **Interval**: 0
- **Data Type**: 0

### Item: Disk: IOPS in progress, rate
- **Description**: Number of disk IO operations currently in progress on this host.
- **Interval**: 0
- **Data Type**: 0

### Item: Disk: Read IOPS, rate
- **Description**: Number of disk read operations per second across all disks since this process started.
- **Interval**: 0
- **Data Type**: 0

### Item: Disk: Write IOPS, rate
- **Description**: Disk write operations per second across all disks since this process started.
- **Interval**: 0
- **Data Type**: 0

### Item: Disk: Reads, rate
- **Description**: Bytes read from all disks per second since this process started
- **Interval**: 0
- **Data Type**: 0

### Item: Disk: Writes, rate
- **Description**: Bytes written to all disks per second since this process started.
- **Interval**: 0
- **Data Type**: 0

### Item: GC: Pause time
- **Description**: The amount of processor time used by Go's garbage collector across all nodes. During garbage collection, application code execution is paused.
- **Interval**: 0
- **Data Type**: 0

### Item: GC: Runs, rate
- **Description**: The number of times that Go's garbage collector was invoked per second across all nodes.
- **Interval**: 0
- **Data Type**: 0

### Item: Get health
- **Description**: Get node /health endpoint
- **Interval**: 1m
- **Data Type**: 3

### Item: Get metrics
- **Description**: Get raw metrics from the Prometheus endpoint.
- **Interval**: 1m
- **Data Type**: 4

### Item: Get readiness
- **Description**: Get node /health?ready=1 endpoint
- **Interval**: 1m
- **Data Type**: 3

### Item: Go: Goroutines count
- **Description**: Current number of Goroutines. This count should rise and fall based on load.
- **Interval**: 0
- **Data Type**: 0

### Item: Liveness heartbeats, rate
- **Description**: Number of successful node liveness heartbeats per second from this node.
- **Interval**: 0
- **Data Type**: 3

### Item: KV transactions: Aborted, rate
- **Description**: Number of aborted KV transactions per second.
- **Interval**: 0
- **Data Type**: 0

### Item: KV transactions: Committed, rate
- **Description**: Number of KV transactions (including 1PC) committed per second.
- **Interval**: 0
- **Data Type**: 0

### Item: Live nodes count
- **Description**: The number of live nodes in the cluster (will be 0 if this node is not itself live).
- **Interval**: 0
- **Data Type**: 3

### Item: Memory: Allocated by Cgo
- **Description**: Current bytes of memory allocated by the C layer.
- **Interval**: 0
- **Data Type**: 0

### Item: Memory: Managed by Cgo
- **Description**: Total bytes of memory managed by the C layer.
- **Interval**: 0
- **Data Type**: 0

### Item: Memory: Allocated by Go
- **Description**: Current bytes of memory allocated by the Go layer.
- **Interval**: 0
- **Data Type**: 0

### Item: Memory: Managed by Go
- **Description**: Total bytes of memory managed by the Go layer.
- **Interval**: 0
- **Data Type**: 0

### Item: Memory: Allocated by SQL
- **Description**: Current SQL statement memory usage for root.
- **Interval**: 0
- **Data Type**: 0

### Item: Memory: Total usage
- **Description**: Resident set size (RSS) of memory in use by the node.
- **Interval**: 0
- **Data Type**: 0

### Item: Network: Bytes received, rate
- **Description**: Bytes received per second on all network interfaces since this process started.
- **Interval**: 0
- **Data Type**: 0

### Item: Network: Bytes sent, rate
- **Description**: Bytes sent per second on all network interfaces since this process started.
- **Interval**: 0
- **Data Type**: 0

### Item: Slow requests: DistSender RPCs
- **Description**: Number of RPCs stuck or retrying for a long time.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL: Bytes received, rate
- **Description**: Total amount of incoming SQL client network traffic in bytes per second.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL: Bytes sent, rate
- **Description**: Total amount of outgoing SQL client network traffic in bytes per second.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL: Schema changes, rate
- **Description**: Total number of SQL DDL statements successfully executed per second.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL sessions: Open
- **Description**: Total number of open SQL sessions.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL statements: Active
- **Description**: Total number of SQL statements currently active.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL statements: Contention, rate
- **Description**: Total number of SQL statements that experienced contention per second.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL statements: DELETE, rate
- **Description**: A moving average of the number of DELETE statements successfully executed per second.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL statements: Denials, rate
- **Description**: The number of statements denied per second by a feature flag.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL statements: Errors, rate
- **Description**: Total number of statements which returned a planning or runtime error per second.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL statements: Executed, rate
- **Description**: Number of SQL queries executed per second.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL statements: Active flows distributed, rate
- **Description**: The number of distributed SQL flows currently active per second.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL statements: INSERT, rate
- **Description**: A moving average of the number of INSERT statements successfully executed per second.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL statements: SELECT, rate
- **Description**: A moving average of the number of SELECT statements successfully executed per second.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL statements: UPDATE, rate
- **Description**: A moving average of the number of UPDATE statements successfully executed per second.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL transactions: Aborted, rate
- **Description**: Total number of SQL transaction abort errors per second.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL transactions: Committed, rate
- **Description**: Total number of SQL transaction COMMIT statements successfully executed per second.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL transactions: Initiated, rate
- **Description**: Total number of SQL transaction BEGIN statements successfully executed per second.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL transactions: Open
- **Description**: Total number of currently open SQL transactions.
- **Interval**: 0
- **Data Type**: 0

### Item: SQL transactions: Rolled back, rate
- **Description**: Total number of SQL transaction ROLLBACK statements successfully executed per second.
- **Interval**: 0
- **Data Type**: 0

### Item: Time series: Sample errors, rate
- **Description**: The number of errors encountered while attempting to write metrics to disk, per second.
- **Interval**: 0
- **Data Type**: 0

### Item: Time series: Samples written, rate
- **Description**: The number of successfully written metric samples per second.
- **Interval**: 0
- **Data Type**: 0

### Item: Uptime
- **Description**: Process uptime.
- **Interval**: 0
- **Data Type**: 0

### Item: Version
- **Description**: Build information.
- **Interval**: 0
- **Data Type**: 1

### Item: Service ping
- **Description**: Check if HTTP/HTTPS service accepts TCP connections.
- **Interval**: 1m
- **Data Type**: 3

