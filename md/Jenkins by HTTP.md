# Jenkins by HTTP template description

Get Jenkins metrics by HTTP agent.
Metrics are collected by requests to Metrics API. Install  Metrics plugin and configure access to the Metrics Servlet by issuing API key.
Don't forget to change macros {$JENKINS.URL}, {$JENKINS.USER}, {$JENKINS.API.TOKEN}, {$JENKINS.API.KEY}.

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback

Generated by official Zabbix template tool "Templator"

## Summary
* [items](#items)
* [macros](#macros)
* [triggers](#triggers)
* [discoveries](#discoveries)
  * [Discovery Computers discovery ](#discovery_computers_discovery)
  * [Discovery Jobs discovery ](#discovery_jobs_discovery)

<a name="items" />

## Items
| name | description | key | type | delay |
| ------------- |------------- |------------- |------------- |------------- |
| Get computer info | no description | jenkins.computer_info | HTTP_AGENT | no delay |
| File descriptor ratio | The ratio of used to total file descriptors | jenkins.descriptor.ratio | DEPENDENT | 0 |
| Disk space check | Returns FAIL if any of the Jenkins disk space monitors are reporting the disk space as less than the configured threshold. | jenkins.disk_space | DEPENDENT | 0 |
| Disk space check message | The message will reference the first node which fails this check.  There may be other nodes that fail the check, but this health check is designed to fail fast. | jenkins.disk_space.message | DEPENDENT | 0 |
| Executors count | The number of executors available to Jenkins. This is corresponds to the sum of all the executors of all the online nodes. | jenkins.executor.count | DEPENDENT | 0 |
| Executors free | The number of executors available to Jenkins that are not currently in use. | jenkins.executor.free | DEPENDENT | 0 |
| Executors in use | The number of executors available to Jenkins that are currently in use. | jenkins.executor.in_use | DEPENDENT | 0 |
| Get gauges | Raw items for gauges metrics. | jenkins.gauges.raw | DEPENDENT | 0 |
| Get service metrics | no description | jenkins.get_metrics | HTTP_AGENT | no delay |
| Get healthcheck | no description | jenkins.healthcheck | HTTP_AGENT | no delay |
| HTTP active requests, rate | The number of currently active requests against the Jenkins master Web UI. | jenkins.http.active_requests.rate | DEPENDENT | 0 |
| HTTP response 400, rate | The rate at which the Jenkins master Web UI is responding to requests with an HTTP/400 status code. | jenkins.http.bad_request.rate | DEPENDENT | 0 |
| HTTP response 201, rate | The rate at which the Jenkins master Web UI is responding to requests with an HTTP/201 status code. | jenkins.http.created.rate | DEPENDENT | 0 |
| HTTP response 403, rate | The rate at which the Jenkins master Web UI is responding to requests with an HTTP/403 status code. | jenkins.http.forbidden.rate | DEPENDENT | 0 |
| HTTP response 404, rate | The rate at which the Jenkins master Web UI is responding to requests with an HTTP/404 status code. | jenkins.http.not_found.rate | DEPENDENT | 0 |
| HTTP response 304, rate | The rate at which the Jenkins master Web UI is responding to requests with an HTTP/304 status code. | jenkins.http.not_modified.rate | DEPENDENT | 0 |
| HTTP response 204, rate | The rate at which the Jenkins master Web UI is responding to requests with an HTTP/204 status code. | jenkins.http.no_content.rate | DEPENDENT | 0 |
| HTTP response 200, rate | The rate at which the Jenkins master Web UI is responding to requests with an HTTP/200 status code. | jenkins.http.ok.rate | DEPENDENT | 0 |
| HTTP response other, rate | The rate at which the Jenkins master Web UI is responding to requests with a non-informational status code that is not in the list: HTTP/200, HTTP/201, HTTP/204, HTTP/304, HTTP/400, HTTP/403, HTTP/404, HTTP/500, or HTTP/503. | jenkins.http.other.rate | DEPENDENT | 0 |
| HTTP requests, rate | The rate at which the Jenkins master Web UI is receiving requests. | jenkins.http.requests.rate | DEPENDENT | 0 |
| HTTP requests, median | The time spent generating the corresponding responses. | jenkins.http.requests_p50.rate | DEPENDENT | 0 |
| HTTP requests, p95 | The time spent generating the corresponding responses. | jenkins.http.requests_p95.rate | DEPENDENT | 0 |
| HTTP response 500, rate | The rate at which the Jenkins master Web UI is responding to requests with an HTTP/500 status code. | jenkins.http.server_error.rate | DEPENDENT | 0 |
| HTTP response 503, rate | The rate at which the Jenkins master Web UI is responding to requests with an HTTP/503 status code. | jenkins.http.service_unavailable.rate | DEPENDENT | 0 |
| Job blocked duration, median | The amount of time which jobs spend in the blocked state. | jenkins.job.blocked.duration.p50 | DEPENDENT | 0 |
| Job blocked duration, p95 | The amount of time which jobs spend in the blocked state. | jenkins.job.blocked.duration.p95 | DEPENDENT | 0 |
| Job blocked, m1 rate | The rate at which jobs in the build queue enter the blocked state. | jenkins.job.blocked.m1.rate | DEPENDENT | 0 |
| Job blocked, m5 rate | The rate at which jobs in the build queue enter the blocked state. | jenkins.job.blocked.m5.rate | DEPENDENT | 0 |
| Job buildable duration, median | The amount of time which jobs spend in the buildable state. | jenkins.job.buildable.duration.p50 | DEPENDENT | 0 |
| Job buildable duration, p95 | The amount of time which jobs spend in the buildable state. | jenkins.job.buildable.duration.p95 | DEPENDENT | 0 |
| Job buildable, m1 rate | The rate at which jobs in the build queue enter the buildable state. | jenkins.job.buildable.m1.rate | DEPENDENT | 0 |
| Job buildable, m5 rate | The rate at which jobs in the build queue enter the buildable state. | jenkins.job.buildable.m5.rate | DEPENDENT | 0 |
| Job building duration, median | The amount of time which jobs spend building. | jenkins.job.building.duration.p50 | DEPENDENT | 0 |
| Job building duration, p95 | The amount of time which jobs spend building. | jenkins.job.building.duration.p95 | DEPENDENT | 0 |
| Job building, m1 rate | The rate at which jobs are built. | jenkins.job.building.m1.rate | DEPENDENT | 0 |
| Job building, m5 rate | The rate at which jobs are built. | jenkins.job.building.m5.rate | DEPENDENT | 0 |
| Jobs count | The number of jobs in Jenkins. | jenkins.job.count.value | DEPENDENT | 0 |
| Job queuing duration, median | The total time which jobs spend in the build queue. | jenkins.job.queuing.duration.p50 | DEPENDENT | 0 |
| Job queuing duration, p95 | The total time which jobs spend in the build queue. | jenkins.job.queuing.duration.p95 | DEPENDENT | 0 |
| Job queuing, m1 rate | The rate at which jobs are queued. | jenkins.job.queuing.m1.rate | DEPENDENT | 0 |
| Job queuing, m5 rate | The rate at which jobs are queued. | jenkins.job.queuing.m5.rate | DEPENDENT | 0 |
| Job scheduled, m1 rate | The rate at which jobs are scheduled. If a job is already in the queue and an identical request for scheduling the job is received then Jenkins will coalesce the two requests. This metric gives a reasonably pure measure of the load requirements of the Jenkins master as it is unaffected by the number of executors available to the system. | jenkins.job.scheduled.m1.rate | DEPENDENT | 0 |
| Jobs scheduled, m5 rate | The rate at which jobs are scheduled. If a job is already in the queue and an identical request for scheduling the job is received then Jenkins will coalesce the two requests. This metric gives a reasonably pure measure of the load requirements of the Jenkins master as it is unaffected by the number of executors available to the system. | jenkins.job.scheduled.m5.rate | DEPENDENT | 0 |
| Job total duration, median | The total time which jobs spend from entering the build queue to completing building. | jenkins.job.total.duration.p50 | DEPENDENT | 0 |
| Job total duration, p95 | The total time which jobs spend from entering the build queue to completing building. | jenkins.job.total.duration.p95 | DEPENDENT | 0 |
| Job total, m1 rate | The rate at which jobs are queued. | jenkins.job.total.m1.rate | DEPENDENT | 0 |
| Job total, m5 rate | The rate at which jobs are queued. | jenkins.job.total.m5.rate | DEPENDENT | 0 |
| Job waiting duration, median | The total amount of time that jobs spend in their quiet period. | jenkins.job.waiting.duration.p50 | DEPENDENT | 0 |
| Job waiting duration, p95 | The total amount of time that jobs spend in their quiet period. | jenkins.job.waiting.duration.p95 | DEPENDENT | 0 |
| Job waiting, m1 rate | The rate at which jobs enter the quiet period. | jenkins.job.waiting.m1.rate | DEPENDENT | 0 |
| Job waiting, m5 rate | The rate at which jobs enter the quiet period. | jenkins.job.waiting.m5.rate | DEPENDENT | 0 |
| Get jobs info | no description | jenkins.job_info | HTTP_AGENT | 5m |
| Get meters | Raw items for meters metrics. | jenkins.meters.raw | DEPENDENT | 0 |
| Nodes count | The number of build nodes available to Jenkins, both online and offline. | jenkins.node.count | DEPENDENT | 0 |
| Nodes offline | The number of build nodes available to Jenkins but currently offline. | jenkins.node.offline | DEPENDENT | 0 |
| Nodes online | The number of build nodes available to Jenkins and currently online. | jenkins.node.online | DEPENDENT | 0 |
| Service ping | no description | jenkins.ping | HTTP_AGENT | no delay |
| Plugins check | Returns FAIL if any of the Jenkins plugins failed to start. | jenkins.plugins | DEPENDENT | 0 |
| Plugins active | The number of plugins in the Jenkins instance that started successfully. | jenkins.plugins.active | DEPENDENT | 0 |
| Plugins failed | The number of plugins in the Jenkins instance that failed to start. A value other than 0 is typically indicative of a potential issue within the Jenkins installation that will either be solved by explicitly disabling the plugin(s) or by resolving the plugin dependency issues. | jenkins.plugins.failed | DEPENDENT | 0 |
| Plugins inactive | The number of plugins in the Jenkins instance that are not currently enabled. | jenkins.plugins.inactive | DEPENDENT | 0 |
| Plugins check message | The message of plugins health check. | jenkins.plugins.message | DEPENDENT | 0 |
| Plugins with update | The number of plugins in the Jenkins instance that have a newer version reported as available in the current Jenkins update center metadata held by Jenkins. This value is not indicative of an issue with Jenkins but high values can be used as a trigger to review the plugins with updates with a view to seeing whether those updates potentially contain fixes for issues that could be affecting your Jenkins instance. | jenkins.plugins.with_update | DEPENDENT | 0 |
| Projects count | The number of projects. | jenkins.project.count | DEPENDENT | 0 |
| Build queue, blocked | The number of jobs that are in the Jenkins build queue and currently in the blocked state. | jenkins.queue.blocked | DEPENDENT | 0 |
| Build queue, buildable | The number of jobs that are in the Jenkins build queue and currently in the blocked state. | jenkins.queue.buildable | DEPENDENT | 0 |
| Build queue, pending | The number of jobs that are in the Jenkins build queue and currently in the blocked state. | jenkins.queue.pending | DEPENDENT | 0 |
| Build queue, size | The number of jobs that are in the Jenkins build queue. | jenkins.queue.size | DEPENDENT | 0 |
| Build queue, stuck | The number of jobs that are in the Jenkins build queue and currently in the blocked state. | jenkins.queue.stuck | DEPENDENT | 0 |
| CPU Load | The system load on the Jenkins master as reported by the JVM's Operating System JMX bean. The calculation of system load is operating system dependent. Typically this is the sum of the number of processes that are currently running plus the number that are waiting to run. This is typically comparable against the number of CPU cores. | jenkins.system.cpu.load | DEPENDENT | 0 |
| Uptime | The number of seconds since the Jenkins master JVM started. | jenkins.system.uptime | DEPENDENT | 0 |
| Temporary space check | Returns FAIL if any of the Jenkins temporary space monitors are reporting the temporary space as less than the configured threshold. | jenkins.temporary_space | DEPENDENT | 0 |
| Temporary space check message | The message will reference the first node which fails this check. There may be other nodes that fail the check, but this health check is designed to fail fast. | jenkins.temporary_space.message | DEPENDENT | 0 |
| Thread deadlock check | Returns FAIL if there are any deadlocked threads in the Jenkins master JVM. | jenkins.thread_deadlock | DEPENDENT | 0 |
| Thread deadlock check message | The message of thread deadlock health check. | jenkins.thread_deadlock.message | DEPENDENT | 0 |
| Get timers | Raw items for timers metrics. | jenkins.timers.raw | DEPENDENT | 0 |
| Version | Version of Jenkins server. | jenkins.version | DEPENDENT | 0 |


<a name="macros" />

## Macros
| macro | value |
| ------------- |------------- |
| {$JENKINS.API.KEY} | no value |
| {$JENKINS.API.TOKEN} | no value |
| {$JENKINS.FILE_DESCRIPTORS.MAX.WARN} | 85 |
| {$JENKINS.JOB.HEALTH.SCORE.MIN.WARN} | 50 |
| {$JENKINS.PING.REPLY} | pong |
| {$JENKINS.URL} | no value |
| {$JENKINS.USER} | zabbix |


<a name="triggers" />

## Triggers
| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Current number of used files is too high | WARNING | no description | min(/Jenkins by HTTP/jenkins.descriptor.ratio,5m)>{$JENKINS.FILE_DESCRIPTORS.MAX.WARN} | [{"tag": "scope", "value": "capacity"}] | no url |
| Service has no online nodes | AVERAGE | no description | last(/Jenkins by HTTP/jenkins.node.online)=0 | [{"tag": "scope", "value": "availability"}] | no url |
| Service is down | AVERAGE | no description | last(/Jenkins by HTTP/jenkins.ping)=0 | [{"tag": "scope", "value": "availability"}] | no url |
| Host has been restarted | INFO | Uptime is less than 10 minutes. | last(/Jenkins by HTTP/jenkins.system.uptime)<10m | [{"tag": "scope", "value": "notice"}] | no url |
| Version has changed | INFO | The Jenkins version has changed. Acknowledge to close the problem manually. | last(/Jenkins by HTTP/jenkins.version,#1)<>last(/Jenkins by HTTP/jenkins.version,#2) and length(last(/Jenkins by HTTP/jenkins.version))>0 | [{"tag": "scope", "value": "notice"}] | no url |
| Disk space is too low | WARNING | Jenkins disk space monitors are reporting the disk space as less than the configured threshold. The message will reference the first node which fails this check.<br>Health check message: {{ITEM.LASTVALUE2}.regsub("(.*)",\1)} | last(/Jenkins by HTTP/jenkins.disk_space)=0 and length(last(/Jenkins by HTTP/jenkins.disk_space.message))>0 | [{"tag": "scope", "value": "capacity"}] | no url |
| One or more Jenkins plugins failed to start | INFO | A failure is typically indicative of a potential issue within the Jenkins installation that will either be solved by explicitly disabling the failing plugin(s) or by resolving the corresponding plugin dependency issues.<br>Health check message: {{ITEM.LASTVALUE2}.regsub("(.*)",\1)} | last(/Jenkins by HTTP/jenkins.plugins)=0 and length(last(/Jenkins by HTTP/jenkins.plugins.message))>0 | [{"tag": "scope", "value": "notice"}] | no url |
| Temporary space is too low | WARNING | Jenkins temporary space monitors are reporting the temporary space as less than the configured threshold. The message will reference the first node which fails this check.<br>Health check message: {{ITEM.LASTVALUE2}.regsub("(.*)",\1)} | last(/Jenkins by HTTP/jenkins.temporary_space)=0 and length(last(/Jenkins by HTTP/jenkins.temporary_space.message))>0 | [{"tag": "scope", "value": "capacity"}] | no url |
| There are deadlocked threads in Jenkins master JVM | WARNING | There are any deadlocked threads in the Jenkins master JVM.<br>Health check message: {{ITEM.LASTVALUE2}.regsub('(.*)',\1)} | last(/Jenkins by HTTP/jenkins.thread_deadlock)=0 and length(last(/Jenkins by HTTP/jenkins.thread_deadlock.message))>0 | [{"tag": "scope", "value": "performance"}] | no url |


<a name="discoveries" />

## Discoveries
| name | key | description | type | lifetime | delay |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Computers discovery | jenkins.computers | no description | HTTP_AGENT | no lifetime | 1h |
| Jobs discovery | jenkins.jobs | no description | HTTP_AGENT | no lifetime | 1h |


<a name="discovery_computers_discovery" />

## Discovery Computers discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Computer [{#DISPLAY_NAME}]: Available physical memory | The total physical memory of the system, available bytes. | jenkins.computer.available_physical_memory[{#DISPLAY_NAME}] | DEPENDENT |
| Computer [{#DISPLAY_NAME}]: Available swap space | Available swap space in bytes. | jenkins.computer.available_swap_space[{#DISPLAY_NAME}] | DEPENDENT |
| Computer [{#DISPLAY_NAME}]: Clock difference | The clock difference between the master and nodes. | jenkins.computer.clock_difference[{#DISPLAY_NAME}] | DEPENDENT |
| Computer [{#DISPLAY_NAME}]: Available disk space | The available disk space of $JENKINS_HOME on agent. | jenkins.computer.disk_space[{#DISPLAY_NAME}] | DEPENDENT |
| Computer [{#DISPLAY_NAME}]: Get computer | Raw data for a computer. | jenkins.computer.get[{#DISPLAY_NAME}] | DEPENDENT |
| Computer [{#DISPLAY_NAME}]: Idle | Returns true if all the executors of this computer are idle. | jenkins.computer.idle[{#DISPLAY_NAME}] | DEPENDENT |
| Computer [{#DISPLAY_NAME}]: Executors | The maximum number of concurrent builds that Jenkins may perform on this node. | jenkins.computer.numExecutors[{#DISPLAY_NAME}] | DEPENDENT |
| Computer [{#DISPLAY_NAME}]: Offline cause reason | If the computer was offline (either temporarily or not), will return the cause as a string (without user info). Empty string if the system was put offline without given a cause. | jenkins.computer.offline.reason[{#DISPLAY_NAME}] | DEPENDENT |
| Computer [{#DISPLAY_NAME}]: Response time average | The round trip network response time from the master to the agent | jenkins.computer.response_time[{#DISPLAY_NAME}] | DEPENDENT |
| Computer [{#DISPLAY_NAME}]: State | Represents the actual online/offline state.<br>Node description: {#DESCRIPTION} | jenkins.computer.state[{#DISPLAY_NAME}] | DEPENDENT |
| Computer [{#DISPLAY_NAME}]: Temporarily offline | Returns true if this node is marked temporarily offline. | jenkins.computer.temp_offline[{#DISPLAY_NAME}] | DEPENDENT |
| Computer [{#DISPLAY_NAME}]: Available temp space | The available disk space of the temporary directory. Java tools and tests/builds often create files in the temporary directory, and may not function properly if there's no available space. | jenkins.computer.temp_space[{#DISPLAY_NAME}] | DEPENDENT |
| Computer [{#DISPLAY_NAME}]: Total physical memory | Total physical memory of the system, in bytes. | jenkins.computer.total_physical_memory[{#DISPLAY_NAME}] | DEPENDENT |
| Computer [{#DISPLAY_NAME}]: Total swap space | Total number of swap space in bytes. | jenkins.computer.total_swap_space[{#DISPLAY_NAME}] | DEPENDENT |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Computer [{#DISPLAY_NAME}]: Node is down | AVERAGE | Node down with reason: {{ITEM.LASTVALUE2}.regsub("(.*)",\1)} | last(/Jenkins by HTTP/jenkins.computer.state[{#DISPLAY_NAME}])=1 and length(last(/Jenkins by HTTP/jenkins.computer.offline.reason[{#DISPLAY_NAME}]))>0 | [{"tag": "scope", "value": "availability"}] | no url |
| Computer [{#DISPLAY_NAME}]: Node is temporarily offline | INFO | Node is temporarily Offline with reason: {{ITEM.LASTVALUE2}.regsub("(.*)",\1)} | last(/Jenkins by HTTP/jenkins.computer.temp_offline[{#DISPLAY_NAME}])=1 and length(last(/Jenkins by HTTP/jenkins.computer.offline.reason[{#DISPLAY_NAME}]))>0 | [{"tag": "scope", "value": "availability"}] | no url |


<a name="discovery_jobs_discovery" />

## Discovery Jobs discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Job [{#NAME}]: Health score | Represents health of project. A number between 0-100.<br>Job Description: {#DESCRIPTION}<br>Job Url: {#URL} | jenkins.build.health[{#NAME}] | DEPENDENT |
| Job [{#NAME}]: Get job | Raw data for a job. | jenkins.job.get[{#NAME}] | DEPENDENT |
| Job [{#NAME}]: Last Build duration | Build duration (in seconds). | jenkins.last_build.duration[{#NAME}] | DEPENDENT |
| Job [{#NAME}]: Last Build number | Details: {#URL}/lastBuild/ | jenkins.last_build.number[{#NAME}] | DEPENDENT |
| Job [{#NAME}]: Last Build result | no description | jenkins.last_build.result[{#NAME}] | DEPENDENT |
| Job [{#NAME}]: Last Build timestamp | no description | jenkins.last_build.timestamp[{#NAME}] | DEPENDENT |
| Job [{#NAME}]: Last Failed Build duration | Build duration (in seconds). | jenkins.last_failed_build.duration[{#NAME}] | DEPENDENT |
| Job [{#NAME}]: Last Failed Build number | Details: {#URL}/lastFailedBuild/ | jenkins.last_failed_build.number[{#NAME}] | DEPENDENT |
| Job [{#NAME}]: Last Failed Build timestamp | no description | jenkins.last_failed_build.timestamp[{#NAME}] | DEPENDENT |
| Job [{#NAME}]: Last Successful Build duration | Build duration (in seconds). | jenkins.last_successful_build.duration[{#NAME}] | DEPENDENT |
| Job [{#NAME}]: Last Successful Build number | Details: {#URL}/lastSuccessfulBuild/ | jenkins.last_successful_build.number[{#NAME}] | DEPENDENT |
| Job [{#NAME}]: Last Successful Build timestamp | no description | jenkins.last_successful_build.timestamp[{#NAME}] | DEPENDENT |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Job [{#NAME}]: Job is unhealthy | WARNING | no description | last(/Jenkins by HTTP/jenkins.build.health[{#NAME}])<{$JENKINS.JOB.HEALTH.SCORE.MIN.WARN} | [{"tag": "scope", "value": "performance"}] | no url |

