# Template: TiDB by HTTP

## Template ID
10398

## Description
The template to monitor TiDB server of TiDB cluster by Zabbix that works without any external scripts.
Most of the metrics are collected in one go, thanks to Zabbix bulk data collection.
Don't forget to change the macros {$TIDB.URL}, {$TIDB.PORT}.

Template `TiDB by HTTP` â€” collects metrics by HTTP agent from PD /metrics endpoint and from monitoring API.

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback

Generated by official Zabbix template tool "Templator"

## Linked Hosts
None

## Items

### Item: CPU
- **Description**: Total user and system CPU usage ratio.
- **Interval**: 0
- **Data Type**: 0

### Item: DDL waiting jobs
- **Description**: The number of TiDB operations that resolve locks per second. When TiDB's read or write request encounters a lock, it tries to resolve the lock.
- **Interval**: 0
- **Data Type**: 0

### Item: Load schema failed, rate
- **Description**: The total number of failures to reload the latest schema information in TiDB per second.
- **Interval**: 0
- **Data Type**: 0

### Item: Load schema total, rate
- **Description**: The statistics of the schemas that TiDB obtains from TiKV per second.
- **Interval**: 0
- **Data Type**: 0

### Item: Failed Query, rate
- **Description**: The number of error occurred when executing SQL statements per second (such as syntax errors and primary key conflicts).
- **Interval**: 0
- **Data Type**: 0

### Item: Get instance metrics
- **Description**: Get TiDB instance metrics.
- **Interval**: 1m
- **Data Type**: 4

### Item: Get instance status
- **Description**: Get TiDB instance status info.
- **Interval**: 1m
- **Data Type**: 4

### Item: Goroutine count
- **Description**: The number of Goroutines on TiDB instance.
- **Interval**: 0
- **Data Type**: 3

### Item: Heap memory usage
- **Description**: Number of heap bytes that are in use.
- **Interval**: 0
- **Data Type**: 0

### Item: Keep alive, rate
- **Description**: The number of times that the metrics are refreshed on TiDB instance per minute.
- **Interval**: 0
- **Data Type**: 0

### Item: Time jump back, rate
- **Description**: The number of times that the operating system rewinds every second.
- **Interval**: 0
- **Data Type**: 0

### Item: PD TSO commands, rate
- **Description**: The number of TSO commands that TiDB obtains from PD per second.
- **Interval**: 0
- **Data Type**: 0

### Item: PD TSO requests, rate
- **Description**: The number of TSO requests that TiDB obtains from PD per second.
- **Interval**: 0
- **Data Type**: 0

### Item: Open file descriptors, max
- **Description**: Maximum number of open file descriptors.
- **Interval**: 0
- **Data Type**: 0

### Item: Open file descriptors
- **Description**: Number of open file descriptors.
- **Interval**: 0
- **Data Type**: 0

### Item: RSS memory usage
- **Description**: Resident memory size in bytes.
- **Interval**: 0
- **Data Type**: 0

### Item: Total "error" server query, rate
- **Description**: The number of queries on TiDB instance per second with failure of command execution results.
- **Interval**: 0
- **Data Type**: 0

### Item: Get total server query metrics
- **Description**: Get information about server queries.
- **Interval**: 0
- **Data Type**: 4

### Item: Total "ok" server query, rate
- **Description**: The number of queries on TiDB instance per second with success of command execution results.
- **Interval**: 0
- **Data Type**: 0

### Item: Total server query, rate
- **Description**: The number of queries per second on TiDB instance.
- **Interval**: 0
- **Data Type**: 0

### Item: Schema lease "change" errors, rate
- **Description**: The number of schema lease errors per second.
"change" means that the schema has changed
- **Interval**: 0
- **Data Type**: 0

### Item: Schema lease "outdate" errors , rate
- **Description**: The number of schema lease errors per second.
"outdate" errors means that the schema cannot be updated, which is a more serious error and triggers an alert.
- **Interval**: 0
- **Data Type**: 0

### Item: Get SQL statements metrics
- **Description**: Get SQL statements metrics.
- **Interval**: 0
- **Data Type**: 4

### Item: SQL statements, rate
- **Description**: The total number of SQL statements executed per second.
- **Interval**: 0
- **Data Type**: 0

### Item: Status
- **Description**: Status of PD instance.
- **Interval**: 0
- **Data Type**: 1

### Item: Server connections
- **Description**: The connection number of current TiDB instance.
- **Interval**: 0
- **Data Type**: 3

### Item: Server critical error, rate
- **Description**: The number of critical errors occurred in TiDB per second.
- **Interval**: 0
- **Data Type**: 0

### Item: Server panic, rate
- **Description**: The number of panics occurred in TiDB per second.
- **Interval**: 0
- **Data Type**: 0

### Item: KV backoff, rate
- **Description**: The number of errors returned by TiKV.
- **Interval**: 0
- **Data Type**: 0

### Item: Get TiKV client metrics
- **Description**: Get TiKV client metrics.
- **Interval**: 0
- **Data Type**: 4

### Item: Lock resolves, rate
- **Description**: The number of DDL tasks that are waiting.
- **Interval**: 0
- **Data Type**: 0

### Item: TiClient region errors, rate
- **Description**: The number of region related errors returned by TiKV per second.
- **Interval**: 0
- **Data Type**: 0

### Item: KV commands, rate
- **Description**: The number of executed KV commands per second.
- **Interval**: 0
- **Data Type**: 0

### Item: Uptime
- **Description**: The runtime of each TiDB instance.
- **Interval**: 0
- **Data Type**: 0

### Item: Version
- **Description**: Version of the TiDB instance.
- **Interval**: 0
- **Data Type**: 1

