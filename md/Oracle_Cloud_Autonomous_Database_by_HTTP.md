# Oracle Cloud Autonomous Database by HTTP template description

This template monitors Oracle Cloud Infrastructure (OCI) autonomous database (serverless) resources.

This template is not meant to be used independently, but together with Oracle Cloud by HTTP as a template for
LLD host prototypes.

Read the template documentation prior to using this template.

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback

Generated by official Zabbix template tool "Templator"

## Summary
* [items](#items)
* [macros](#macros)
* [triggers](#triggers)

<a name="items"></a>

## Items
| name | description | key | type | delay |
| ------------- |------------- |------------- |------------- |------------- |
| Database availability | The database is available for connections in the given minute. | oci.aut.db.availability | DEPENDENT | 0 |
| DB block changes | The number of changes that were part of an update or delete operation that were made to all blocks in the SGA.<br>Such changes generate redo log entries and thus become permanent changes to the database if the transaction is committed.<br>This statistic approximates total database work and indicates the rate at which buffers are being dirtied during the selected time interval. | oci.aut.db.block.changes | DEPENDENT | 0 |
| Failed connections | The number of failed database connections. | oci.aut.db.conn.failed | DEPENDENT | 0 |
| CPU time | Average rate of accumulation of CPU time by foreground sessions in the database over the selected time interval. | oci.aut.db.cpu.time | DEPENDENT | 0 |
| CPU utilization, in % | The CPU usage expressed as a percentage, aggregated across all consumer groups. The utilization percentage is reported with respect to the number of CPUs the database is allowed to use. | oci.aut.db.cpu.util | DEPENDENT | 0 |
| Execute count | The number of user and recursive calls that executed SQL statements during the selected time interval. | oci.aut.db.exec.count | DEPENDENT | 0 |
| Connection latency | The time taken to connect to an Oracle Autonomous Database Serverless instance in each region from a Compute service virtual machine in the same region. | oci.aut.db.latency.conn | DEPENDENT | 0 |
| Query latency | The time taken to display the results of a simple query on the user's screen. | oci.aut.db.latency.query | DEPENDENT | 0 |
| Session logical reads | The sum of `db block gets` and `consistent gets` during the selected time interval. This includes logical reads of database blocks from either the buffer cache or process private memory. | oci.aut.db.logical.reads.session | DEPENDENT | 0 |
| Current logons | The number of successful logons during the selected time interval. | oci.aut.db.logons | DEPENDENT | 0 |
| Failed logons | The number of logons that failed because of an invalid user name and/or password during the selected time interval. | oci.aut.db.logons.failed | DEPENDENT | 0 |
| Get frequent metrics | Gets all metrics related to the database that have a collection frequency of 1 minute. | oci.aut.db.metrics.frequent.get | SCRIPT | no delay |
| Get database stats | Gets all metrics related to specific database that have a collection frequency of 5 minutes. | oci.aut.db.metrics.stats | SCRIPT | 5m |
| Get storage stats | Gets all storage metrics related to a specific database that have a collection frequency of 60 minutes. | oci.aut.db.metrics.storage.stats | SCRIPT | 60m |
| Parse count (failures) | The number of parse failures during the selected time interval. | oci.aut.db.parse.count.failed | DEPENDENT | 0 |
| Parse count (hard) | The number of parse calls (real parses) during the selected time interval. A hard parse is an expensive operation in terms of memory use as it requires Oracle to allocate a workheap and other memory structures and then build a parse tree. | oci.aut.db.parse.count.hard | DEPENDENT | 0 |
| Parse count (total) | The number of hard and soft parses during the selected time interval. | oci.aut.db.parse.count.total | DEPENDENT | 0 |
| Physical read total bytes | The size in bytes of disk reads by all database instance activity including application reads, backup and recovery, and other utilities during the selected time interval. | oci.aut.db.physical.read.bytes | DEPENDENT | 0 |
| Physical reads | The number of data blocks read from disk during the selected time interval. | oci.aut.db.physical.reads | DEPENDENT | 0 |
| Physical write total bytes | The size in bytes of all disk writes for the database instance including application activity, backup and recovery, and other utilities during the selected time interval. | oci.aut.db.physical.write.bytes | DEPENDENT | 0 |
| Physical writes | The number of data blocks written to disk during the selected time interval. | oci.aut.db.physical.writes | DEPENDENT | 0 |
| Queued statements | The number of queued SQL statements aggregated across all consumer groups during the selected time interval. | oci.aut.db.queued.statements | DEPENDENT | 0 |
| Redo generated | Amount of redo generated in bytes during the selected time interval. | oci.aut.db.redo.gen | DEPENDENT | 0 |
| Sessions | The number of sessions in the database. | oci.aut.db.sessions | DEPENDENT | 0 |
| Bytes received via SQL*Net from client | The number of bytes received from the client over Oracle Net Services during the selected time interval. | oci.aut.db.sqlnet.bytes.recv.client | DEPENDENT | 0 |
| Bytes received via SQL*Net from DBLink | The number of bytes received from a database link over Oracle Net Services during the selected time interval. | oci.aut.db.sqlnet.bytes.recv.dblink | DEPENDENT | 0 |
| Bytes sent via SQL*Net to client | The number of bytes sent to the client from the foreground processes during the selected time interval. | oci.aut.db.sqlnet.bytes.sent.client | DEPENDENT | 0 |
| Bytes sent via SQL*Net to DBLink | The number of bytes sent over a database link during the selected time interval. | oci.aut.db.sqlnet.bytes.sent.dblink | DEPENDENT | 0 |
| State | Gets the autonomous database state. | oci.aut.db.state | SCRIPT | no delay |
| Running statements | The number of running SQL statements aggregated across all consumer groups during the selected time interval. | oci.aut.db.statements.running | DEPENDENT | 0 |
| Storage space allocated | Amount of space allocated to the database for all tablespaces during the selected time interval. | oci.aut.db.storage.space.alloc | DEPENDENT | 0 |
| Maximum storage space | Maximum amount of storage reserved for the database during the selected time interval. | oci.aut.db.storage.space.max | DEPENDENT | 0 |
| Storage space used | Maximum amount of space used during the selected time interval. | oci.aut.db.storage.space.used | DEPENDENT | 0 |
| Storage utilization, in % | The percentage of the reserved maximum storage currently allocated for all database tablespaces. Represents the total reserved space for all tablespaces. | oci.aut.db.storage.space.util | DEPENDENT | 0 |
| DB time | The amount of time database user sessions spend executing database code (CPU time + wait time). Database time is used to infer database call latency as it increases in direct proportion to both database call latency (response time) and call volume.<br>It is calculated as the average rate of accumulation of database time by foreground sessions in the database over the selected time interval. | oci.aut.db.time | DEPENDENT | 0 |
| Transaction count | The combined number of user commits and user rollbacks during the selected time interval. | oci.aut.db.transaction.count | DEPENDENT | 0 |
| User calls | The combined number of logons, parses, and execute calls during the selected time interval. | oci.aut.db.user.calls | DEPENDENT | 0 |
| User commits | The number of user commits during the selected time interval. When a user commits a transaction, the generated redo that reflects the changes made to database blocks must be written to disk. Commits often represent the closest thing to a user transaction rate. | oci.aut.db.user.commits | DEPENDENT | 0 |
| User rollbacks | Number of times users manually issue the `ROLLBACK` statement or an error occurs during a user's transactions during the selected time interval. | oci.aut.db.user.rollbacks | DEPENDENT | 0 |
| Wait time | Average rate of accumulation of non-idle wait time by foreground sessions in the database over the selected time interval. | oci.aut.db.wait.time | DEPENDENT | 0 |


<a name="macros"></a>

## Macros
| macro | value |
| ------------- |------------- |
| {$OCI.AUTONOMOUS.DB.CPU.UTIL.HIGH} | 90 |
| {$OCI.AUTONOMOUS.DB.CPU.UTIL.WARN} | 75 |
| {$OCI.AUTONOMOUS.DB.STORAGE.UTIL.HIGH} | 90 |
| {$OCI.AUTONOMOUS.DB.STORAGE.UTIL.WARN} | 75 |
| {$OCI.HTTP.PROXY} | no value |
| {$OCI.HTTP.RETURN.CODE.OK} | 200 |


<a name="triggers"></a>

## Triggers
| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Database is not available | HIGH | Autonomous database is not available. | last(/Oracle Cloud Autonomous Database by HTTP/oci.aut.db.availability) = 0 | [{"tag": "scope", "value": "availability"}] | no url |
| Current CPU utilization is high | WARNING | Current CPU utilization has exceeded `{$OCI.AUTONOMOUS.DB.CPU.UTIL.WARN}`% of the max available value. | min(/Oracle Cloud Autonomous Database by HTTP/oci.aut.db.cpu.util,5m) >= {$OCI.AUTONOMOUS.DB.CPU.UTIL.WARN} | [{"tag": "scope", "value": "capacity"}] | no url |
| Current CPU utilization is too high | HIGH | Current CPU utilization has exceeded `{$OCI.AUTONOMOUS.DB.CPU.UTIL.HIGH}`% of the max available value. | min(/Oracle Cloud Autonomous Database by HTTP/oci.aut.db.cpu.util,5m) >= {$OCI.AUTONOMOUS.DB.CPU.UTIL.HIGH} | [{"tag": "scope", "value": "capacity"}] | no url |
| Available, needs attention | WARNING | Autonomous database is available, but needs attention. | last(/Oracle Cloud Autonomous Database by HTTP/oci.aut.db.state) = 12 | [{"tag": "scope", "value": "availability"}] | no url |
| Database is not available or accessible | HIGH | Autonomous database is not available or accessible. | last(/Oracle Cloud Autonomous Database by HTTP/oci.aut.db.state) = 19 or last(/Oracle Cloud Autonomous Database by HTTP/oci.aut.db.state) = 20 | [{"tag": "scope", "value": "availability"}] | no url |
| Restore has failed | WARNING | Autonomous database restore has failed. | last(/Oracle Cloud Autonomous Database by HTTP/oci.aut.db.state) = 9 | [{"tag": "scope", "value": "notice"}] | no url |
| State has changed | INFO | Autonomous database state has changed. | last(/Oracle Cloud Autonomous Database by HTTP/oci.aut.db.state,#1)<>last(/Oracle Cloud Autonomous Database by HTTP/oci.aut.db.state,#2) | [{"tag": "scope", "value": "notice"}] | no url |
| State unknown | WARNING | Autonomous database state is unknown. | last(/Oracle Cloud Autonomous Database by HTTP/oci.aut.db.state) = 0 | [{"tag": "scope", "value": "availability"}] | no url |
| Current storage utilization is high | WARNING | Current storage utilization has exceeded `{$OCI.AUTONOMOUS.DB.STORAGE.UTIL.WARN}`% of the max available value. | min(/Oracle Cloud Autonomous Database by HTTP/oci.aut.db.storage.space.util,5m) >= {$OCI.AUTONOMOUS.DB.STORAGE.UTIL.WARN} | [{"tag": "scope", "value": "capacity"}] | no url |
| Current storage utilization is too high | HIGH | Current storage utilization has exceeded `{$OCI.AUTONOMOUS.DB.STORAGE.UTIL.HIGH}`% of the max available value. | min(/Oracle Cloud Autonomous Database by HTTP/oci.aut.db.storage.space.util,5m) >= {$OCI.AUTONOMOUS.DB.STORAGE.UTIL.HIGH} | [{"tag": "scope", "value": "capacity"}] | no url |

