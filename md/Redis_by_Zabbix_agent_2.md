# Redis by Zabbix agent 2 template description

Get Redis metrics from plugin for the New Zabbix Agent (zabbix-agent2).

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/389050-discussion-thread-for-official-zabbix-template-redis

Generated by official Zabbix template tool "Templator"

## Summary
* [items](#items)
* [macros](#macros)
* [triggers](#triggers)
* [discoveries](#discoveries)
  * [Discovery Process metrics discovery ](#discovery_process_metrics_discovery)
  * [Discovery Keyspace discovery ](#discovery_keyspace_discovery)
  * [Discovery Version 4+ metrics discovery ](#discovery_version_4+_metrics_discovery)
  * [Discovery Version 5+ metrics discovery ](#discovery_version_5+_metrics_discovery)
  * [Discovery AOF metrics discovery ](#discovery_aof_metrics_discovery)
  * [Discovery Replication metrics discovery ](#discovery_replication_metrics_discovery)
  * [Discovery Slave metrics discovery ](#discovery_slave_metrics_discovery)

<a name="items"></a>

## Items
| name | description | key | type | delay |
| ------------- |------------- |------------- |------------- |------------- |
| Blocked clients | The number of connections waiting on a blocking call | redis.clients.blocked | DEPENDENT | 0 |
| Connected clients | The number of connected clients | redis.clients.connected | DEPENDENT | 0 |
| Get Clients info | no description | redis.clients.info_raw | DEPENDENT | 0 |
| Max input buffer | The biggest input buffer among current client connections | redis.clients.max_input_buffer | DEPENDENT | 0 |
| Max output buffer | The biggest output buffer among current client connections | redis.clients.max_output_buffer | DEPENDENT | 0 |
| Cluster enabled | Indicate Redis cluster is enabled | redis.cluster.enabled | DEPENDENT | 0 |
| Max clients | Max number of connected clients at the same time.<br>Once the limit is reached Redis will close all the new connections sending an error "max number of clients reached". | redis.config.maxclients | DEPENDENT | 0 |
| Get config | no description | redis.config["{$REDIS.CONN.URI}"] | no type | no delay |
| Get CPU info | no description | redis.cpu.info_raw | DEPENDENT | 0 |
| CPU sys | System CPU consumed by the Redis server | redis.cpu.sys | DEPENDENT | 0 |
| CPU sys children | System CPU consumed by the background processes | redis.cpu.sys_children | DEPENDENT | 0 |
| CPU user | User CPU consumed by the Redis server | redis.cpu.user | DEPENDENT | 0 |
| CPU user children | User CPU consumed by the background processes | redis.cpu.user_children | DEPENDENT | 0 |
| Get info | no description | redis.info["{$REDIS.CONN.URI}"] | no type | no delay |
| Get Keyspace info | no description | redis.keyspace.info_raw | DEPENDENT | 0 |
| Memory fragmentation ratio | This ratio is an indication of memory mapping efficiency:<br>  - Value over 1.0 indicate that memory fragmentation is very likely. Consider restarting the Redis server so the operating system can recover fragmented memory, especially with a ratio over 1.5.<br>  - Value under 1.0 indicate that Redis likely has insufficient memory available. Consider optimizing memory usage or adding more RAM.<br><br>Note: If your peak memory usage is much higher than your current memory usage, the memory fragmentation ratio may be unreliable.<br><br>https://redis.io/topics/memory-optimization | redis.memory.fragmentation_ratio | DEPENDENT | 0 |
| Get Memory info | no description | redis.memory.info_raw | DEPENDENT | 0 |
| Memory used | Total number of bytes allocated by Redis using its allocator | redis.memory.used_memory | DEPENDENT | 0 |
| Memory used Lua | Amount of memory used by the Lua engine | redis.memory.used_memory_lua | DEPENDENT | 0 |
| Memory used peak | Peak memory consumed by Redis (in bytes) | redis.memory.used_memory_peak | DEPENDENT | 0 |
| Memory used RSS | Number of bytes that Redis allocated as seen by the operating system | redis.memory.used_memory_rss | DEPENDENT | 0 |
| AOF current rewrite time sec | Duration of the on-going AOF rewrite operation if any | redis.persistence.aof_current_rewrite_time_sec | DEPENDENT | 0 |
| AOF enabled | Flag indicating AOF logging is activated | redis.persistence.aof_enabled | DEPENDENT | 0 |
| AOF last bgrewrite status | Status of the last AOF rewrite operation | redis.persistence.aof_last_bgrewrite_status | DEPENDENT | 0 |
| AOF last rewrite time sec | Duration of the last AOF rewrite | redis.persistence.aof_last_rewrite_time_sec | DEPENDENT | 0 |
| AOF last write status | Status of the last write operation to the AOF | redis.persistence.aof_last_write_status | DEPENDENT | 0 |
| AOF rewrite in progress | Flag indicating an AOF rewrite operation is on-going | redis.persistence.aof_rewrite_in_progress | DEPENDENT | 0 |
| AOF rewrite scheduled | Flag indicating an AOF rewrite operation will be scheduled once the on-going RDB save is complete | redis.persistence.aof_rewrite_scheduled | DEPENDENT | 0 |
| Get Persistence info | no description | redis.persistence.info_raw | DEPENDENT | 0 |
| Dump loading | Flag indicating if the load of a dump file is on-going | redis.persistence.loading | DEPENDENT | 0 |
| RDB bgsave in progress | "1" if bgsave is in progress and "0" otherwise | redis.persistence.rdb_bgsave_in_progress | DEPENDENT | 0 |
| RDB changes since last save | Number of changes since the last background save | redis.persistence.rdb_changes_since_last_save | DEPENDENT | 0 |
| RDB current bgsave time sec | Duration of the on-going RDB save operation if any | redis.persistence.rdb_current_bgsave_time_sec | DEPENDENT | 0 |
| RDB last bgsave status | Status of the last RDB save operation | redis.persistence.rdb_last_bgsave_status | DEPENDENT | 0 |
| RDB last bgsave time sec | Duration of the last bg_save operation | redis.persistence.rdb_last_bgsave_time_sec | DEPENDENT | 0 |
| RDB last save time | Epoch-based timestamp of last successful RDB save | redis.persistence.rdb_last_save_time | DEPENDENT | 0 |
| Ping | no description | redis.ping["{$REDIS.CONN.URI}"] | no type | no delay |
| Connected slaves | Number of connected slaves | redis.replication.connected_slaves | DEPENDENT | 0 |
| Get Replication info | no description | redis.replication.info_raw | DEPENDENT | 0 |
| Master replication offset | Replication offset reported by the master | redis.replication.master_repl_offset | DEPENDENT | 0 |
| Replication backlog active | Flag indicating replication backlog is active | redis.replication.repl_backlog_active | DEPENDENT | 0 |
| Replication backlog first byte offset | The master offset of the replication backlog buffer | redis.replication.repl_backlog_first_byte_offset | DEPENDENT | 0 |
| Replication backlog history length | Amount of data in the backlog sync buffer | redis.replication.repl_backlog_histlen | DEPENDENT | 0 |
| Replication backlog size | Total size in bytes of the replication backlog buffer | redis.replication.repl_backlog_size | DEPENDENT | 0 |
| Replication role | Value is "master" if the instance is replica of no one, or "slave" if the instance is a replica of some master instance. Note that a replica can be master of another replica (chained replication). | redis.replication.role | DEPENDENT | 0 |
| Get Server info | no description | redis.server.info_raw | DEPENDENT | 0 |
| Process id | PID of the server process | redis.server.process_id | DEPENDENT | 0 |
| Redis mode | The server's mode ("standalone", "sentinel" or "cluster") | redis.server.redis_mode | DEPENDENT | 0 |
| Redis version | Version of the Redis server | redis.server.redis_version | DEPENDENT | 0 |
| TCP port | TCP/IP listen port | redis.server.tcp_port | DEPENDENT | 0 |
| Uptime | Number of seconds since Redis server start | redis.server.uptime | DEPENDENT | 0 |
| Slowlog entries per second | no description | redis.slowlog.count["{$REDIS.CONN.URI}"] | no type | no delay |
| Evicted keys | Number of evicted keys due to maxmemory limit | redis.stats.evicted_keys | DEPENDENT | 0 |
| Expired keys | Total number of key expiration events | redis.stats.expired_keys | DEPENDENT | 0 |
| Get Stats info | no description | redis.stats.info_raw | DEPENDENT | 0 |
| Instantaneous input bytes per second | The network's read rate per second in KB/sec | redis.stats.instantaneous_input.rate | DEPENDENT | 0 |
| Instantaneous operations per sec | Number of commands processed per second | redis.stats.instantaneous_ops.rate | DEPENDENT | 0 |
| Instantaneous output bytes per second | The network's write rate per second in KB/sec | redis.stats.instantaneous_output.rate | DEPENDENT | 0 |
| Keyspace hits | Number of successful lookup of keys in the main dictionary | redis.stats.keyspace_hits | DEPENDENT | 0 |
| Keyspace misses | Number of failed lookup of keys in the main dictionary | redis.stats.keyspace_misses | DEPENDENT | 0 |
| Latest fork usec | Duration of the latest fork operation in microseconds | redis.stats.latest_fork_usec | DEPENDENT | 0 |
| Migrate cached sockets | The number of sockets open for MIGRATE purposes | redis.stats.migrate_cached_sockets | DEPENDENT | 0 |
| Pubsub channels | Global number of pub/sub channels with client subscriptions | redis.stats.pubsub_channels | DEPENDENT | 0 |
| Pubsub patterns | Global number of pub/sub pattern with client subscriptions | redis.stats.pubsub_patterns | DEPENDENT | 0 |
| Rejected connections | Number of connections rejected because of maxclients limit | redis.stats.rejected_connections | DEPENDENT | 0 |
| Sync full | The number of full resyncs with replicas | redis.stats.sync_full | DEPENDENT | 0 |
| Sync partial err | The number of denied partial resync requests | redis.stats.sync_partial_err | DEPENDENT | 0 |
| Sync partial ok | The number of accepted partial resync requests | redis.stats.sync_partial_ok | DEPENDENT | 0 |
| Total commands processed | Total number of commands processed by the server | redis.stats.total_commands_processed | DEPENDENT | 0 |
| Total connections received | Total number of connections accepted by the server | redis.stats.total_connections_received | DEPENDENT | 0 |
| Total net input bytes | The total number of bytes read from the network | redis.stats.total_net_input_bytes | DEPENDENT | 0 |
| Total net output bytes | The total number of bytes written to the network | redis.stats.total_net_output_bytes | DEPENDENT | 0 |


<a name="macros"></a>

## Macros
| macro | value |
| ------------- |------------- |
| {$REDIS.CLIENTS.PRC.MAX.WARN} | 80 |
| {$REDIS.CONN.URI} | tcp://localhost:6379 |
| {$REDIS.LLD.FILTER.DB.MATCHES} | .* |
| {$REDIS.LLD.FILTER.DB.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$REDIS.LLD.PROCESS_NAME} | redis-server |
| {$REDIS.MEM.FRAG_RATIO.MAX.WARN} | 1.5 |
| {$REDIS.MEM.PUSED.MAX.WARN} | 90 |
| {$REDIS.PROCESS_NAME} | redis-server |
| {$REDIS.REPL.LAG.MAX.WARN} | 30s |
| {$REDIS.SLOWLOG.COUNT.MAX.WARN} | 1 |


<a name="triggers"></a>

## Triggers
| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Configuration has changed | INFO | Redis configuration has changed. Acknowledge to close the problem manually. | last(/Redis by Zabbix agent 2/redis.config["{$REDIS.CONN.URI}"],#1)<>last(/Redis by Zabbix agent 2/redis.config["{$REDIS.CONN.URI}"],#2) and length(last(/Redis by Zabbix agent 2/redis.config["{$REDIS.CONN.URI}"]))>0 | [{"tag": "scope", "value": "notice"}] | no url |
| Failed to fetch info data | WARNING | Zabbix has not received any data for items for the last 30 minutes. | nodata(/Redis by Zabbix agent 2/redis.info["{$REDIS.CONN.URI}"],30m)=1 | [{"tag": "scope", "value": "availability"}] | no url |
| Memory fragmentation ratio is too high | WARNING | This ratio is an indication of memory mapping efficiency:<br>  - Value over 1.0 indicate that memory fragmentation is very likely. Consider restarting the Redis server so the operating system can recover fragmented memory, especially with a ratio over 1.5.<br>  - Value under 1.0 indicate that Redis likely has insufficient memory available. Consider optimizing memory usage or adding more RAM.<br><br>Note: If your peak memory usage is much higher than your current memory usage, the memory fragmentation ratio may be unreliable.<br><br>https://redis.io/topics/memory-optimization | min(/Redis by Zabbix agent 2/redis.memory.fragmentation_ratio,15m)>{$REDIS.MEM.FRAG_RATIO.MAX.WARN} | [{"tag": "scope", "value": "performance"}] | no url |
| Last AOF write operation failed | WARNING | Detailed information about persistence: https://redis.io/topics/persistence | last(/Redis by Zabbix agent 2/redis.persistence.aof_last_write_status)=0 | [{"tag": "scope", "value": "notice"}] | no url |
| Last RDB save operation failed | WARNING | Detailed information about persistence: https://redis.io/topics/persistence | last(/Redis by Zabbix agent 2/redis.persistence.rdb_last_bgsave_status)=0 | [{"tag": "scope", "value": "notice"}] | no url |
| Service is down | AVERAGE | no description | last(/Redis by Zabbix agent 2/redis.ping["{$REDIS.CONN.URI}"])=0 | [{"tag": "scope", "value": "availability"}] | no url |
| Number of slaves has changed | INFO | Redis number of slaves has changed. Acknowledge to close the problem manually. | last(/Redis by Zabbix agent 2/redis.replication.connected_slaves,#1)<>last(/Redis by Zabbix agent 2/redis.replication.connected_slaves,#2) | [{"tag": "scope", "value": "notice"}] | no url |
| Replication role has changed | WARNING | Redis replication role has changed. Acknowledge to close the problem manually. | last(/Redis by Zabbix agent 2/redis.replication.role,#1)<>last(/Redis by Zabbix agent 2/redis.replication.role,#2) and length(last(/Redis by Zabbix agent 2/redis.replication.role))>0 | [{"tag": "scope", "value": "notice"}] | no url |
| Version has changed | INFO | The Redis version has changed. Acknowledge to close the problem manually. | last(/Redis by Zabbix agent 2/redis.server.redis_version,#1)<>last(/Redis by Zabbix agent 2/redis.server.redis_version,#2) and length(last(/Redis by Zabbix agent 2/redis.server.redis_version))>0 | [{"tag": "scope", "value": "notice"}] | no url |
| Host has been restarted | INFO | The host uptime is less than 10 minutes. | last(/Redis by Zabbix agent 2/redis.server.uptime)<10m | [{"tag": "scope", "value": "notice"}] | no url |
| Too many entries in the slowlog | INFO | no description | min(/Redis by Zabbix agent 2/redis.slowlog.count["{$REDIS.CONN.URI}"],5m)>{$REDIS.SLOWLOG.COUNT.MAX.WARN} | [{"tag": "scope", "value": "performance"}] | no url |
| Connections are rejected | HIGH | The number of connections has reached the value of "maxclients".<br><br>https://redis.io/topics/clients | last(/Redis by Zabbix agent 2/redis.stats.rejected_connections)>0 | [{"tag": "scope", "value": "availability"}] | no url |
| Total number of connected clients is too high | WARNING | When the number of clients reaches the value of the "maxclients" parameter, new connections will be rejected.<br><br>https://redis.io/topics/clients#maximum-number-of-clients | min(/Redis by Zabbix agent 2/redis.clients.connected,5m)/last(/Redis by Zabbix agent 2/redis.config.maxclients)*100>{$REDIS.CLIENTS.PRC.MAX.WARN} | [{"tag": "scope", "value": "performance"}] | no url |


<a name="discoveries"></a>

## Discoveries
| name | key | description | type | lifetime | delay |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Process metrics discovery | proc.num["{$REDIS.LLD.PROCESS_NAME}"] | Collect metrics by Zabbix agent if it exists | no type | no lifetime | 1h |
| Keyspace discovery | redis.keyspace.discovery | Individual keyspace metrics | DEPENDENT | no lifetime | 0 |
| Version 4+ metrics discovery | redis.metrics.v4.discovery | Additional metrics for versions 4+ | DEPENDENT | no lifetime | 0 |
| Version 5+ metrics discovery | redis.metrics.v5.discovery | Additional metrics for versions 5+ | DEPENDENT | no lifetime | 0 |
| AOF metrics discovery | redis.persistence.aof.discovery | If AOF is activated, additional metrics will be added | DEPENDENT | no lifetime | 0 |
| Replication metrics discovery | redis.replication.master.discovery | If the instance is the master and the slaves are connected, additional metrics are provided | DEPENDENT | no lifetime | 0 |
| Slave metrics discovery | redis.replication.slave.discovery | If the instance is a replica, additional metrics are provided | DEPENDENT | no lifetime | 0 |


<a name="discovery_process_metrics_discovery" />

## Discovery Process metrics discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| CPU utilization | Process CPU utilization percentage. | proc.cpu.util["{$REDIS.PROCESS_NAME}{#SINGLETON}"] | no type |
| Memory usage (rss) | Resident set size memory used by process in bytes. | proc.mem["{$REDIS.PROCESS_NAME}{#SINGLETON}",,,,rss] | no type |
| Memory usage (vsize) | Virtual memory size used by process in bytes. | proc.mem["{$REDIS.PROCESS_NAME}{#SINGLETON}",,,,vsize] | no type |
| Number of running processes | no description | proc.num["{$REDIS.PROCESS_NAME}{#SINGLETON}"] | no type |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Process is not running | HIGH | no description | last(/Redis by Zabbix agent 2/proc.num["{$REDIS.PROCESS_NAME}{#SINGLETON}"])=0 | [{"tag": "scope", "value": "availability"}] | no url |


<a name="discovery_keyspace_discovery" />

## Discovery Keyspace discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| DB {#DB}: Average TTL | Average TTL | redis.db.avg_ttl["{#DB}"] | DEPENDENT |
| DB {#DB}: Expires | Number of keys with an expiration | redis.db.expires["{#DB}"] | DEPENDENT |
| DB {#DB}: Get Keyspace info | The item gets information about keyspace of {#DB} database. | redis.db.info_raw["{#DB}"] | DEPENDENT |
| DB {#DB}: Keys | Total number of keys | redis.db.keys["{#DB}"] | DEPENDENT |


<a name="discovery_version_4+_metrics_discovery" />

## Discovery Version 4+ metrics discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Active defrag running{#SINGLETON} | Flag indicating if active defragmentation is active | redis.memory.active_defrag_running[{#SINGLETON}] | DEPENDENT |
| Lazyfree pending objects{#SINGLETON} | The number of objects waiting to be freed (as a result of calling UNLINK, or FLUSHDB and FLUSHALL with the ASYNC option) | redis.memory.lazyfree_pending_objects[{#SINGLETON}] | DEPENDENT |
| Max memory{#SINGLETON} | Maximum amount of memory allocated to the Redisdb system | redis.memory.maxmemory[{#SINGLETON}] | DEPENDENT |
| Max memory policy{#SINGLETON} | The value of the maxmemory-policy configuration directive | redis.memory.maxmemory_policy[{#SINGLETON}] | DEPENDENT |
| Total system memory{#SINGLETON} | The total amount of memory that the Redis host has | redis.memory.total_system_memory[{#SINGLETON}] | DEPENDENT |
| Memory used dataset{#SINGLETON} | The size in bytes of the dataset | redis.memory.used_memory_dataset[{#SINGLETON}] | DEPENDENT |
| Memory used dataset %{#SINGLETON} | The percentage of used_memory_dataset out of the net memory usage (used_memory minus used_memory_startup) | redis.memory.used_memory_dataset_perc[{#SINGLETON}] | DEPENDENT |
| Memory used overhead{#SINGLETON} | The sum in bytes of all overheads that the server allocated for managing its internal data structures | redis.memory.used_memory_overhead[{#SINGLETON}] | DEPENDENT |
| Memory used peak %{#SINGLETON} | The percentage of used_memory_peak out of used_memory | redis.memory.used_memory_peak_perc[{#SINGLETON}] | DEPENDENT |
| Memory used startup{#SINGLETON} | Initial amount of memory consumed by Redis at startup in bytes | redis.memory.used_memory_startup[{#SINGLETON}] | DEPENDENT |
| AOF last CoW size{#SINGLETON} | The size in bytes of copy-on-write allocations during the last AOF rewrite operation | redis.persistence.aof_last_cow_size[{#SINGLETON}] | DEPENDENT |
| RDB last CoW size{#SINGLETON} | The size in bytes of copy-on-write allocations during the last RDB save operation | redis.persistence.rdb_last_cow_size[{#SINGLETON}] | DEPENDENT |
| Replication second offset{#SINGLETON} | Offset up to which replication IDs are accepted | redis.replication.second_repl_offset[{#SINGLETON}] | DEPENDENT |
| Executable path{#SINGLETON} | The path to the server's executable | redis.server.executable[{#SINGLETON}] | DEPENDENT |
| Active defrag hits{#SINGLETON} | Number of value reallocations performed by active the defragmentation process | redis.stats.active_defrag_hits[{#SINGLETON}] | DEPENDENT |
| Active defrag key hits{#SINGLETON} | Number of keys that were actively defragmented | redis.stats.active_defrag_key_hits[{#SINGLETON}] | DEPENDENT |
| Active defrag key misses{#SINGLETON} | Number of keys that were skipped by the active defragmentation process | redis.stats.active_defrag_key_misses[{#SINGLETON}] | DEPENDENT |
| Active defrag misses{#SINGLETON} | Number of aborted value reallocations started by the active defragmentation process | redis.stats.active_defrag_misses[{#SINGLETON}] | DEPENDENT |
| Expired stale %{#SINGLETON} | no description | redis.stats.expired_stale_perc[{#SINGLETON}] | DEPENDENT |
| Expired time cap reached count{#SINGLETON} | no description | redis.stats.expired_time_cap_reached_count[{#SINGLETON}] | DEPENDENT |
| Slave expires tracked keys{#SINGLETON} | The number of keys tracked for expiry purposes (applicable only to writable replicas) | redis.stats.slave_expires_tracked_keys[{#SINGLETON}] | DEPENDENT |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Memory usage is too high | WARNING | no description | last(/Redis by Zabbix agent 2/redis.memory.used_memory)/min(/Redis by Zabbix agent 2/redis.memory.maxmemory[{#SINGLETON}],5m)*100>{$REDIS.MEM.PUSED.MAX.WARN} | [{"tag": "scope", "value": "capacity"}, {"tag": "scope", "value": "performance"}] | no url |


<a name="discovery_version_5+_metrics_discovery" />

## Discovery Version 5+ metrics discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Allocator active{#SINGLETON} | no description | redis.memory.allocator_active[{#SINGLETON}] | DEPENDENT |
| Allocator allocated{#SINGLETON} | no description | redis.memory.allocator_allocated[{#SINGLETON}] | DEPENDENT |
| Allocator fragmentation bytes{#SINGLETON} | no description | redis.memory.allocator_frag_bytes[{#SINGLETON}] | DEPENDENT |
| Allocator fragmentation ratio{#SINGLETON} | no description | redis.memory.allocator_frag_ratio[{#SINGLETON}] | DEPENDENT |
| Allocator resident{#SINGLETON} | no description | redis.memory.allocator_resident[{#SINGLETON}] | DEPENDENT |
| Allocator RSS bytes{#SINGLETON} | no description | redis.memory.allocator_rss_bytes[{#SINGLETON}] | DEPENDENT |
| Allocator RSS ratio{#SINGLETON} | no description | redis.memory.allocator_rss_ratio[{#SINGLETON}] | DEPENDENT |
| Memory fragmentation bytes{#SINGLETON} | no description | redis.memory.fragmentation_bytes[{#SINGLETON}] | DEPENDENT |
| Memory AOF buffer{#SINGLETON} | Size of the AOF buffer | redis.memory.mem_aof_buffer[{#SINGLETON}] | DEPENDENT |
| Memory clients normal{#SINGLETON} | no description | redis.memory.mem_clients_normal[{#SINGLETON}] | DEPENDENT |
| Memory clients slaves{#SINGLETON} | no description | redis.memory.mem_clients_slaves[{#SINGLETON}] | DEPENDENT |
| Memory not counted for evict{#SINGLETON} | no description | redis.memory.not_counted_for_evict[{#SINGLETON}] | DEPENDENT |
| Memory number of cached scripts{#SINGLETON} | no description | redis.memory.number_of_cached_scripts[{#SINGLETON}] | DEPENDENT |
| Memory replication backlog{#SINGLETON} | no description | redis.memory.replication_backlog[{#SINGLETON}] | DEPENDENT |
| Memory RSS overhead bytes{#SINGLETON} | no description | redis.memory.rss_overhead_bytes[{#SINGLETON}] | DEPENDENT |
| Memory RSS overhead ratio{#SINGLETON} | no description | redis.memory.rss_overhead_ratio[{#SINGLETON}] | DEPENDENT |
| Memory used scripts{#SINGLETON} | no description | redis.memory.used_memory_scripts[{#SINGLETON}] | DEPENDENT |


<a name="discovery_aof_metrics_discovery" />

## Discovery AOF metrics discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| AOF base size{#SINGLETON} | AOF file size on latest startup or rewrite | redis.persistence.aof_base_size[{#SINGLETON}] | DEPENDENT |
| AOF buffer length{#SINGLETON} | Size of the AOF buffer | redis.persistence.aof_buffer_length[{#SINGLETON}] | DEPENDENT |
| AOF current size{#SINGLETON} | AOF current file size | redis.persistence.aof_current_size[{#SINGLETON}] | DEPENDENT |
| AOF delayed fsync{#SINGLETON} | Delayed fsync counter | redis.persistence.aof_delayed_fsync[{#SINGLETON}] | DEPENDENT |
| AOF pending background I/O fsync{#SINGLETON} | Number of fsync pending jobs in background I/O queue | redis.persistence.aof_pending_bio_fsync[{#SINGLETON}] | DEPENDENT |
| AOF pending rewrite{#SINGLETON} | Flag indicating an AOF rewrite operation will | redis.persistence.aof_pending_rewrite[{#SINGLETON}] | DEPENDENT |
| AOF rewrite buffer length{#SINGLETON} | Size of the AOF rewrite buffer | redis.persistence.aof_rewrite_buffer_length[{#SINGLETON}] | DEPENDENT |


<a name="discovery_replication_metrics_discovery" />

## Discovery Replication metrics discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Redis slave {#SLAVE_IP}:{#SLAVE_PORT}: Replication lag in bytes | Replication lag in bytes | redis.replication.lag_bytes["{#SLAVE_IP}:{#SLAVE_PORT}"] | DEPENDENT |


<a name="discovery_slave_metrics_discovery" />

## Discovery Slave metrics discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Master host{#SINGLETON} | Host or IP address of the master | redis.replication.master_host[{#SINGLETON}] | DEPENDENT |
| Master last I/O seconds ago{#SINGLETON} | Number of seconds since the last interaction with master | redis.replication.master_last_io_seconds_ago[{#SINGLETON}] | DEPENDENT |
| Master link status{#SINGLETON} | Status of the link (up/down) | redis.replication.master_link_status[{#SINGLETON}] | DEPENDENT |
| Master port{#SINGLETON} | Master listening TCP port | redis.replication.master_port[{#SINGLETON}] | DEPENDENT |
| Master sync in progress{#SINGLETON} | Indicate the master is syncing to the replica | redis.replication.master_sync_in_progress[{#SINGLETON}] | DEPENDENT |
| Slave priority{#SINGLETON} | The priority of the instance as a candidate for failover | redis.replication.slave_priority[{#SINGLETON}] | DEPENDENT |
| Slave priority{#SINGLETON} | Flag indicating if the replica is read-only | redis.replication.slave_read_only[{#SINGLETON}] | DEPENDENT |
| Slave replication offset{#SINGLETON} | The replication offset of the replica instance | redis.replication.slave_repl_offset[{#SINGLETON}] | DEPENDENT |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Replication lag with master is too high | WARNING | no description | min(/Redis by Zabbix agent 2/redis.replication.master_last_io_seconds_ago[{#SINGLETON}],5m)>{$REDIS.REPL.LAG.MAX.WARN} | [{"tag": "scope", "value": "availability"}] | no url |

