# Squid by SNMP template description

Template for monitoring Squid caching proxy via SNMP

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/409339-discussion-thread-for-official-zabbix-template-squid

Generated by official Zabbix template tool "Templator"

## Summary
* [items](#items)
* [macros](#macros)
* [triggers](#triggers)

<a name="items"></a>

## Items
| name | description | key | type | delay |
| ------------- |------------- |------------- |------------- |------------- |
| Service ping | no description | net.tcp.service[tcp,,{$SQUID.HTTP.PORT}] | SIMPLE | no delay |
| CPU usage | The percentage use of the CPU | squid[cacheCpuUsage] | SNMP_AGENT | no delay |
| File descriptor count - current used | Number of file descriptors in use | squid[cacheCurrentFileDescrCnt] | SNMP_AGENT | no delay |
| File descriptor count - current maximum | Highest number of file descriptors in use | squid[cacheCurrentFileDescrMax] | SNMP_AGENT | no delay |
| Objects LRU expiration age | Storage LRU Expiration Age | squid[cacheCurrentLRUExpiration] | SNMP_AGENT | no delay |
| File descriptor count - current reserved | Reserved number of file descriptors | squid[cacheCurrentResFileDescrCnt] | SNMP_AGENT | no delay |
| Cache swap current size | Storage Swap Size | squid[cacheCurrentSwapSize] | SNMP_AGENT | no delay |
| Objects unlinkd requests | Requests given to unlinkd | squid[cacheCurrentUnlinkRequests] | SNMP_AGENT | no delay |
| File descriptor count - current available | Available number of file descriptors | squid[cacheCurrentUnusedFDescrCnt] | SNMP_AGENT | no delay |
| DNS server replies per second | Number of external dns server replies | squid[cacheDnsReplies] | SNMP_AGENT | no delay |
| DNS server requests per second | Number of external dns server requests | squid[cacheDnsRequests] | SNMP_AGENT | no delay |
| DNS service time per 5 minutes | DNS service time per 5 minutes | squid[cacheDnsSvcTime.5] | SNMP_AGENT | no delay |
| DNS service time per hour | DNS service time per hour | squid[cacheDnsSvcTime.60] | SNMP_AGENT | no delay |
| FQDN cache hits per second | Number of FQDN Cache hits | squid[cacheFqdnHits] | SNMP_AGENT | no delay |
| FQDN cache misses per second | Number of FQDN Cache misses | squid[cacheFqdnMisses] | SNMP_AGENT | no delay |
| FQDN cache requests per second | Number of FQDN Cache requests | squid[cacheFqdnRequests] | SNMP_AGENT | no delay |
| HTTP all service time per 5 minutes | HTTP all service time per 5 minutes | squid[cacheHttpAllSvcTime.5] | SNMP_AGENT | no delay |
| HTTP all service time per hour | HTTP all service time per hour | squid[cacheHttpAllSvcTime.60] | SNMP_AGENT | no delay |
| HTTP Errors sent per second | Number of HTTP Errors sent to clients | squid[cacheHttpErrors] | SNMP_AGENT | no delay |
| HTTP hit service time per 5 minutes | HTTP hit service time per 5 minutes | squid[cacheHttpHitSvcTime.5] | SNMP_AGENT | no delay |
| HTTP hit service time per hour | HTTP hit service time per hour | squid[cacheHttpHitSvcTime.60] | SNMP_AGENT | no delay |
| HTTP Hits sent from cache per second | Number of HTTP Hits sent to clients from cache | squid[cacheHttpHits] | SNMP_AGENT | no delay |
| HTTP traffic received per second | Number of HTTP traffic received from clients | squid[cacheHttpInKb] | SNMP_AGENT | no delay |
| HTTP miss service time per 5 minutes | HTTP miss service time per 5 minutes | squid[cacheHttpMissSvcTime.5] | SNMP_AGENT | no delay |
| HTTP miss service time per hour | HTTP miss service time per hour | squid[cacheHttpMissSvcTime.60] | SNMP_AGENT | no delay |
| HTTP traffic sent per second | Number of HTTP traffic sent to clients | squid[cacheHttpOutKb] | SNMP_AGENT | no delay |
| ICP traffic received per second | Number of ICP traffic received | squid[cacheIcpKbRecv] | SNMP_AGENT | no delay |
| ICP traffic transmitted per second | Number of ICP traffic transmitted | squid[cacheIcpKbSent] | SNMP_AGENT | no delay |
| ICP messages received per second | Number of ICP messages received | squid[cacheIcpPktsRecv] | SNMP_AGENT | no delay |
| ICP messages sent per second | Number of ICP messages sent | squid[cacheIcpPktsSent] | SNMP_AGENT | no delay |
| ICP query service time per 5 minutes | ICP query service time per 5 minutes | squid[cacheIcpQuerySvcTime.5] | SNMP_AGENT | no delay |
| ICP query service time per hour | ICP query service time per hour | squid[cacheIcpQuerySvcTime.60] | SNMP_AGENT | no delay |
| ICP reply service time per 5 minutes | ICP reply service time per 5 minutes | squid[cacheIcpReplySvcTime.5] | SNMP_AGENT | no delay |
| ICP reply service time per hour | ICP reply service time per hour | squid[cacheIcpReplySvcTime.60] | SNMP_AGENT | no delay |
| IP cache hits per second | Number of IP Cache hits | squid[cacheIpHits] | SNMP_AGENT | no delay |
| IP cache misses per second | Number of IP Cache misses | squid[cacheIpMisses] | SNMP_AGENT | no delay |
| IP cache requests per second | Number of IP Cache requests | squid[cacheIpRequests] | SNMP_AGENT | no delay |
| Memory maximum resident size | Maximum Resident Size | squid[cacheMaxResSize] | SNMP_AGENT | no delay |
| Memory maximum cache size | The value of the cache_mem parameter | squid[cacheMemMaxSize] | SNMP_AGENT | no delay |
| Memory cache usage | Total accounted memory | squid[cacheMemUsage] | SNMP_AGENT | no delay |
| Objects count | Number of objects stored by the cache | squid[cacheNumObjCount] | SNMP_AGENT | no delay |
| HTTP requests received per second | Number of HTTP requests received | squid[cacheProtoClientHttpRequests] | SNMP_AGENT | no delay |
| Byte hit ratio per 1 minute | Byte Hit Ratios | squid[cacheRequestByteRatio.1] | SNMP_AGENT | no delay |
| Byte hit ratio per 5 minutes | Byte Hit Ratios | squid[cacheRequestByteRatio.5] | SNMP_AGENT | no delay |
| Byte hit ratio per 1 hour | Byte Hit Ratios | squid[cacheRequestByteRatio.60] | SNMP_AGENT | no delay |
| Request hit ratio per 1 minute | Byte Hit Ratios | squid[cacheRequestHitRatio.1] | SNMP_AGENT | no delay |
| Request hit ratio per 5 minutes | Byte Hit Ratios | squid[cacheRequestHitRatio.5] | SNMP_AGENT | no delay |
| Request hit ratio per 1 hour | Byte Hit Ratios | squid[cacheRequestHitRatio.60] | SNMP_AGENT | no delay |
| Cache swap high water mark | Cache Swap High Water Mark | squid[cacheSwapHighWM] | SNMP_AGENT | no delay |
| Cache swap low water mark | Cache Swap Low Water Mark | squid[cacheSwapLowWM] | SNMP_AGENT | no delay |
| Cache swap directory size | The total of the cache_dir space allocated | squid[cacheSwapMaxSize] | SNMP_AGENT | no delay |
| Sys page faults per second | Page faults with physical I/O | squid[cacheSysPageFaults] | SNMP_AGENT | no delay |
| Uptime | The Uptime of the cache in timeticks (in hundredths of a second) with preprocessing | squid[cacheUptime] | SNMP_AGENT | 5m |
| Version | Cache Software Version | squid[cacheVersionId] | SNMP_AGENT | no delay |


<a name="macros"></a>

## Macros
| macro | value |
| ------------- |------------- |
| {$SQUID.FILE.DESC.WARN.MIN} | 100 |
| {$SQUID.HTTP.PORT} | 3128 |
| {$SQUID.PAGE.FAULT.WARN} | 90 |
| {$SQUID.SNMP.COMMUNITY} | public |
| {$SQUID.SNMP.PORT} | 3401 |


<a name="triggers"></a>

## Triggers
| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Port {$SQUID.HTTP.PORT} is down | AVERAGE | no description | last(/Squid by SNMP/net.tcp.service[tcp,,{$SQUID.HTTP.PORT}])=0 | [{"tag": "scope", "value": "availability"}] | no url |
| Squid is running out of file descriptors | WARNING | no description | last(/Squid by SNMP/squid[cacheCurrentUnusedFDescrCnt])<{$SQUID.FILE.DESC.WARN.MIN} | [{"tag": "scope", "value": "performance"}] | no url |
| Squid has been restarted | INFO | Uptime is less than 10 minutes. | last(/Squid by SNMP/squid[cacheUptime])<10m | [{"tag": "scope", "value": "notice"}] | no url |
| Squid version has been changed | INFO | Squid version has changed. Acknowledge to close the problem manually. | last(/Squid by SNMP/squid[cacheVersionId],#1)<>last(/Squid by SNMP/squid[cacheVersionId],#2) and length(last(/Squid by SNMP/squid[cacheVersionId]))>0 | [{"tag": "scope", "value": "notice"}] | no url |
| High sys page faults rate | WARNING | no description | avg(/Squid by SNMP/squid[cacheSysPageFaults],5m)>avg(/Squid by SNMP/squid[cacheProtoClientHttpRequests],5m)/100*{$SQUID.PAGE.FAULT.WARN} | [{"tag": "scope", "value": "performance"}] | no url |
| Swap usage is more than high watermark | HIGH | no description | last(/Squid by SNMP/squid[cacheCurrentSwapSize])>last(/Squid by SNMP/squid[cacheSwapHighWM])*last(/Squid by SNMP/squid[cacheSwapMaxSize])/100 | [{"tag": "scope", "value": "capacity"}, {"tag": "scope", "value": "performance"}] | no url |
| Swap usage is more than low watermark | WARNING | no description | last(/Squid by SNMP/squid[cacheCurrentSwapSize])>last(/Squid by SNMP/squid[cacheSwapLowWM])*last(/Squid by SNMP/squid[cacheSwapMaxSize])/100 | [{"tag": "scope", "value": "capacity"}, {"tag": "scope", "value": "performance"}] | no url |

