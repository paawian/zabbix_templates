# Morningstar SunSaver MPPT by SNMP template description

MIBs used:
SUNSAVER-MPPT

Generated by official Zabbix template tool "Templator"

## Summary
* [items](#items)
* [macros](#macros)
* [triggers](#triggers)
* [discoveries](#discoveries)
  * [Discovery Battery voltage discovery ](#discovery_battery_voltage_discovery)

<a name="items"></a>

## Items
| name | description | key | type | delay |
| ------------- |------------- |------------- |------------- |------------- |
| Array: Sweep Pmax | MIB: SUNSAVER-MPPT<br>Description:Array Open Circuit Voltage<br>Scaling Factor:0.0030517578125<br>Units:V<br>Range:[0.0, 80.0]<br>Modbus address:0x002A | array.sweep_pmax[arrayMaxPowerSweep.0] | SNMP_AGENT | no delay |
| Array: Sweep Vmp | MIB: SUNSAVER-MPPT<br>Description:Array Max. Power Point Voltage<br>Scaling Factor:0.0030517578125<br>Units:V<br>Range:[0.0, 5000.0]<br>Modbus address:0x0028 | array.sweep_vmp[arrayVmp.0] | SNMP_AGENT | no delay |
| Array: Sweep Voc | MIB: SUNSAVER-MPPT<br>Description:Array Open Circuit Voltage<br>Scaling Factor:0.0030517578125<br>Units:V<br>Range:[0.0, 80.0]<br>Modbus address:0x002A | array.sweep_voc[arrayVoc.0] | SNMP_AGENT | no delay |
| Array: Voltage | MIB: SUNSAVER-MPPT<br>Description:Array Voltage<br>Scaling Factor:0.0030517578125<br>Units:V<br>Range:[0, 80]<br>Modbus address:0x0009 | array.voltage[arrayVoltage.0] | SNMP_AGENT | no delay |
| Battery: Battery Voltage discovery | MIB: SUNSAVER-MPPT | battery.voltage.discovery[batteryVoltage.0] | SNMP_AGENT | 15m |
| Battery: Charge Current | MIB: SUNSAVER-MPPT<br>Description:Target Regulation Voltage<br>Scaling Factor:0.0030517578125<br>Units:V<br>Range:[0.0, 80.0]<br>Modbus address:0x0014 | charge.current[chargeCurrent.0] | SNMP_AGENT | no delay |
| Battery: Charge State | MIB: SUNSAVER-MPPT<br>Description:Control State<br>Modbus address:0x0011<br><br>0: Start<br>1: NightCheck<br>2: Disconnect<br>3: Night<br>4: Fault<br>5: BulkMppt<br>6: Pwm<br>7: Float<br>8: Equalize | charge.state[chargeState.0] | SNMP_AGENT | no delay |
| Counter: Charge Amp-hours | MIB: SUNSAVER-MPPT<br>Description:Ah Charge(Resettable)<br>Scaling Factor:0.1<br>Units:Ah<br>Range:[0.0, 4294967294]<br>Modbus addresses:H=0x0015 L=0x0016 | counter.charge_amp_hours[ahChargeResettable.0] | SNMP_AGENT | no delay |
| Counter: Charge KW-hours | MIB: SUNSAVER-MPPT | counter.charge_kw_hours[kwhCharge.0] | SNMP_AGENT | no delay |
| Counter: Load Amp-hours | MIB: SUNSAVER-MPPT<br>Description:Ah Load(Resettable)<br>Scaling Factor:0.1<br>Units:Ah<br>Range:[0.0, 4294967294]<br>Modbus addresses:H=0x001D L=0x001E | counter.load_amp_hours[ahLoadResettable.0] | SNMP_AGENT | no delay |
| Load: Current | MIB: SUNSAVER-MPPT<br>Description:Load Current<br>Scaling Factor:0.002415771484375<br>Units:A<br>Range:[0, 60]<br>Modbus address:0x000C | load.current[loadCurrent.0] | SNMP_AGENT | no delay |
| Load: State | MIB: SUNSAVER-MPPT<br>Description:Load State<br>Modbus address:0x001A<br><br>0: Start<br>1: Normal<br>2: LvdWarning<br>3: Lvd<br>4: Fault<br>5: Disconnect<br>6: NormalOff<br>7: Override<br>8: NotUsed | load.state[loadState.0] | SNMP_AGENT | no delay |
| Load: Voltage | MIB: SUNSAVER-MPPT<br>Description:Load Voltage<br>Scaling Factor:0.0030517578125<br>Units:V<br>Range:[0, 80]<br>Modbus address:0x000A | load.voltage[loadVoltage.0] | SNMP_AGENT | no delay |
| Status: Alarms | MIB: SUNSAVER-MPPT<br>Description:Alarms<br>Modbus addresses:H=0x0023 L=0x0024 | status.alarms[alarms.0] | SNMP_AGENT | no delay |
| Status: Array Faults | MIB: SUNSAVER-MPPT<br>Description:Array Faults<br>Modbus address:0x0012 | status.array_faults[arrayFaults.0] | SNMP_AGENT | no delay |
| Status: Uptime (hardware) | The amount of time since this host was last initialized. Note that this is different from sysUpTime in the SNMPv2-MIB [RFC1907] because sysUpTime is the uptime of the network management portion of the system. | status.hw.uptime | SNMP_AGENT | no delay |
| Status: Load Faults | MIB: SUNSAVER-MPPT<br>Description:Array Faults<br>Modbus address:0x0012 | status.load_faults[loadFaults.0] | SNMP_AGENT | no delay |
| Status: Uptime (network) | The time (in hundredths of a second) since the network management portion of the system was last re-initialized. | status.net.uptime | SNMP_AGENT | no delay |
| Battery: Target Voltage | MIB: SUNSAVER-MPPT<br>Description:Target Regulation Voltage<br>Scaling Factor:0.0030517578125<br>Units:V<br>Range:[0.0, 80.0]<br>Modbus address:0x0014 | target.voltage[targetVoltage.0] | SNMP_AGENT | no delay |
| Temperature: Ambient | MIB: SUNSAVER-MPPT<br>Description:Ambient Temperature<br>Scaling Factor:1.0<br>Units:deg C<br>Range:[-128, 127]<br>Modbus address:0x000F | temp.ambient[ambientTemperature.0] | SNMP_AGENT | no delay |
| Temperature: Battery | MIB: SUNSAVER-MPPT<br>Description:Heatsink Temperature<br>Scaling Factor:1.0<br>Units:deg C<br>Range:[-128, 127]<br>Modbus address:0x000D | temp.battery[batteryTemperature.0] | SNMP_AGENT | no delay |
| Temperature: Heatsink | MIB: SUNSAVER-MPPT<br>Description:Battery Temperature<br>Scaling Factor:1.0<br>Units:deg C<br>Range:[-128, 127]<br>Modbus address:0x000E | temp.heatsink[heatsinkTemperature.0] | SNMP_AGENT | no delay |


<a name="macros"></a>

## Macros
| macro | value |
| ------------- |------------- |
| {$BATTERY.TEMP.MAX.CRIT} | 60 |
| {$BATTERY.TEMP.MAX.WARN} | 45 |
| {$BATTERY.TEMP.MIN.CRIT} | -20 |
| {$BATTERY.TEMP.MIN.WARN} | 0 |
| {$CHARGE.STATE.CRIT} | 4 |
| {$CHARGE.STATE.WARN} | 2 |
| {$LOAD.STATE.CRIT:"fault"} | 4 |
| {$LOAD.STATE.CRIT:"lvd"} | 3 |
| {$LOAD.STATE.WARN:"disconnect"} | 5 |
| {$LOAD.STATE.WARN:"lvdWarning"} | 2 |
| {$LOAD.STATE.WARN:"override"} | 7 |
| {$VOLTAGE.MAX.CRIT} | no value |
| {$VOLTAGE.MAX.WARN} | no value |
| {$VOLTAGE.MIN.CRIT} | no value |
| {$VOLTAGE.MIN.WARN} | no value |


<a name="triggers"></a>

## Triggers
| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Battery: Device charge in critical state | HIGH | no description | last(/Morningstar SunSaver MPPT by SNMP/charge.state[chargeState.0])={$CHARGE.STATE.CRIT} | [{"tag": "scope", "value": "notice"}] | no url |
| Battery: Device charge in warning state | WARNING | no description | last(/Morningstar SunSaver MPPT by SNMP/charge.state[chargeState.0])={$CHARGE.STATE.WARN} | [{"tag": "scope", "value": "notice"}] | no url |
| Load: Device load in critical state | HIGH | no description | last(/Morningstar SunSaver MPPT by SNMP/load.state[loadState.0])={$LOAD.STATE.CRIT:"lvd"} or last(/Morningstar SunSaver MPPT by SNMP/load.state[loadState.0])={$LOAD.STATE.CRIT:"fault"} | [{"tag": "scope", "value": "notice"}] | no url |
| Load: Device load in warning state | WARNING | no description | last(/Morningstar SunSaver MPPT by SNMP/load.state[loadState.0])={$LOAD.STATE.WARN:"lvdWarning"}  or last(/Morningstar SunSaver MPPT by SNMP/load.state[loadState.0])={$LOAD.STATE.WARN:"override"} | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "currentLimit" alarm flag | WARNING | no description | count(/Morningstar SunSaver MPPT by SNMP/status.alarms[alarms.0],#3,"like","currentLimit")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "currentOffset" alarm flag | WARNING | no description | count(/Morningstar SunSaver MPPT by SNMP/status.alarms[alarms.0],#3,"like","currentOffset")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "heatsinkTempSensorOpen" alarm flag | WARNING | no description | count(/Morningstar SunSaver MPPT by SNMP/status.alarms[alarms.0],#3,"like","heatsinkTempSensorOpen")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "heatsinkTempSensorShorted" alarm flag | WARNING | no description | count(/Morningstar SunSaver MPPT by SNMP/status.alarms[alarms.0],#3,"like","heatsinkTempSensorShorted")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "highVaCurrentLimit" alarm flag | WARNING | no description | count(/Morningstar SunSaver MPPT by SNMP/status.alarms[alarms.0],#3,"like","highVaCurrentLimit")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "mosfetSOpen" alarm flag | WARNING | no description | count(/Morningstar SunSaver MPPT by SNMP/status.alarms[alarms.0],#3,"like","mosfetSOpen")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "p12VoltageReferenceOff" alarm flag | WARNING | no description | count(/Morningstar SunSaver MPPT by SNMP/status.alarms[alarms.0],#3,"like","p12VoltageReferenceOff")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "rtsDisconnected" alarm flag | WARNING | no description | count(/Morningstar SunSaver MPPT by SNMP/status.alarms[alarms.0],#3,"like","rtsDisconnected")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "rtsMiswire" alarm flag | WARNING | no description | count(/Morningstar SunSaver MPPT by SNMP/status.alarms[alarms.0],#3,"like","rtsMiswire")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "rtsShorted" alarm flag | WARNING | no description | count(/Morningstar SunSaver MPPT by SNMP/status.alarms[alarms.0],#3,"like","rtsShorted")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "sspptHot" alarm flag | WARNING | no description | count(/Morningstar SunSaver MPPT by SNMP/status.alarms[alarms.0],#3,"like","sspptHot")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "systemMiswire" alarm flag | WARNING | no description | count(/Morningstar SunSaver MPPT by SNMP/status.alarms[alarms.0],#3,"like","systemMiswire")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "uncalibrated" alarm flag | WARNING | no description | count(/Morningstar SunSaver MPPT by SNMP/status.alarms[alarms.0],#3,"like","uncalibrated")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "arrayHvd" array faults flag | HIGH | no description | count(/Morningstar SunSaver MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","arrayHvd")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "batteryHvd" array faults flag | HIGH | no description | count(/Morningstar SunSaver MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","batteryHvd")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "customSettingsEdit" array faults flag | HIGH | no description | count(/Morningstar SunSaver MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","customSettingsEdit")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "localTempSensorDamaged" array faults flag | HIGH | no description | count(/Morningstar SunSaver MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","localTempSensorDamaged")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "mosfetSShorted" array faults flag | HIGH | no description | count(/Morningstar SunSaver MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","mosfetSShorted")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "overcurrent" array faults flag | HIGH | no description | count(/Morningstar SunSaver MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","overcurrent")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "rtsNoLongerValid" array faults flag | HIGH | no description | count(/Morningstar SunSaver MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","rtsNoLongerValid")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "rtsShorted" array faults flag | HIGH | no description | count(/Morningstar SunSaver MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","rtsShorted")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "softwareFault" array faults flag | HIGH | no description | count(/Morningstar SunSaver MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","softwareFault")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "customSettingsEdit" load faults flag | HIGH | no description | count(/Morningstar SunSaver MPPT by SNMP/status.load_faults[loadFaults.0],#3,"like","customSettingsEdit")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "externalShortCircuit" load faults flag | HIGH | no description | count(/Morningstar SunSaver MPPT by SNMP/status.load_faults[loadFaults.0],#3,"like","externalShortCircuit")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "highTempDisconnect" load faults flag | HIGH | no description | count(/Morningstar SunSaver MPPT by SNMP/status.load_faults[loadFaults.0],#3,"like","highTempDisconnect")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "loadHvd" load faults flag | HIGH | no description | count(/Morningstar SunSaver MPPT by SNMP/status.load_faults[loadFaults.0],#3,"like","loadHvd")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "mosfetShorted" load faults flag | HIGH | no description | count(/Morningstar SunSaver MPPT by SNMP/status.load_faults[loadFaults.0],#3,"like","mosfetShorted")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "overcurrent" load faults flag | HIGH | no description | count(/Morningstar SunSaver MPPT by SNMP/status.load_faults[loadFaults.0],#3,"like","overcurrent")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "software" load faults flag | HIGH | no description | count(/Morningstar SunSaver MPPT by SNMP/status.load_faults[loadFaults.0],#3,"like","software")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has "unknownLoadFault" load faults flag | HIGH | no description | count(/Morningstar SunSaver MPPT by SNMP/status.load_faults[loadFaults.0],#3,"like","unknownLoadFault")=2 | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Failed to fetch data | WARNING | Zabbix has not received data for items for the last 5 minutes. | nodata(/Morningstar SunSaver MPPT by SNMP/status.net.uptime,5m)=1 | [{"tag": "scope", "value": "availability"}] | no url |
| Temperature: Critically high battery temperature | HIGH | no description | min(/Morningstar SunSaver MPPT by SNMP/temp.battery[batteryTemperature.0],5m)>{$BATTERY.TEMP.MAX.CRIT} | [{"tag": "scope", "value": "notice"}] | no url |
| Temperature: Critically low battery temperature | HIGH | no description | max(/Morningstar SunSaver MPPT by SNMP/temp.battery[batteryTemperature.0],5m)<{$BATTERY.TEMP.MIN.CRIT} | [{"tag": "scope", "value": "notice"}] | no url |
| Temperature: High battery temperature | WARNING | no description | min(/Morningstar SunSaver MPPT by SNMP/temp.battery[batteryTemperature.0],5m)>{$BATTERY.TEMP.MAX.WARN} | [{"tag": "scope", "value": "notice"}] | no url |
| Temperature: Low battery temperature | WARNING | no description | max(/Morningstar SunSaver MPPT by SNMP/temp.battery[batteryTemperature.0],5m)<{$BATTERY.TEMP.MIN.WARN} | [{"tag": "scope", "value": "notice"}] | no url |
| Status: Device has been restarted | INFO | Uptime is less than 10 minutes. | (last(/Morningstar SunSaver MPPT by SNMP/status.hw.uptime)>0 and last(/Morningstar SunSaver MPPT by SNMP/status.hw.uptime)<10m) or (last(/Morningstar SunSaver MPPT by SNMP/status.hw.uptime)=0 and last(/Morningstar SunSaver MPPT by SNMP/status.net.uptime)<10m) | [{"tag": "scope", "value": "notice"}] | no url |


<a name="discoveries"></a>

## Discoveries
| name | key | description | type | lifetime | delay |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Battery voltage discovery | battery.voltage.discovery | Discovery for battery voltage triggers | DEPENDENT | no lifetime | 0 |


<a name="discovery_battery_voltage_discovery" />

## Discovery Battery voltage discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Battery: Voltage{#SINGLETON} | MIB: SUNSAVER-MPPT<br>Description:Control State<br>Modbus address:0x0011 | battery.voltage[batteryVoltage.0{#SINGLETON}] | SNMP_AGENT |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Battery: Critically high battery voltage | HIGH | no description | min(/Morningstar SunSaver MPPT by SNMP/battery.voltage[batteryVoltage.0{#SINGLETON}],5m)>{#VOLTAGE.MAX.CRIT} | [{"tag": "scope", "value": "capacity"}] | no url |
| Battery: Critically low battery voltage | HIGH | no description | max(/Morningstar SunSaver MPPT by SNMP/battery.voltage[batteryVoltage.0{#SINGLETON}],5m)<{#VOLTAGE.MIN.CRIT} | [{"tag": "scope", "value": "capacity"}] | no url |
| Battery: High battery voltage | WARNING | no description | min(/Morningstar SunSaver MPPT by SNMP/battery.voltage[batteryVoltage.0{#SINGLETON}],5m)>{#VOLTAGE.MAX.WARN} | [{"tag": "scope", "value": "capacity"}] | no url |
| Battery: Low battery voltage | WARNING | no description | max(/Morningstar SunSaver MPPT by SNMP/battery.voltage[batteryVoltage.0{#SINGLETON}],5m)<{#VOLTAGE.MIN.WARN} | [{"tag": "scope", "value": "capacity"}] | no url |

