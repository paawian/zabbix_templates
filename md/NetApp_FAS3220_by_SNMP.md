# NetApp FAS3220 by SNMP template description

The template to monitor SAN NetApp FAS3220 cluster by Zabbix SNMP agent.

MIBs used:
HOST-RESOURCES-MIB
SNMPv2-MIB
NETAPP-MIB
IF-MIB

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/416694-discussion-thread-for-official-zabbix-template-netapp-fas3220

Generated by official Zabbix template tool "Templator"

## Summary
* [items](#items)
* [macros](#macros)
* [triggers](#triggers)
* [discoveries](#discoveries)
  * [Discovery Cluster metrics discovery ](#discovery_cluster_metrics_discovery)
  * [Discovery CPU discovery ](#discovery_cpu_discovery)
  * [Discovery Filesystems discovery ](#discovery_filesystems_discovery)
  * [Discovery HA discovery ](#discovery_ha_discovery)
  * [Discovery Network ports discovery ](#discovery_network_ports_discovery)

<a name="items"></a>

## Items
| name | description | key | type | delay |
| ------------- |------------- |------------- |------------- |------------- |
| Failed disks count | The number of disks that are currently broken. | fas3220.disk[diskFailedCount] | SNMP_AGENT | no delay |
| Failed disks message | If diskFailedCount is non-zero, this is a string describing the failed disk or disks. Each failed disk is described. | fas3220.disk[diskFailedMessage] | SNMP_AGENT | no delay |
| Product firmware version | Version string for the firmware running on this platform. | fas3220.inventory[productFirmwareVersion] | SNMP_AGENT | no delay |
| Product version | MIB: NETAPP-MIB<br>Version string for the software running on this platform. | fas3220.inventory[productVersion] | SNMP_AGENT | no delay |
| ICMP ping | no description | icmpping | SIMPLE | no delay |
| ICMP loss | no description | icmppingloss | SIMPLE | no delay |
| ICMP response time | no description | icmppingsec | SIMPLE | no delay |
| SNMP traps (fallback) | The item is used to collect all SNMP traps unmatched by other snmptrap items | snmptrap.fallback | SNMP_TRAP | 0 |
| System contact details | MIB: SNMPv2-MIB<br>The textual identification of the contact person for this managed node, together with information on how to contact this person.  If no contact information is known, the value is the zero-length string. | system.contact[sysContact.0] | SNMP_AGENT | 15m |
| System description | MIB: SNMPv2-MIB<br>A textual description of the entity. This value should<br>include the full name and version identification of the system's hardware type, software operating-system, and<br>networking software. | system.descr[sysDescr.0] | SNMP_AGENT | 15m |
| Uptime (hardware) | MIB: HOST-RESOURCES-MIB<br>The amount of time since this host was last initialized. Note that this is different from sysUpTime in the SNMPv2-MIB [RFC1907] because sysUpTime is the uptime of the network management portion of the system. | system.hw.uptime[hrSystemUptime.0] | SNMP_AGENT | 30s |
| System location | MIB: SNMPv2-MIB<br>Physical location of the node (e.g., `equipment room`, `3rd floor`). If not provided, the value is a zero-length string. | system.location[sysLocation.0] | SNMP_AGENT | 15m |
| System name | MIB: SNMPv2-MIB<br>An administratively-assigned name for this managed node.By convention, this is the node's fully-qualified domain name.  If the name is unknown, the value is the zero-length string. | system.name | SNMP_AGENT | 15m |
| Uptime (network) | MIB: SNMPv2-MIB<br>Time (in hundredths of a second) since the network management portion of the system was last re-initialized. | system.net.uptime[sysUpTime.0] | SNMP_AGENT | 30s |
| System object ID | MIB: SNMPv2-MIB<br>The vendor's authoritative identification of the network management subsystem contained in the entity.  This value is allocated within the SMI enterprises subtree (1.3.6.1.4.1) and provides an easy and unambiguous means for determining`what kind of box' is being managed.  For example, if vendor`Flintstones, Inc.' was assigned the subtree1.3.6.1.4.1.4242, it could assign the identifier 1.3.6.1.4.1.4242.1.1 to its `Fred Router'. | system.objectid[sysObjectID.0] | SNMP_AGENT | 15m |
| SNMP agent availability | Availability of SNMP checks on the host. The value of this item corresponds to availability icons in the host list.<br>Possible values:<br>0 - not available<br>1 - available<br>2 - unknown | zabbix[host,snmp,available] | INTERNAL | no delay |


<a name="macros"></a>

## Macros
| macro | value |
| ------------- |------------- |
| {$CPU.UTIL.CRIT} | 90 |
| {$FAS3220.FS.AVAIL.MIN.CRIT} | 10G |
| {$FAS3220.FS.NAME.MATCHES} | .* |
| {$FAS3220.FS.NAME.NOT_MATCHES} | snapshot |
| {$FAS3220.FS.PUSED.MAX.CRIT} | 90 |
| {$FAS3220.FS.TIME} | 10m |
| {$FAS3220.FS.TYPE.MATCHES} | .* |
| {$FAS3220.FS.TYPE.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$FAS3220.FS.USE.PCT} | 1 |
| {$FAS3220.NET.PORT.NAME.MATCHES} | .* |
| {$FAS3220.NET.PORT.NAME.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$FAS3220.NET.PORT.ROLE.MATCHES} | .* |
| {$FAS3220.NET.PORT.ROLE.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$FAS3220.NET.PORT.TYPE.MATCHES} | .* |
| {$FAS3220.NET.PORT.TYPE.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$ICMP_LOSS_WARN} | 20 |
| {$ICMP_RESPONSE_TIME_WARN} | 0.15 |
| {$IF.ERRORS.WARN} | no value |
| {$IF.UTIL.MAX} | 95 |
| {$SNMP.TIMEOUT} | 5m |


<a name="triggers"></a>

## Triggers
| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Unavailable by ICMP ping | HIGH | Last three attempts returned timeout.  Please check device connectivity. | max(/NetApp FAS3220 by SNMP/icmpping,#3)=0 | [{"tag": "scope", "value": "availability"}] | no url |
| High ICMP ping loss | WARNING | no description | min(/NetApp FAS3220 by SNMP/icmppingloss,5m)>{$ICMP_LOSS_WARN} and min(/NetApp FAS3220 by SNMP/icmppingloss,5m)<100 | [{"tag": "scope", "value": "availability"}, {"tag": "scope", "value": "performance"}] | no url |
| High ICMP ping response time | WARNING | Average ICMP response time is too high. | avg(/NetApp FAS3220 by SNMP/icmppingsec,5m)>{$ICMP_RESPONSE_TIME_WARN} | [{"tag": "scope", "value": "availability"}, {"tag": "scope", "value": "performance"}] | no url |
| System name has changed | INFO | The name of the system has changed. Acknowledge to close the problem manually. | last(/NetApp FAS3220 by SNMP/system.name,#1)<>last(/NetApp FAS3220 by SNMP/system.name,#2) and length(last(/NetApp FAS3220 by SNMP/system.name))>0 | [{"tag": "scope", "value": "notice"}, {"tag": "scope", "value": "security"}] | no url |
| No SNMP data collection | WARNING | SNMP is not available for polling. Please check device connectivity and SNMP settings. | max(/NetApp FAS3220 by SNMP/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0 | [{"tag": "scope", "value": "availability"}] | no url |
| Host has been restarted | WARNING | Uptime is less than 10 minutes. | (last(/NetApp FAS3220 by SNMP/system.hw.uptime[hrSystemUptime.0])>0 and last(/NetApp FAS3220 by SNMP/system.hw.uptime[hrSystemUptime.0])<10m) or (last(/NetApp FAS3220 by SNMP/system.hw.uptime[hrSystemUptime.0])=0 and last(/NetApp FAS3220 by SNMP/system.net.uptime[sysUpTime.0])<10m) | [{"tag": "scope", "value": "notice"}] | no url |
| Number of failed disks has changed | WARNING | {{ITEM.LASTVALUE2}.regsub("(.*)", \1)} | last(/NetApp FAS3220 by SNMP/fas3220.disk[diskFailedCount])>0 and last(/NetApp FAS3220 by SNMP/fas3220.disk[diskFailedMessage],#1)<>last(/NetApp FAS3220 by SNMP/fas3220.disk[diskFailedMessage],#2) | [{"tag": "scope", "value": "availability"}, {"tag": "scope", "value": "performance"}] | no url |


<a name="discoveries"></a>

## Discoveries
| name | key | description | type | lifetime | delay |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Cluster metrics discovery | fas3220.cluster.discovery | Discovery of Cluster metrics per node | SNMP_AGENT | no lifetime | 1h |
| CPU discovery | fas3220.cpu.discovery | Discovery of CPU metrics per node | SNMP_AGENT | no lifetime | 1h |
| Filesystems discovery | fas3220.fs.discovery | Filesystems discovery with filter. | SNMP_AGENT | no lifetime | 1h |
| HA discovery | fas3220.ha.discovery | Discovery of high availability metrics per node | SNMP_AGENT | no lifetime | 1h |
| Network ports discovery | fas3220.net.discovery | Network interfaces discovery with filter. | SNMP_AGENT | no lifetime | 1h |


<a name="discovery_cluster_metrics_discovery" />

## Discovery Cluster metrics discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Node {#NODE.NAME}: Failed FAN count | Count of the number of chassis fans that are not operating within the recommended RPM range. | fas3220.cluster[nodeEnvFailedFanCount, "{#NODE.NAME}"] | SNMP_AGENT |
| Node {#NODE.NAME}: Failed FAN message | Text message describing current condition of chassis fans. This is useful only if envFailedFanCount is not zero. | fas3220.cluster[nodeEnvFailedFanMessage, "{#NODE.NAME}"] | SNMP_AGENT |
| Node {#NODE.NAME}: Degraded power supplies count | Count of the number of power supplies that are in degraded mode. | fas3220.cluster[nodeEnvFailedPowerSupplyCount, "{#NODE.NAME}"] | SNMP_AGENT |
| Node {#NODE.NAME}: Degraded power supplies message | Text message describing the state of any power supplies that are currently degraded. This is useful only if envFailedPowerSupplyCount is not zero. | fas3220.cluster[nodeEnvFailedPowerSupplyMessage, "{#NODE.NAME}"] | SNMP_AGENT |
| Node {#NODE.NAME}: Over-temperature | An indication of whether the hardware is currently operating outside of its recommended temperature range. The hardware will shutdown if the temperature exceeds critical thresholds. | fas3220.cluster[nodeEnvOverTemperature, "{#NODE.NAME}"] | SNMP_AGENT |
| Node {#NODE.NAME}: Health | Whether or not the node can communicate with the cluster. | fas3220.cluster[nodeHealth, "{#NODE.NAME}"] | SNMP_AGENT |
| Node {#NODE.NAME}: Location | Node Location. Same as sysLocation for a specific node. | fas3220.cluster[nodeLocation, "{#NODE.NAME}"] | SNMP_AGENT |
| Node {#NODE.NAME}: Model | Node Model. Same as productModel for a specific node. | fas3220.cluster[nodeModel, "{#NODE.NAME}"] | SNMP_AGENT |
| Node {#NODE.NAME}: NVRAM battery status | An indication of the current status of the NVRAM battery or batteries.<br>Batteries which are fully or partially discharged may not fully protect the system during a crash. The end-of-life status values are based on the manufacturer's recommended life for the batteries.<br>Possible values:<br>ok(1),<br>partiallyDischarged(2),<br>fullyDischarged(3),<br>notPresent(4),<br>nearEndOfLife(5),<br>atEndOfLife(6),<br>unknown(7),<br>overCharged(8),<br>fullyCharged(9). | fas3220.cluster[nodeNvramBatteryStatus, "{#NODE.NAME}"] | SNMP_AGENT |
| Node {#NODE.NAME}: Serial number | Node Serial Number. Same as productSerialNum for a specific node. | fas3220.cluster[nodeSerialNumber, "{#NODE.NAME}"] | SNMP_AGENT |
| Node {#NODE.NAME}: Uptime | Node uptime. Same as sysUpTime for a specific node. | fas3220.cluster[nodeUptime, "{#NODE.NAME}"] | SNMP_AGENT |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Node {#NODE.NAME}: Temperature is over than recommended | HIGH | The hardware will shutdown if the temperature exceeds critical thresholds. | last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeEnvOverTemperature, "{#NODE.NAME}"])=2 | [{"tag": "scope", "value": "availability"}] | no url |
| Node {#NODE.NAME}: Node can not communicate with the cluster | HIGH | no description | last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeHealth, "{#NODE.NAME}"])=0 | [{"tag": "scope", "value": "availability"}, {"tag": "scope", "value": "performance"}] | no url |
| Node {#NODE.NAME}: NVRAM battery status is not OK | AVERAGE | no description | last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeNvramBatteryStatus, "{#NODE.NAME}"])<>1 | [{"tag": "scope", "value": "availability"}] | no url |
| Node {#NODE.NAME}: Host has been restarted | INFO | Uptime is less than 10 minutes. | last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeUptime, "{#NODE.NAME}"])<10m | [{"tag": "scope", "value": "notice"}] | no url |
| Node {#NODE.NAME}: Degraded power supplies count is more than zero | AVERAGE | {{ITEM.VALUE2}.regsub("(.*)", \1)} | last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeEnvFailedPowerSupplyCount, "{#NODE.NAME}"])>0 and last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeEnvFailedPowerSupplyMessage, "{#NODE.NAME}"])=last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeEnvFailedPowerSupplyMessage, "{#NODE.NAME}"]) | [{"tag": "scope", "value": "availability"}] | no url |
| Node {#NODE.NAME}: Failed FAN count is over than zero | HIGH | {{ITEM.VALUE2}.regsub("(.*)", \1)} | last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeEnvFailedFanCount, "{#NODE.NAME}"])>0 and last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeEnvFailedFanMessage, "{#NODE.NAME}"])=last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeEnvFailedFanMessage, "{#NODE.NAME}"]) | [{"tag": "scope", "value": "availability"}, {"tag": "scope", "value": "performance"}] | no url |


<a name="discovery_cpu_discovery" />

## Discovery CPU discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Node {#NODE.NAME}: CPU utilization | The average, over the last minute, of the percentage of time that this processor was not idle. | fas3220.cpu[cDOTCpuBusyTimePerCent, "{#NODE.NAME}"] | SNMP_AGENT |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Node {#NODE.NAME}: High CPU utilization | WARNING | The CPU utilization is too high. The system might be slow to respond. | min(/NetApp FAS3220 by SNMP/fas3220.cpu[cDOTCpuBusyTimePerCent, "{#NODE.NAME}"],5m)>{$CPU.UTIL.CRIT} | [{"tag": "scope", "value": "capacity"}, {"tag": "scope", "value": "performance"}] | no url |


<a name="discovery_filesystems_discovery" />

## Discovery Filesystems discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| {#VSERVER}{#FSNAME}: Total space available | The total disk space that is free for use on {#FSNAME}. | fas3220.fs[df64AvailKBytes, "{#VSERVER}{#FSNAME}"] | SNMP_AGENT |
| {#VSERVER}{#FSNAME}: Total space | The total capacity in bytes for {#FSNAME}. | fas3220.fs[df64TotalKBytes, "{#VSERVER}{#FSNAME}"] | SNMP_AGENT |
| {#VSERVER}{#FSNAME}: Total space used | The total disk space that is in use on {#FSNAME}. | fas3220.fs[df64UsedKBytes, "{#VSERVER}{#FSNAME}"] | SNMP_AGENT |
| {#VSERVER}{#FSNAME}: Saved by compression percents | Provides the percentage of compression savings in a volume, which is ((compr_saved/used)) * 10(compr_saved + 0). This is only returned for volumes. | fas3220.fs[dfCompressSavedPercent, "{#VSERVER}{#FSNAME}"] | SNMP_AGENT |
| {#VSERVER}{#FSNAME}: Saved by deduplication percents | Provides the percentage of deduplication savings in a volume, which is ((dedup_saved/(dedup_saved + used)) * 100). This is only returned for volumes. | fas3220.fs[dfDedupeSavedPercent, "{#VSERVER}{#FSNAME}"] | SNMP_AGENT |
| {#VSERVER}{#FSNAME}: Used space percents | The percentage of disk space currently in use on {#FSNAME}. | fas3220.fs[dfPerCentKBytesCapacity, "{#VSERVER}{#FSNAME}"] | SNMP_AGENT |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| {#VSERVER}{#FSNAME}: Disk space is too low | HIGH | no description | min(/NetApp FAS3220 by SNMP/fas3220.fs[df64AvailKBytes, "{#VSERVER}{#FSNAME}"],{$FAS3220.FS.TIME:"{#FSNAME}"})<{$FAS3220.FS.AVAIL.MIN.CRIT:"{#FSNAME}"} and {$FAS3220.FS.USE.PCT:"{#FSNAME}"}=0 | [{"tag": "scope", "value": "capacity"}, {"tag": "scope", "value": "performance"}] | no url |
| {#VSERVER}{#FSNAME}: Disk space is too low | HIGH | no description | max(/NetApp FAS3220 by SNMP/fas3220.fs[dfPerCentKBytesCapacity, "{#VSERVER}{#FSNAME}"],{$FAS3220.FS.TIME:"{#FSNAME}"})>{$FAS3220.FS.PUSED.MAX.CRIT:"{#FSNAME}"} and {$FAS3220.FS.USE.PCT:"{#FSNAME}"}=1 | [{"tag": "scope", "value": "capacity"}, {"tag": "scope", "value": "performance"}] | no url |


<a name="discovery_ha_discovery" />

## Discovery HA discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Node {#NODE.NAME}: Cannot takeover cause | The reason node cannot take over it's HA partner {#PARTNER.NAME}.<br>Possible states:<br>  ok(1),<br>  unknownReason(2),<br>  disabledByOperator(3),<br>  interconnectOffline(4),<br>  disabledByPartner(5),<br>  takeoverFailed(6),<br>  mailboxIsInDegradedState(7),<br>  partnermailboxIsInUninitialisedState(8),<br>  mailboxVersionMismatch(9),<br>  nvramSizeMismatch(10),<br>  kernelVersionMismatch(11),<br>  partnerIsInBootingStage(12),<br>  diskshelfIsTooHot(13),<br>  partnerIsPerformingRevert(14),<br>  nodeIsPerformingRevert(15),<br>  sametimePartnerIsAlsoTryingToTakeUsOver(16),<br>  alreadyInTakenoverMode(17),<br>  nvramLogUnsynchronized(18),<br>  stateofBackupMailboxIsDoubtful(19). | fas3220.ha[haCannotTakeoverCause, "{#NODE.NAME}"] | SNMP_AGENT |
| Node {#NODE.NAME}: HA settings | High Availability configuration settings. The value notConfigured(1) indicates that the HA is not licensed. The thisNodeDead(5) setting indicates that this node has been takenover. | fas3220.ha[haSettings, "{#NODE.NAME}"] | SNMP_AGENT |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Node {#NODE.NAME}: Node cannot takeover it's HA partner {#PARTNER.NAME}. Reason: {ITEM.VALUE} | HIGH | Possible reasons:<br>  unknownReason(2),<br>  disabledByOperator(3),<br>  interconnectOffline(4),<br>  disabledByPartner(5),<br>  takeoverFailed(6),<br>  mailboxIsInDegradedState(7),<br>  partnermailboxIsInUninitialisedState(8),<br>  mailboxVersionMismatch(9),<br>  nvramSizeMismatch(10),<br>  kernelVersionMismatch(11),<br>  partnerIsInBootingStage(12),<br>  diskshelfIsTooHot(13),<br>  partnerIsPerformingRevert(14),<br>  nodeIsPerformingRevert(15),<br>  sametimePartnerIsAlsoTryingToTakeUsOver(16),<br>  alreadyInTakenoverMode(17),<br>  nvramLogUnsynchronized(18),<br>  stateofBackupMailboxIsDoubtful(19). | last(/NetApp FAS3220 by SNMP/fas3220.ha[haCannotTakeoverCause, "{#NODE.NAME}"])<>1 | [{"tag": "scope", "value": "availability"}, {"tag": "scope", "value": "performance"}] | no url |
| Node {#NODE.NAME}: HA is not licensed | AVERAGE | The value notConfigured(1) indicates that the HA is not licensed. | last(/NetApp FAS3220 by SNMP/fas3220.ha[haSettings, "{#NODE.NAME}"])=1 | [{"tag": "scope", "value": "availability"}, {"tag": "scope", "value": "performance"}] | no url |
| Node {#NODE.NAME}: Node has been taken over | HIGH | The thisNodeDead(5) setting indicates that this node has been takenover. | last(/NetApp FAS3220 by SNMP/fas3220.ha[haSettings, "{#NODE.NAME}"])=5 | [{"tag": "scope", "value": "availability"}, {"tag": "scope", "value": "performance"}] | no url |


<a name="discovery_network_ports_discovery" />

## Discovery Network ports discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Node {#NODE}: port {#IFNAME} ({#TYPE}): Inbound packets discarded | MIB: IF-MIB<br>The number of inbound packets that were chosen to be discarded even though no errors had been detected to prevent their being deliverable to a higher-layer protocol. One possible reason for discarding such a packet could be to free up buffer space. | fas3220.net.if[if64InDiscards, "{#NODE}", "{#IFNAME}"] | SNMP_AGENT |
| Node {#NODE}: port {#IFNAME} ({#TYPE}): Inbound packets with errors | MIB: IF-MIB<br>The number of inbound packets that contained errors preventing them from being deliverable to a higher-layer protocol. | fas3220.net.if[if64InErrors, "{#NODE}", "{#IFNAME}"] | SNMP_AGENT |
| Node {#NODE}: port {#IFNAME} ({#TYPE}): Bits received | The total number of octets received on the interface, including framing characters. | fas3220.net.if[if64InOctets, "{#NODE}", "{#IFNAME}"] | SNMP_AGENT |
| Node {#NODE}: port {#IFNAME} ({#TYPE}): Outbound packets discarded | MIB: IF-MIB<br>The number of outbound packets that were chosen to be discarded even though no errors had been detected to prevent their being transmitted. One possible reason for discarding such a packet could be to free up buffer space. | fas3220.net.if[if64OutDiscards, "{#NODE}", "{#IFNAME}"] | SNMP_AGENT |
| Node {#NODE}: port {#IFNAME} ({#TYPE}): Outbound packets with errors | MIB: IF-MIB<br>The number of outbound packets that could not be transmitted because of errors. | fas3220.net.if[if64OutErrors, "{#NODE}", "{#IFNAME}"] | SNMP_AGENT |
| Node {#NODE}: port {#IFNAME} ({#TYPE}): Bits sent | The total number of octets transmitted out of the interface, including framing characters. | fas3220.net.if[if64OutOctets, "{#NODE}", "{#IFNAME}"] | SNMP_AGENT |
| Node {#NODE}: port {#IFNAME} ({#TYPE}): Health degraded reason | The list of reasons why the port is marked as degraded. | fas3220.net.port[netportDegradedReason, "{#NODE}", "{#IFNAME}"] | SNMP_AGENT |
| Node {#NODE}: port {#IFNAME} ({#TYPE}): Health | The health status of the port. | fas3220.net.port[netportHealthStatus, "{#NODE}", "{#IFNAME}"] | SNMP_AGENT |
| Node {#NODE}: port {#IFNAME} ({#TYPE}): State | The link-state of the port. Normally it is either UP(2) or DOWN(3). | fas3220.net.port[netportLinkState, "{#NODE}", "{#IFNAME}"] | SNMP_AGENT |
| Node {#NODE}: port {#IFNAME} ({#TYPE}): Role | Role of the port. A port must have one of the following roles: cluster(1), data(2), mgmt(3), intercluster(4), cluster-mgmt(5) or undef(0). The cluster port is used to communicate to other node(s) in the cluster. The data port services clients' requests. It is where all the file requests come in. The management port is used by administrator to manage resources within a node. The intercluster port is used to communicate to other cluster. The cluster-mgmt port is used to manage resources within the cluster. The undef role is for the port that has not yet been assigned a role. | fas3220.net.port[netportRole, "{#NODE}", "{#IFNAME}"] | SNMP_AGENT |
| Node {#NODE}: port {#IFNAME} ({#TYPE}): Speed | The speed appears on the port. It can be either undef(0), auto(1), ten Mb/s(2), hundred Mb/s(3), one Gb/s(4), or ten Gb/s(5). | fas3220.net.port[netportSpeedOper, "{#NODE}", "{#IFNAME}"] | SNMP_AGENT |
| Node {#NODE}: port {#IFNAME} ({#TYPE}): Up by an administrator | Indicates whether the port status is set 'UP' by an administrator. | fas3220.net.port[netportUpAdmin, "{#NODE}", "{#IFNAME}"] | SNMP_AGENT |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Node {#NODE}: port {#IFNAME} ({#TYPE}): High error rate | WARNING | It recovers when it is below 80% of the `{$IF.ERRORS.WARN:"{#IFNAME}"}` threshold. | min(/NetApp FAS3220 by SNMP/fas3220.net.if[if64InErrors, "{#NODE}", "{#IFNAME}"],5m)>{$IF.ERRORS.WARN:"{#IFNAME}"}<br>or min(/NetApp FAS3220 by SNMP/fas3220.net.if[if64OutErrors, "{#NODE}", "{#IFNAME}"],5m)>{$IF.ERRORS.WARN:"{#IFNAME}"} | [{"tag": "scope", "value": "performance"}] | no url |
| Node {#NODE}: port {#IFNAME} ({#TYPE}): Link down | AVERAGE | Link state is not UP and the port status is set 'UP' by an administrator. | last(/NetApp FAS3220 by SNMP/fas3220.net.port[netportLinkState, "{#NODE}", "{#IFNAME}"])<>2 and last(/NetApp FAS3220 by SNMP/fas3220.net.port[netportUpAdmin, "{#NODE}", "{#IFNAME}"])=1 | [{"tag": "scope", "value": "availability"}, {"tag": "scope", "value": "performance"}] | no url |
| Node {#NODE}: port {#IFNAME} ({#TYPE}): Port is not healthy | INFO | {{ITEM.LASTVALUE2}.regsub("(.*)", \1)} | last(/NetApp FAS3220 by SNMP/fas3220.net.port[netportHealthStatus, "{#NODE}", "{#IFNAME}"])<>0 and length(last(/NetApp FAS3220 by SNMP/fas3220.net.port[netportDegradedReason, "{#NODE}", "{#IFNAME}"]))>0 | [{"tag": "scope", "value": "availability"}, {"tag": "scope", "value": "performance"}] | no url |

