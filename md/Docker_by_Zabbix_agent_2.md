# Docker by Zabbix agent 2 template description

Get Docker engine metrics from plugin for the New Zabbix Agent (zabbix-agent2).

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/435429-discussion-thread-for-official-zabbix-template-docker

Generated by official Zabbix template tool "Templator"

## Summary
* [items](#items)
* [macros](#macros)
* [triggers](#triggers)
* [discoveries](#discoveries)
  * [Discovery Containers discovery ](#discovery_containers_discovery)
  * [Discovery Images discovery ](#discovery_images_discovery)

<a name="items"></a>

## Items
| name | description | key | type | delay |
| ------------- |------------- |------------- |------------- |------------- |
| Architecture | no description | docker.architecture | DEPENDENT | 0 |
| Cgroup driver | no description | docker.cgroup_driver | DEPENDENT | 0 |
| Get containers | no description | docker.containers | no type | no delay |
| Containers paused | Total number of containers paused on this host. | docker.containers.paused | DEPENDENT | 0 |
| Containers running | Total number of containers running on this host. | docker.containers.running | DEPENDENT | 0 |
| Containers stopped | Total number of containers stopped on this host. | docker.containers.stopped | DEPENDENT | 0 |
| Containers total | Total number of containers on this host. | docker.containers.total | DEPENDENT | 0 |
| Containers size | no description | docker.containers_size | DEPENDENT | 0 |
| CPU CFS Period enabled | https://docs.docker.com/config/containers/resource_constraints/#configure-the-default-cfs-scheduler | docker.cpu_cfs_period.enabled | DEPENDENT | 0 |
| CPU CFS Quota enabled | https://docs.docker.com/config/containers/resource_constraints/#configure-the-default-cfs-scheduler | docker.cpu_cfs_quota.enabled | DEPENDENT | 0 |
| CPU Set enabled | https://docs.docker.com/config/containers/resource_constraints/#configure-the-default-cfs-scheduler | docker.cpu_set.enabled | DEPENDENT | 0 |
| CPU Shares enabled | https://docs.docker.com/config/containers/resource_constraints/#configure-the-default-cfs-scheduler | docker.cpu_shares.enabled | DEPENDENT | 0 |
| Get data_usage | no description | docker.data_usage | no type | no delay |
| Debug enabled | no description | docker.debug.enabled | DEPENDENT | 0 |
| Default runtime | no description | docker.default_runtime | DEPENDENT | 0 |
| Storage driver | Docker storage driver.<br>https://docs.docker.com/storage/storagedriver/ | docker.driver | DEPENDENT | 0 |
| Goroutines | Number of goroutines. | docker.goroutines | DEPENDENT | 0 |
| Get images | no description | docker.images | no type | no delay |
| Images available | Number of top-level images. | docker.images.top_level | DEPENDENT | 0 |
| Images total | Number of images with intermediate image layers. | docker.images.total | DEPENDENT | 0 |
| Images size | no description | docker.images_size | DEPENDENT | 0 |
| Get info | no description | docker.info | no type | no delay |
| IPv4 Forwarding enabled | no description | docker.ipv4_forwarding.enabled | DEPENDENT | 0 |
| Kernel memory enabled | no description | docker.kernel_mem.enabled | DEPENDENT | 0 |
| Kernel memory TCP enabled | no description | docker.kernel_mem_tcp.enabled | DEPENDENT | 0 |
| Kernel version | no description | docker.kernel_version | DEPENDENT | 0 |
| Layers size | no description | docker.layers_size | DEPENDENT | 0 |
| Live restore enabled | no description | docker.live_restore.enabled | DEPENDENT | 0 |
| Logging driver | no description | docker.logging_driver | DEPENDENT | 0 |
| Memory total | no description | docker.mem.total | DEPENDENT | 0 |
| Memory limit enabled | no description | docker.mem_limit.enabled | DEPENDENT | 0 |
| Name | no description | docker.name | DEPENDENT | 0 |
| NCPU | no description | docker.ncpu | DEPENDENT | 0 |
| NEvents listener | no description | docker.nevents_listener | DEPENDENT | 0 |
| Nfd | Number of used File Descriptors. | docker.nfd | DEPENDENT | 0 |
| OomKill disabled | no description | docker.oomkill.disabled | DEPENDENT | 0 |
| Operating system | no description | docker.operating_system | DEPENDENT | 0 |
| OS type | no description | docker.os_type | DEPENDENT | 0 |
| Pids limit enabled | no description | docker.pids_limit.enabled | DEPENDENT | 0 |
| Ping | no description | docker.ping | no type | no delay |
| Docker root dir | no description | docker.root_dir | DEPENDENT | 0 |
| Server version | no description | docker.server_version | DEPENDENT | 0 |
| Swap limit enabled | no description | docker.swap_limit.enabled | DEPENDENT | 0 |
| Volumes size | no description | docker.volumes_size | DEPENDENT | 0 |


<a name="macros"></a>

## Macros
| macro | value |
| ------------- |------------- |
| {$DOCKER.LLD.FILTER.CONTAINER.MATCHES} | .* |
| {$DOCKER.LLD.FILTER.CONTAINER.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$DOCKER.LLD.FILTER.IMAGE.MATCHES} | .* |
| {$DOCKER.LLD.FILTER.IMAGE.NOT_MATCHES} | CHANGE_IF_NEEDED |


<a name="triggers"></a>

## Triggers
| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Failed to fetch info data | WARNING | Zabbix has not received data for items for the last 30 minutes. | nodata(/Docker by Zabbix agent 2/docker.name,30m)=1 | [{"tag": "scope", "value": "availability"}] | no url |
| Service is down | AVERAGE | no description | last(/Docker by Zabbix agent 2/docker.ping)=0 | [{"tag": "scope", "value": "availability"}] | no url |
| Version has changed | INFO | Docker version has changed. Acknowledge to close the problem manually. | last(/Docker by Zabbix agent 2/docker.server_version,#1)<>last(/Docker by Zabbix agent 2/docker.server_version,#2) and length(last(/Docker by Zabbix agent 2/docker.server_version))>0 | [{"tag": "scope", "value": "notice"}] | no url |


<a name="discoveries"></a>

## Discoveries
| name | key | description | type | lifetime | delay |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Containers discovery | docker.containers.discovery[false] | Discovery of containers metrics.<br><br>Parameter:<br>true  - Returns all containers<br>false - Returns only running containers | no type | no lifetime | 15m |
| Images discovery | docker.images.discovery | Discovery of images metrics. | no type | no lifetime | 15m |


<a name="discovery_containers_discovery" />

## Discovery Containers discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Container {#NAME}: Created | no description | docker.container_info.created["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Finished at | Time at which the container last terminated. | docker.container_info.finished["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Image | no description | docker.container_info.image["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Restart count | no description | docker.container_info.restart_count["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Started at | no description | docker.container_info.started["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Dead | no description | docker.container_info.state.dead["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Error | no description | docker.container_info.state.error["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Exit code | no description | docker.container_info.state.exitcode["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Health failing streak | no description | docker.container_info.state.health.failing["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Health status | Container's `HEALTHCHECK`. | docker.container_info.state.health["{#NAME}"] | DEPENDENT |
| Container {#NAME}: OOMKilled | no description | docker.container_info.state.oomkilled["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Paused | no description | docker.container_info.state.paused["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Pid | no description | docker.container_info.state.pid["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Restarting | no description | docker.container_info.state.restarting["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Running | no description | docker.container_info.state.running["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Status | no description | docker.container_info.state.status["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Get info | Return low-level information about a container. | docker.container_info["{#NAME}",full] | no type |
| Container {#NAME}: CPU percent usage | no description | docker.container_stats.cpu_pct_usage["{#NAME}"] | DEPENDENT |
| Container {#NAME}: CPU kernelmode usage per second | no description | docker.container_stats.cpu_usage.kernel.rate["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Throttled periods | Number of periods when the container hits its throttling limit. | docker.container_stats.cpu_usage.throttled_periods["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Throttled time | Aggregate time the container was throttled for in nanoseconds. | docker.container_stats.cpu_usage.throttled_time["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Throttling periods | Number of periods with throttling active. | docker.container_stats.cpu_usage.throttling_periods["{#NAME}"] | DEPENDENT |
| Container {#NAME}: CPU total usage per second | no description | docker.container_stats.cpu_usage.total.rate["{#NAME}"] | DEPENDENT |
| Container {#NAME}: CPU usermode usage per second | no description | docker.container_stats.cpu_usage.user.rate["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Memory commit bytes | no description | docker.container_stats.memory.commit_bytes["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Memory commit peak bytes | no description | docker.container_stats.memory.commit_peak_bytes["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Memory maximum usage | no description | docker.container_stats.memory.max_usage["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Memory private working set | no description | docker.container_stats.memory.private_working_set["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Memory usage | no description | docker.container_stats.memory.usage["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Online CPUs | no description | docker.container_stats.online_cpus["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Current PIDs count | Current number of PIDs the container has created. | docker.container_stats.pids_stats.current["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Get stats | Get container stats based on resource usage. | docker.container_stats["{#NAME}"] | no type |
| Container {#NAME}: Networks bytes received per second | no description | docker.networks.rx_bytes["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Networks incoming packets dropped per second | no description | docker.networks.rx_dropped["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Networks errors received per second | no description | docker.networks.rx_errors["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Networks packets received per second | no description | docker.networks.rx_packets["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Networks bytes sent per second | no description | docker.networks.tx_bytes["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Networks outgoing packets dropped per second | no description | docker.networks.tx_dropped["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Networks errors sent per second | no description | docker.networks.tx_errors["{#NAME}"] | DEPENDENT |
| Container {#NAME}: Networks packets sent per second | no description | docker.networks.tx_packets["{#NAME}"] | DEPENDENT |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Container {#NAME}: An error has occurred in the container | WARNING | Container {#NAME} has an error. Acknowledge to close the problem manually. | last(/Docker by Zabbix agent 2/docker.container_info.state.error["{#NAME}"],#1)<>last(/Docker by Zabbix agent 2/docker.container_info.state.error["{#NAME}"],#2) and length(last(/Docker by Zabbix agent 2/docker.container_info.state.error["{#NAME}"]))>0 | [{"tag": "scope", "value": "notice"}] | no url |
| Container {#NAME}: Health state container is unhealthy | HIGH | Container health state is unhealthy. | count(/Docker by Zabbix agent 2/docker.container_info.state.health["{#NAME}"],2m,,2)>=2 | [{"tag": "scope", "value": "availability"}] | no url |
| Container {#NAME}: Container has been stopped with error code | AVERAGE | no description | last(/Docker by Zabbix agent 2/docker.container_info.state.exitcode["{#NAME}"])>0 and last(/Docker by Zabbix agent 2/docker.container_info.state.running["{#NAME}"])=0 | [{"tag": "scope", "value": "availability"}] | no url |


<a name="discovery_images_discovery" />

## Discovery Images discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Image {#NAME}: Created | no description | docker.image.created["{#ID}"] | DEPENDENT |
| Image {#NAME}: Size | no description | docker.image.size["{#ID}"] | DEPENDENT |

