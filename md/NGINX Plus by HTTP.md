# NGINX Plus by HTTP template description

Get Nginx Plus metrics by HTTP agent.
Metrics are collected by requests to Nginx Plus API.
Don't forget to change macros {$NGINX.API.ENDPOINT}.

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback

Generated by official Zabbix template tool "Templator"

## Summary
* [items](#items)
* [macros](#macros)
* [triggers](#triggers)
* [discoveries](#discoveries)
  * [Discovery HTTP location zones discovery ](#discovery_http_location_zones_discovery)
  * [Discovery HTTP server zones discovery ](#discovery_http_server_zones_discovery)
  * [Discovery HTTP upstream peers discovery ](#discovery_http_upstream_peers_discovery)
  * [Discovery HTTP upstreams discovery ](#discovery_http_upstreams_discovery)
  * [Discovery Resolvers discovery ](#discovery_resolvers_discovery)
  * [Discovery Stream server zones discovery ](#discovery_stream_server_zones_discovery)
  * [Discovery Stream upstream peers discovery ](#discovery_stream_upstream_peers_discovery)
  * [Discovery Stream upstreams discovery ](#discovery_stream_upstreams_discovery)

<a name="items" />

## Items
| name | description | key | type | delay |
| ------------- |------------- |------------- |------------- |------------- |
| Get connections | Returns the statistics of client connections. | nginx.connections | HTTP_AGENT | no delay |
| Connections accepted, rate | The total number of accepted client connections per second. | nginx.connections.accepted.rate | DEPENDENT | 0 |
| Connections active | The current number of active client connections. | nginx.connections.active | DEPENDENT | 0 |
| Connections dropped | The total number of dropped client connections. | nginx.connections.dropped | DEPENDENT | 0 |
| Connections idle | The current number of idle client connections. | nginx.connections.idle | DEPENDENT | 0 |
| Get HTTP location zones | Returns the status information for each HTTP location zone. | nginx.http.location_zones | HTTP_AGENT | no delay |
| Get HTTP zones | Returns the status information for each HTTP server zone. | nginx.http.server_zones | HTTP_AGENT | no delay |
| Get HTTP upstreams | Returns the status of each HTTP upstream server group and its servers. | nginx.http.upstreams | HTTP_AGENT | no delay |
| Get info | Return status of the NGINX running instance. | nginx.info | HTTP_AGENT | no delay |
| Address | The address of the server that accepted status request. | nginx.info.address | DEPENDENT | 0 |
| Get info error | The description of NGINX errors. | nginx.info.error | DEPENDENT | 0 |
| Generation | The total number of configuration reloads. | nginx.info.generation | DEPENDENT | 0 |
| Uptime | The server uptime. | nginx.info.uptime | DEPENDENT | 0 |
| Version | A version number of NGINX. | nginx.info.version | DEPENDENT | 0 |
| Get requests | Returns the status of the client's HTTP requests. | nginx.requests | HTTP_AGENT | no delay |
| Requests current | The current number of client requests. | nginx.requests.current | DEPENDENT | 0 |
| Requests total, rate | The total number of client requests per second. | nginx.requests.total.rate | DEPENDENT | 0 |
| Get resolvers | Returns the status information for each Resolver zone. | nginx.resolvers | HTTP_AGENT | no delay |
| Get SSL | Returns the SSL statistics. | nginx.ssl | HTTP_AGENT | no delay |
| SSL handshakes, rate | The total number of successful SSL handshakes per second. | nginx.ssl.handshakes.rate | DEPENDENT | 0 |
| SSL handshakes failed, rate | The total number of failed SSL handshakes per second. | nginx.ssl.handshakes_failed.rate | DEPENDENT | 0 |
| SSL session reuses, rate | The total number of session reuses during SSL handshake per second. | nginx.ssl.session_reuses.rate | DEPENDENT | 0 |
| Get Stream server zones | Returns the status information for each server zone configured in the "stream" directive. | nginx.stream.server_zones | HTTP_AGENT | no delay |
| Get Stream upstreams | Returns status of each stream upstream server group and its servers. | nginx.stream.upstreams | HTTP_AGENT | no delay |


<a name="macros" />

## Macros
| macro | value |
| ------------- |------------- |
| {$NGINX.API.ENDPOINT} | no value |
| {$NGINX.DROP_RATE.MAX.WARN} | 1 |
| {$NGINX.HTTP.UPSTREAM.4XX.MAX.WARN} | 5 |
| {$NGINX.HTTP.UPSTREAM.5XX.MAX.WARN} | 5 |
| {$NGINX.LLD.FILTER.HTTP.LOCATION.ZONE.MATCHES} | .* |
| {$NGINX.LLD.FILTER.HTTP.LOCATION.ZONE.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$NGINX.LLD.FILTER.HTTP.UPSTREAM.MATCHES} | .* |
| {$NGINX.LLD.FILTER.HTTP.UPSTREAM.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$NGINX.LLD.FILTER.HTTP.ZONE.MATCHES} | .* |
| {$NGINX.LLD.FILTER.HTTP.ZONE.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$NGINX.LLD.FILTER.RESOLVER.MATCHES} | .* |
| {$NGINX.LLD.FILTER.RESOLVER.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$NGINX.LLD.FILTER.STREAM.UPSTREAM.MATCHES} | .* |
| {$NGINX.LLD.FILTER.STREAM.UPSTREAM.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$NGINX.LLD.FILTER.STREAM.ZONE.MATCHES} | .* |
| {$NGINX.LLD.FILTER.STREAM.ZONE.NOT_MATCHES} | CHANGE_IF_NEEDED |


<a name="triggers" />

## Triggers
| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| High connections drop rate | WARNING | The rate of dropped connections is greater than `{$NGINX.DROP_RATE.MAX.WARN}` for the last 5 minutes. | min(/NGINX Plus by HTTP/nginx.connections.dropped,5m) > {$NGINX.DROP_RATE.MAX.WARN} | [{"tag": "scope", "value": "performance"}] | no url |
| Server response error | HIGH | no description | length(last(/NGINX Plus by HTTP/nginx.info.error))>0 | [{"tag": "scope", "value": "availability"}] | no url |
| Failed to fetch info data | WARNING | Zabbix has not received any data for metrics for the last 30 minutes | nodata(/NGINX Plus by HTTP/nginx.info.uptime,30m)=1 | [{"tag": "scope", "value": "availability"}] | no url |
| Host has been restarted | INFO | Uptime is less than 10 minutes. | last(/NGINX Plus by HTTP/nginx.info.uptime)<10m | [{"tag": "scope", "value": "notice"}] | no url |
| Version has changed | INFO | The Nginx version has changed. Acknowledge to close the problem manually. | last(/NGINX Plus by HTTP/nginx.info.version,#1)<>last(/NGINX Plus by HTTP/nginx.info.version,#2) and length(last(/NGINX Plus by HTTP/nginx.info.version))>0 | [{"tag": "scope", "value": "notice"}] | no url |


<a name="discoveries" />

## Discoveries
| name | key | description | type | lifetime | delay |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| HTTP location zones discovery | nginx.http.location_zones.discovery | no description | DEPENDENT | no lifetime | 0 |
| HTTP server zones discovery | nginx.http.server_zones.discovery | no description | DEPENDENT | no lifetime | 0 |
| HTTP upstream peers discovery | nginx.http.upstream.peers.discovery | no description | DEPENDENT | no lifetime | 0 |
| HTTP upstreams discovery | nginx.http.upstreams.discovery | no description | DEPENDENT | no lifetime | 0 |
| Resolvers discovery | nginx.resolvers.discovery | no description | DEPENDENT | no lifetime | 0 |
| Stream server zones discovery | nginx.stream.server_zones.discovery | no description | DEPENDENT | no lifetime | 0 |
| Stream upstream peers discovery | nginx.stream.upstream.peers.discovery | no description | DEPENDENT | no lifetime | 0 |
| Stream upstreams discovery | nginx.stream.upstreams.discovery | no description | DEPENDENT | no lifetime | 0 |


<a name="discovery_http_location_zones_discovery" />

## Discovery HTTP location zones discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| HTTP location zone [{#NAME}]: Discarded, rate | The total number of requests completed without sending a response per second. | nginx.http.location_zones.discarded.rate[{#NAME}] | DEPENDENT |
| HTTP location zone [{#NAME}]: Raw data | The raw data of the location zone with the name `{#NAME}`. | nginx.http.location_zones.raw[{#NAME}] | DEPENDENT |
| HTTP location zone [{#NAME}]: Received, rate | The total number of bytes received from clients per second. | nginx.http.location_zones.received.rate[{#NAME}] | DEPENDENT |
| HTTP location zone [{#NAME}]: Requests, rate | The total number of client requests received from clients per second. | nginx.http.location_zones.requests.rate[{#NAME}] | DEPENDENT |
| HTTP location zone [{#NAME}]: Responses 1xx, rate | The number of responses with `1xx` status code per second. | nginx.http.location_zones.responses.1xx.rate[{#NAME}] | DEPENDENT |
| HTTP location zone [{#NAME}]: Responses 2xx, rate | The number of responses with `2xx` status code per second. | nginx.http.location_zones.responses.2xx.rate[{#NAME}] | DEPENDENT |
| HTTP location zone [{#NAME}]: Responses 3xx, rate | The number of responses with `3xx` status code per second. | nginx.http.location_zones.responses.3xx.rate[{#NAME}] | DEPENDENT |
| HTTP location zone [{#NAME}]: Responses 4xx, rate | The number of responses with `4xx` status code per second. | nginx.http.location_zones.responses.4xx.rate[{#NAME}] | DEPENDENT |
| HTTP location zone [{#NAME}]: Responses 5xx, rate | The number of responses with `5xx` status code per second. | nginx.http.location_zones.responses.5xx.rate[{#NAME}] | DEPENDENT |
| HTTP location zone [{#NAME}]: Responses total, rate | The total number of responses sent to clients per second. | nginx.http.location_zones.responses.total.rate[{#NAME}] | DEPENDENT |
| HTTP location zone [{#NAME}]: Sent, rate | The total number of bytes sent to clients per second. | nginx.http.location_zones.sent.rate[{#NAME}] | DEPENDENT |


<a name="discovery_http_server_zones_discovery" />

## Discovery HTTP server zones discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| HTTP server zone [{#NAME}]: Discarded, rate | The total number of requests completed without sending a response per second. | nginx.http.server_zones.discarded.rate[{#NAME}] | DEPENDENT |
| HTTP server zone [{#NAME}]: Processing | The number of client requests that are currently being processed. | nginx.http.server_zones.processing[{#NAME}] | DEPENDENT |
| HTTP server zone [{#NAME}]: Raw data | The raw data of the HTTP server zone with the name `{#NAME}` . | nginx.http.server_zones.raw[{#NAME}] | DEPENDENT |
| HTTP server zone [{#NAME}]: Received, rate | The total number of bytes received from clients per second. | nginx.http.server_zones.received.rate[{#NAME}] | DEPENDENT |
| HTTP server zone [{#NAME}]: Requests, rate | The total number of client requests received from clients per second. | nginx.http.server_zones.requests.rate[{#NAME}] | DEPENDENT |
| HTTP server zone [{#NAME}]: Responses 1xx, rate | The number of responses with `1xx` status code per second. | nginx.http.server_zones.responses.1xx.rate[{#NAME}] | DEPENDENT |
| HTTP server zone [{#NAME}]: Responses 2xx, rate | The number of responses with `2xx` status code per second. | nginx.http.server_zones.responses.2xx.rate[{#NAME}] | DEPENDENT |
| HTTP server zone [{#NAME}]: Responses 3xx, rate | The number of responses with `3xx` status code per second. | nginx.http.server_zones.responses.3xx.rate[{#NAME}] | DEPENDENT |
| HTTP server zone [{#NAME}]: Responses 4xx, rate | The number of responses with `4xx` status code per second. | nginx.http.server_zones.responses.4xx.rate[{#NAME}] | DEPENDENT |
| HTTP server zone [{#NAME}]: Responses 5xx, rate | The number of responses with `5xx` status code per second. | nginx.http.server_zones.responses.5xx.rate[{#NAME}] | DEPENDENT |
| HTTP server zone [{#NAME}]: Responses total, rate | The total number of responses sent to clients per second. | nginx.http.server_zones.responses.total.rate[{#NAME}] | DEPENDENT |
| HTTP server zone [{#NAME}]: Sent, rate | The total number of bytes sent to clients per second. | nginx.http.server_zones.sent.rate[{#NAME}] | DEPENDENT |


<a name="discovery_http_upstream_peers_discovery" />

## Discovery HTTP upstream peers discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Active | The current number of active connections. | nginx.http.upstream.peer.active[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Fails, rate | The total number of unsuccessful attempts to communicate with the server per second. | nginx.http.upstream.peer.fails.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Header time | The average time to get the response header from the server. | nginx.http.upstream.peer.header_time.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Health checks, check | The total number of health check requests made. | nginx.http.upstream.peer.health_checks.checks[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Health checks, fails | The number of failed health checks. | nginx.http.upstream.peer.health_checks.fails[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Health checks, unhealthy | Displays how many times the server has become `unhealthy` (the state - “unhealthy”. | nginx.http.upstream.peer.health_checks.unhealthy[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Raw data | The raw data of the HTTP upstream with the name `[{#UPSTREAM}]`and peer with the name`[{#PEER}]`. | nginx.http.upstream.peer.raw[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Received, rate | The total number of bytes received from this server per second. | nginx.http.upstream.peer.received.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Requests, rate | The total number of client requests forwarded to this server per second. | nginx.http.upstream.peer.requests.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Responses 1xx, rate | The number of responses with `1xx` status code per second. | nginx.http.upstream.peer.responses.1xx.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Responses 2xx, rate | The number of responses with `2xx` status code per second. | nginx.http.upstream.peer.responses.2xx.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Responses 3xx, rate | The number of responses with `3xx` status code per second. | nginx.http.upstream.peer.responses.3xx.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Responses 4xx, rate | The number of responses with `4xx` status code per second. | nginx.http.upstream.peer.responses.4xx.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Responses 5xx, rate | The number of responses with `5xx` status code per second. | nginx.http.upstream.peer.responses.5xx.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Responses total, rate | The total number of responses obtained from this server. | nginx.http.upstream.peer.responses.total.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Response time | The average time to get the full response from the server. | nginx.http.upstream.peer.response_time.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Sent, rate | The total number of bytes sent to this server per second. | nginx.http.upstream.peer.sent.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: State | The current state, which may be one of “up”, “draining”, “down”, “unavail”, “checking”, and “unhealthy”. | nginx.http.upstream.peer.state[{#UPSTREAM},{#PEER}] | DEPENDENT |
| HTTP upstream [{#UPSTREAM}] peer [{#PEER}]: Unavail | Displays how many times the server has become unavailable for client requests (the state - “unavail”) due to the number of unsuccessful attempts reaching the `max_fails` threshold. | nginx.http.upstream.peer.unavail.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| HTTP upstream server is not in UP or DOWN state. | WARNING | no description | find(/NGINX Plus by HTTP/nginx.http.upstream.peer.state[{#UPSTREAM},{#PEER}],,"like","up")=0 and find(/NGINX Plus by HTTP/nginx.http.upstream.peer.state[{#UPSTREAM},{#PEER}],,"like","down")=0 | [{"tag": "scope", "value": "availability"}] | no url |
| Too many HTTP requests with code 4xx | WARNING | no description | sum(/NGINX Plus by HTTP/nginx.http.upstream.peer.responses.4xx.rate[{#UPSTREAM},{#PEER}],5m) > (sum(/NGINX Plus by HTTP/nginx.http.upstream.peer.responses.total.rate[{#UPSTREAM},{#PEER}],5m)*({$NGINX.HTTP.UPSTREAM.4XX.MAX.WARN}/100)) | [{"tag": "scope", "value": "performance"}] | no url |
| Too many HTTP requests with code 5xx | HIGH | no description | sum(/NGINX Plus by HTTP/nginx.http.upstream.peer.responses.5xx.rate[{#UPSTREAM},{#PEER}],5m) > (sum(/NGINX Plus by HTTP/nginx.http.upstream.peer.responses.total.rate[{#UPSTREAM},{#PEER}],5m)*({$NGINX.HTTP.UPSTREAM.5XX.MAX.WARN}/100)) | [{"tag": "scope", "value": "performance"}] | no url |


<a name="discovery_http_upstreams_discovery" />

## Discovery HTTP upstreams discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| HTTP upstream [{#NAME}]: Keepalive | The current number of idle keepalive connections. | nginx.http.upstreams.keepalive[{#NAME}] | DEPENDENT |
| HTTP upstream [{#NAME}]: Raw data | The raw data of the HTTP upstream with the name `{#NAME}`. | nginx.http.upstreams.raw[{#NAME}] | DEPENDENT |
| HTTP upstream [{#NAME}]: Zombies | The current number of servers removed from the group but still processing active client requests. | nginx.http.upstreams.zombies[{#NAME}] | DEPENDENT |
| HTTP upstream [{#NAME}]: Zone | The name of the shared memory zone that keeps the group's configuration and run-time state. | nginx.http.upstreams.zone[{#NAME}] | DEPENDENT |


<a name="discovery_resolvers_discovery" />

## Discovery Resolvers discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Resolver [{#NAME}]: Raw data | The raw data of the `Resolver` with the name `{#NAME}`. | nginx.resolvers.raw[{#NAME}] | DEPENDENT |
| Resolver [{#NAME}]: Requests addr, rate | The total number of requests to resolve addresses to names per second. | nginx.resolvers.requests.addr.rate[{#NAME}] | DEPENDENT |
| Resolver [{#NAME}]: Requests name, rate | The total number of requests to resolve names to addresses per second. | nginx.resolvers.requests.name.rate[{#NAME}] | DEPENDENT |
| Resolver [{#NAME}]: Requests srv, rate | The total number of requests to resolve SRV records per second. | nginx.resolvers.requests.srv.rate[{#NAME}] | DEPENDENT |
| Resolver [{#NAME}]: Responses formerr, rate | The total number of `FORMERR` (format error) responses per second. | nginx.resolvers.responses.formerr.rate[{#NAME}] | DEPENDENT |
| Resolver [{#NAME}]: Responses noerror, rate | The total number of successful responses per second. | nginx.resolvers.responses.noerror.rate[{#NAME}] | DEPENDENT |
| Resolver [{#NAME}]: Responses notimp, rate | The total number of `NOTIMP` (unimplemented) responses per second. | nginx.resolvers.responses.notimp.rate[{#NAME}] | DEPENDENT |
| Resolver [{#NAME}]: Responses nxdomain, rate | The total number of `NXDOMAIN` (host not found) responses per second. | nginx.resolvers.responses.nxdomain.rate[{#NAME}] | DEPENDENT |
| Resolver [{#NAME}]: Responses refused, rate | The total number of `REFUSED` (operation refused) responses per second. | nginx.resolvers.responses.refused.rate[{#NAME}] | DEPENDENT |
| Resolver [{#NAME}]: Responses servfail, rate | The total number of `SERVFAIL` (server failure) responses per second. | nginx.resolvers.responses.servfail.rate[{#NAME}] | DEPENDENT |
| Resolver [{#NAME}]: Responses timedout, rate | The total number of timed out requests per second. | nginx.resolvers.responses.timedout.rate[{#NAME}] | DEPENDENT |
| Resolver [{#NAME}]: Responses unknown, rate | The total number of requests completed with an unknown error per second. | nginx.resolvers.responses.unknown.rate[{#NAME}] | DEPENDENT |


<a name="discovery_stream_server_zones_discovery" />

## Discovery Stream server zones discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Stream server zone [{#NAME}]: Connections, rate | The total number of connections accepted from clients per second. | nginx.stream.server_zones.connections.rate[{#NAME}] | DEPENDENT |
| Stream server zone [{#NAME}]: Discarded, rate | The total number of connections completed without creating a session per second. | nginx.stream.server_zones.discarded.rate[{#NAME}] | DEPENDENT |
| Stream server zone [{#NAME}]: Processing | The number of client connections that are currently being processed. | nginx.stream.server_zones.processing[{#NAME}] | DEPENDENT |
| Stream server zone [{#NAME}]: Raw data | The raw data of server zone with the name `{#NAME}`, configured in the "stream" directive. | nginx.stream.server_zones.raw[{#NAME}] | DEPENDENT |
| Stream server zone [{#NAME}]: Received, rate | The total number of bytes received from clients per second. | nginx.stream.server_zones.received.rate[{#NAME}] | DEPENDENT |
| Stream server zone [{#NAME}]: Sent, rate | The total number of bytes sent to clients per second. | nginx.stream.server_zones.sent.rate[{#NAME}] | DEPENDENT |
| Stream server zone [{#NAME}]: Sessions 2xx, rate | The total number of sessions completed with status code `2xx` per second. | nginx.stream.server_zones.sessions.2xx.rate[{#NAME}] | DEPENDENT |
| Stream server zone [{#NAME}]: Sessions 4xx, rate | The total number of sessions completed with status code `4xx` per second. | nginx.stream.server_zones.sessions.4xx.rate[{#NAME}] | DEPENDENT |
| Stream server zone [{#NAME}]: Sessions 5xx, rate | The total number of sessions completed with status code `5xx` per second. | nginx.stream.server_zones.sessions.5xx.rate[{#NAME}] | DEPENDENT |
| Stream server zone [{#NAME}]: Sessions total, rate | The total number of completed client sessions per second. | nginx.stream.server_zones.sessions.total.rate[{#NAME}] | DEPENDENT |


<a name="discovery_stream_upstream_peers_discovery" />

## Discovery Stream upstream peers discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Stream upstream [{#UPSTREAM}] peer [{#PEER}]: Active | The current number of connections. | nginx.stream.upstream.peer.active[{#UPSTREAM},{#PEER}] | DEPENDENT |
| Stream upstream [{#UPSTREAM}] peer [{#PEER}]: Connections | The total number of client connections forwarded to this server. | nginx.stream.upstream.peer.connections.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| Stream upstream [{#UPSTREAM}] peer [{#PEER}]: Connect time | The average time to connect to the upstream server. | nginx.stream.upstream.peer.connect_time.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| Stream upstream [{#UPSTREAM}] peer [{#PEER}]: Fails, rate | The total number of unsuccessful attempts to communicate with the server per second. | nginx.stream.upstream.peer.fails.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| Stream upstream [{#UPSTREAM}] peer [{#PEER}]: First byte time | The average time to receive the first byte of data. | nginx.stream.upstream.peer.first_byte_time.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| Stream upstream [{#UPSTREAM}] peer [{#PEER}]: Health checks, check | The total number of health check requests made. | nginx.stream.upstream.peer.health_checks.checks[{#UPSTREAM},{#PEER}] | DEPENDENT |
| Stream upstream [{#UPSTREAM}] peer [{#PEER}]: Health checks, fails | The number of failed health checks. | nginx.stream.upstream.peer.health_checks.fails[{#UPSTREAM},{#PEER}] | DEPENDENT |
| Stream upstream [{#UPSTREAM}] peer [{#PEER}]: Health checks, unhealthy | Displays how many times the server has become `unhealthy` (the state - “unhealthy”). | nginx.stream.upstream.peer.health_checks.unhealthy[{#UPSTREAM},{#PEER}] | DEPENDENT |
| Stream upstream [{#UPSTREAM}] peer [{#PEER}]: Raw data | The raw data of the upstream with the name `[{#UPSTREAM}]`and peer with the name`[{#PEER}]`, configured in the "stream" directive. | nginx.stream.upstream.peer.raw[{#UPSTREAM},{#PEER}] | DEPENDENT |
| Stream upstream [{#UPSTREAM}] peer [{#PEER}]: Received, rate | The total number of bytes received from this server per second. | nginx.stream.upstream.peer.received.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| Stream upstream [{#UPSTREAM}] peer [{#PEER}]: Response time | The average time to receive the last byte of data. | nginx.stream.upstream.peer.response_time.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| Stream upstream [{#UPSTREAM}] peer [{#PEER}]: Sent, rate | The total number of bytes sent to this server per second. | nginx.stream.upstream.peer.sent.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |
| Stream upstream [{#UPSTREAM}] peer [{#PEER}]: State | The current state, which may be one of “up”, “draining”, “down”, “unavail”, “checking”, and “unhealthy”. | nginx.stream.upstream.peer.state[{#UPSTREAM},{#PEER}] | DEPENDENT |
| Stream upstream [{#UPSTREAM}] peer [{#PEER}]: Unavail | Displays how many times the server has  become unavailable for client requests (the state - “unavail”) due to the number of unsuccessful attempts reaching the `max_fails` threshold. | nginx.stream.upstream.peer.unavail.rate[{#UPSTREAM},{#PEER}] | DEPENDENT |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Stream upstream server is not in UP or DOWN state. | WARNING | no description | find(/NGINX Plus by HTTP/nginx.stream.upstream.peer.state[{#UPSTREAM},{#PEER}],,"like","up")=0 and find(/NGINX Plus by HTTP/nginx.stream.upstream.peer.state[{#UPSTREAM},{#PEER}],,"like","down")=0 | [{"tag": "scope", "value": "availability"}] | no url |


<a name="discovery_stream_upstreams_discovery" />

## Discovery Stream upstreams discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Stream upstream [{#NAME}]: Raw data | The raw data of the upstream with the name `[{#UPSTREAM}]`, configured in the "stream" directive. | nginx.stream.upstreams.raw[{#NAME}] | DEPENDENT |
| Stream upstream [{#NAME}]: Zombies | no description | nginx.stream.upstreams.zombies[{#NAME}] | DEPENDENT |
| Stream upstream [{#NAME}]: Zone | no description | nginx.stream.upstreams.zone[{#NAME}] | DEPENDENT |

