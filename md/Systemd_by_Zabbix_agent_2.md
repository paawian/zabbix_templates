# Systemd by Zabbix agent 2 template description

Get systemd units metrics from plugin for the zabbix-agent2.
  1. Setup and configure zabbix-agent2 compiled with the Systemd monitoring plugin.
  2. Set filters with macros if you want to override default filter parameters.

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/

Generated by official Zabbix template tool "Templator"

## Summary
* [macros](#macros)
* [discoveries](#discoveries)
  * [Discovery Service units discovery ](#discovery_service_units_discovery)
  * [Discovery Socket units discovery ](#discovery_socket_units_discovery)

<a name="macros"></a>

## Macros
| macro | value |
| ------------- |------------- |
| {$SYSTEMD.ACTIVESTATE.SERVICE.MATCHES} | active |
| {$SYSTEMD.ACTIVESTATE.SERVICE.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$SYSTEMD.ACTIVESTATE.SOCKET.MATCHES} | active |
| {$SYSTEMD.ACTIVESTATE.SOCKET.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$SYSTEMD.NAME.SERVICE.MATCHES} | .* |
| {$SYSTEMD.NAME.SERVICE.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$SYSTEMD.NAME.SOCKET.MATCHES} | .* |
| {$SYSTEMD.NAME.SOCKET.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$SYSTEMD.UNITFILESTATE.SERVICE.MATCHES} | enabled |
| {$SYSTEMD.UNITFILESTATE.SERVICE.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$SYSTEMD.UNITFILESTATE.SOCKET.MATCHES} | enabled |
| {$SYSTEMD.UNITFILESTATE.SOCKET.NOT_MATCHES} | CHANGE_IF_NEEDED |


<a name="discoveries"></a>

## Discoveries
| name | key | description | type | lifetime | delay |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Service units discovery | systemd.unit.discovery[service] | Discover systemd service units and their details. | no type | no lifetime | 30m |
| Socket units discovery | systemd.unit.discovery[socket] | Discover systemd socket units and their details. | no type | no lifetime | 30m |


<a name="discovery_service_units_discovery"></a>

## Discovery Service units discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| {#UNIT.NAME}: Active state | State value that reflects whether the unit is currently active or not. The following states are currently defined: "active", "reloading", "inactive", "failed", "activating", and "deactivating". | systemd.service.active_state["{#UNIT.NAME}"] | DEPENDENT |
| {#UNIT.NAME}: Load state | State value that reflects whether the configuration file of this unit has been loaded. The following states are currently defined: "loaded", "error", and "masked". | systemd.service.load_state["{#UNIT.NAME}"] | DEPENDENT |
| {#UNIT.NAME}: Unit file state | Encodes the install state of the unit file of FragmentPath. It currently knows the following states: "enabled", "enabled-runtime", "linked", "linked-runtime", "masked", "masked-runtime", "static", "disabled", and "invalid". | systemd.service.unitfile_state["{#UNIT.NAME}"] | DEPENDENT |
| {#UNIT.NAME}: Active time | Number of seconds since unit entered the active state. | systemd.service.uptime["{#UNIT.NAME}"] | DEPENDENT |
| {#UNIT.NAME}: Get unit info | Returns all properties of a systemd service unit.<br> Unit description: {#UNIT.DESCRIPTION}. | systemd.unit.get["{#UNIT.NAME}"] | no type |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| {#UNIT.NAME}: Service is not running | WARNING | no description | last(/Systemd by Zabbix agent 2/systemd.service.active_state["{#UNIT.NAME}"])<>1 | [{"tag": "scope", "value": "availability"}] | no url |
| {#UNIT.NAME}: has been restarted | INFO | Uptime is less than 10 minutes. | last(/Systemd by Zabbix agent 2/systemd.service.uptime["{#UNIT.NAME}"])<10m | [{"tag": "scope", "value": "notice"}] | no url |


<a name="discovery_socket_units_discovery"></a>

## Discovery Socket units discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| {#UNIT.NAME}: Connections accepted per sec | The number of accepted socket connections (NAccepted) per second. | systemd.socket.conn_accepted.rate["{#UNIT.NAME}"] | DEPENDENT |
| {#UNIT.NAME}: Connections connected | The current number of socket connections (NConnections). | systemd.socket.conn_count["{#UNIT.NAME}"] | DEPENDENT |
| {#UNIT.NAME}: Get unit info | Returns all properties of a systemd socket unit.<br> Unit description: {#UNIT.DESCRIPTION}. | systemd.unit.get["{#UNIT.NAME}",Socket] | no type |

