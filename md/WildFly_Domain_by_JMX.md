# WildFly Domain by JMX template description

Official JMX Template for WildFly.
The metrics are collected by JMX. This template works with Domain Controller.
You can set {$WILDFLY.USER} and {$WILDFLY.PASSWORD} macros in the template for using on the host level.

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback

Generated by official Zabbix template tool "Templator"

## Summary
* [items](#items)
* [macros](#macros)
* [triggers](#triggers)
* [discoveries](#discoveries)
  * [Discovery Deployments discovery ](#discovery_deployments_discovery)
  * [Discovery Servers discovery ](#discovery_servers_discovery)

<a name="items"></a>

## Items
| name | description | key | type | delay |
| ------------- |------------- |------------- |------------- |------------- |
| Uptime | WildFly server uptime. | jmx["java.lang:type=Runtime","Uptime"] | JMX | no delay |
| Launch type | The manner in which the server process was launched. Either "DOMAIN" for a domain mode server launched by a Host Controller, "STANDALONE" for a standalone server launched from the command line, or "EMBEDDED" for a standalone server launched as an embedded part of an application running in the same virtual machine. | jmx["jboss.as:management-root=server","launchType"] | JMX | no delay |
| Name | For standalone mode: The name of this server. If not set, defaults to the runtime value of InetAddress.getLocalHost().getHostName().<br>For domain mode: The name given to this domain | jmx["jboss.as:management-root=server","name"] | JMX | no delay |
| Process type | The type of process represented by this root resource. | jmx["jboss.as:management-root=server","processType"] | JMX | no delay |
| Version | The version of the WildFly Core based product release. | jmx["jboss.as:management-root=server","productVersion"] | JMX | no delay |


<a name="macros"></a>

## Macros
| macro | value |
| ------------- |------------- |
| {$WILDFLY.DEPLOYMENT.MATCHES} | .* |
| {$WILDFLY.DEPLOYMENT.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$WILDFLY.JMX.PROTOCOL} | remote+http |
| {$WILDFLY.PASSWORD} | zabbix |
| {$WILDFLY.SERVER.MATCHES} | .* |
| {$WILDFLY.SERVER.NOT_MATCHES} | CHANGE_IF_NEEDED |
| {$WILDFLY.USER} | zabbix |


<a name="triggers"></a>

## Triggers
| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| WildFly: Host has been restarted | INFO | Uptime is less than 10 minutes. | last(/WildFly Domain by JMX/jmx["java.lang:type=Runtime","Uptime"])<10m | [{"tag": "scope", "value": "notice"}] | no url |
| WildFly: Version has changed | INFO | WildFly version has changed. Acknowledge to close the problem manually. | last(/WildFly Domain by JMX/jmx["jboss.as:management-root=server","productVersion"],#1)<>last(/WildFly Domain by JMX/jmx["jboss.as:management-root=server","productVersion"],#2) and length(last(/WildFly Domain by JMX/jmx["jboss.as:management-root=server","productVersion"]))>0 | [{"tag": "scope", "value": "notice"}] | no url |


<a name="discoveries"></a>

## Discoveries
| name | key | description | type | lifetime | delay |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Deployments discovery | jmx.get[beans,"jboss.as.expr:deployment=*,server-group=*"] | Discovery deployments metrics. | JMX | no lifetime | 1h |
| Servers discovery | jmx.get[beans,"jboss.as:host=master,server-config=*"] | Discovery instances in domain. | JMX | no lifetime | 1h |


<a name="discovery_deployments_discovery"></a>

## Discovery Deployments discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| WildFly deployment [{#DEPLOYMENT}]: Enabled | Boolean indicating whether the deployment content is currently deployed in the runtime (or should be deployed in the runtime the next time the server starts). | jmx["{#JMXOBJ}",enabled] | JMX |
| WildFly deployment [{#DEPLOYMENT}]: Managed | Indicates if the deployment is managed (aka uses the ContentRepository). | jmx["{#JMXOBJ}",managed] | JMX |


<a name="discovery_servers_discovery"></a>

## Discovery Servers discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| WildFly domain: Server {#SERVER}: Autostart | Whether or not this server should be started when the Host Controller starts. | jmx["{#JMXOBJ}",autoStart] | JMX |
| WildFly domain: Server {#SERVER}: Server group | The name of a server group from the domain model. | jmx["{#JMXOBJ}",group] | JMX |
| WildFly domain: Server {#SERVER}: Status | The current status of the server. | jmx["{#JMXOBJ}",status] | JMX |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| WildFly domain: Server {#SERVER}: Server group has changed | INFO | Server group has changed. Acknowledge to close the problem manually. | last(/WildFly Domain by JMX/jmx["{#JMXOBJ}",group],#1)<>last(/WildFly Domain by JMX/jmx["{#JMXOBJ}",group],#2) and length(last(/WildFly Domain by JMX/jmx["{#JMXOBJ}",group]))>0 | [{"tag": "scope", "value": "notice"}] | no url |
| WildFly domain: Server {#SERVER}: Server status has changed | WARNING | Server status has changed. Acknowledge to close the problem manually. | last(/WildFly Domain by JMX/jmx["{#JMXOBJ}",status],#1)<>last(/WildFly Domain by JMX/jmx["{#JMXOBJ}",status],#2) and length(last(/WildFly Domain by JMX/jmx["{#JMXOBJ}",status]))>0 | [{"tag": "scope", "value": "notice"}] | no url |

