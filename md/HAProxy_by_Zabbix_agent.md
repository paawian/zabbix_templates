# HAProxy by Zabbix agent template description

The template to monitor HAProxy by Zabbix that works without any external scripts.
Most of the metrics are collected in one go, thanks to Zabbix bulk data collection.

The template collects metrics by polling the HAProxy stats page with Zabbix agent.

Note, that this template doesn't support authentication and redirects (limitations of 'web.page.get').

Setup:

1. Set up the HAProxy stats page:
https://www.haproxy.com/blog/exploring-the-haproxy-stats-page/

The example configuration of HAProxy:

frontend stats
    bind *:8404
    stats enable
    stats uri /stats
    stats refresh 10s

2. Set the hostname or IP address of the HAProxy stats host or container in the '{$HAPROXY.STATS.HOST}' macro. You can also change the status page port in the '{$HAPROXY.STATS.PORT}' macro, the status page scheme in the '{$HAPROXY.STATS.SCHEME}' macro and the status page path in the '{$HAPROXY.STATS.PATH}' macro if necessary.

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/393527-discussion-thread-for-official-zabbix-template-haproxy

Generated by official Zabbix template tool "Templator"

## Summary
* [items](#items)
* [macros](#macros)
* [triggers](#triggers)
* [discoveries](#discoveries)
  * [Discovery Backend discovery ](#discovery_backend_discovery)
  * [Discovery Frontend discovery ](#discovery_frontend_discovery)
  * [Discovery Server discovery ](#discovery_server_discovery)

<a name="items"></a>

## Items
| name | description | key | type | delay |
| ------------- |------------- |------------- |------------- |------------- |
| Get nodes | Array for LLD rules. | haproxy.get.nodes | DEPENDENT | 0 |
| Uptime | no description | haproxy.uptime | DEPENDENT | 0 |
| Version | no description | haproxy.version | DEPENDENT | 0 |
| Service response time | no description | net.tcp.service.perf["{$HAPROXY.STATS.SCHEME}","{$HAPROXY.STATS.HOST}","{$HAPROXY.STATS.PORT}"] | no type | no delay |
| Service status | no description | net.tcp.service["{$HAPROXY.STATS.SCHEME}","{$HAPROXY.STATS.HOST}","{$HAPROXY.STATS.PORT}"] | no type | no delay |
| Get stats page | HAProxy Statistics Report HTML | web.page.get["{$HAPROXY.STATS.SCHEME}://{$HAPROXY.STATS.HOST}:{$HAPROXY.STATS.PORT}/{$HAPROXY.STATS.PATH}"] | no type | no delay |
| Get stats | HAProxy Statistics Report in CSV format | web.page.get["{$HAPROXY.STATS.SCHEME}://{$HAPROXY.STATS.HOST}:{$HAPROXY.STATS.PORT}/{$HAPROXY.STATS.PATH};csv"] | no type | no delay |


<a name="macros"></a>

## Macros
| macro | value |
| ------------- |------------- |
| {$HAPROXY.BACK_ERESP.MAX.WARN} | 10 |
| {$HAPROXY.BACK_QCUR.MAX.WARN} | 10 |
| {$HAPROXY.BACK_QTIME.MAX.WARN} | 10s |
| {$HAPROXY.BACK_RTIME.MAX.WARN} | 10s |
| {$HAPROXY.FRONT_DREQ.MAX.WARN} | 10 |
| {$HAPROXY.FRONT_EREQ.MAX.WARN} | 10 |
| {$HAPROXY.FRONT_SUTIL.MAX.WARN} | 80 |
| {$HAPROXY.RESPONSE_TIME.MAX.WARN} | 10s |
| {$HAPROXY.SERVER_ERESP.MAX.WARN} | 10 |
| {$HAPROXY.SERVER_QCUR.MAX.WARN} | 10 |
| {$HAPROXY.SERVER_QTIME.MAX.WARN} | 10s |
| {$HAPROXY.SERVER_RTIME.MAX.WARN} | 10s |
| {$HAPROXY.STATS.HOST} | localhost |
| {$HAPROXY.STATS.PATH} | stats |
| {$HAPROXY.STATS.PORT} | 8404 |
| {$HAPROXY.STATS.SCHEME} | http |


<a name="triggers"></a>

## Triggers
| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| has been restarted | INFO | Uptime is less than 10 minutes. | last(/HAProxy by Zabbix agent/haproxy.uptime)<10m | [{"tag": "scope", "value": "notice"}] | no url |
| Version has changed | INFO | HAProxy version has changed. Acknowledge to close the problem manually. | last(/HAProxy by Zabbix agent/haproxy.version,#1)<>last(/HAProxy by Zabbix agent/haproxy.version,#2) and length(last(/HAProxy by Zabbix agent/haproxy.version))>0 | [{"tag": "scope", "value": "notice"}] | no url |
| Service response time is too high | WARNING | no description | min(/HAProxy by Zabbix agent/net.tcp.service.perf["{$HAPROXY.STATS.SCHEME}","{$HAPROXY.STATS.HOST}","{$HAPROXY.STATS.PORT}"],5m)>{$HAPROXY.RESPONSE_TIME.MAX.WARN} | [{"tag": "scope", "value": "performance"}] | no url |
| Service is down | AVERAGE | no description | last(/HAProxy by Zabbix agent/net.tcp.service["{$HAPROXY.STATS.SCHEME}","{$HAPROXY.STATS.HOST}","{$HAPROXY.STATS.PORT}"])=0 | [{"tag": "scope", "value": "availability"}] | no url |


<a name="discoveries"></a>

## Discoveries
| name | key | description | type | lifetime | delay |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Backend discovery | haproxy.backend.discovery | Discovery backends | DEPENDENT | no lifetime | 0 |
| Frontend discovery | haproxy.frontend.discovery | Discovery frontends | DEPENDENT | no lifetime | 0 |
| Server discovery | haproxy.server.discovery | Discovery servers | DEPENDENT | no lifetime | 0 |


<a name="discovery_backend_discovery"></a>

## Discovery Backend discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Backend {#PXNAME}: Number of active servers | Number of active servers. | haproxy.backend.act[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Number of backup servers | Number of backup servers. | haproxy.backend.bck[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Incoming traffic | Number of bits received by the backend | haproxy.backend.bin.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Outgoing traffic | Number of bits sent by the backend | haproxy.backend.bout.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Responses denied per second | Responses denied due to security concerns (ACL-restricted). | haproxy.backend.dresp.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Errors connection per second | Number of requests that encountered an error attempting to connect to a backend server. | haproxy.backend.econ.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Response errors per second | Number of requests whose responses yielded an error | haproxy.backend.eresp.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Number of responses with codes 1xx per second | Number of informational HTTP responses per second. | haproxy.backend.hrsp_1xx.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Number of responses with codes 2xx per second | Number of successful HTTP responses per second. | haproxy.backend.hrsp_2xx.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Number of responses with codes 3xx per second | Number of HTTP redirections per second. | haproxy.backend.hrsp_3xx.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Number of responses with codes 4xx per second | Number of HTTP client errors per second. | haproxy.backend.hrsp_4xx.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Number of responses with codes 5xx per second | Number of HTTP server errors per second. | haproxy.backend.hrsp_5xx.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Unassigned requests | Current number of requests unassigned in queue. | haproxy.backend.qcur[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Time in queue | Average time spent in queue (in ms) for the last 1,024 requests | haproxy.backend.qtime[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Raw data | The raw data of the Backend with the name `{#PXNAME}` | haproxy.backend.raw[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Responses time | Average backend response time (in ms) for the last 1,024 requests | haproxy.backend.rtime[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Status | Possible values:<br>UP - The server is reporting as healthy.<br>DOWN - The server is reporting as unhealthy and unable to receive requests.<br>NOLB - You've added http-check disable-on-404 to the backend and the health checked URL has returned an HTTP 404 response.<br>MAINT - The server has been disabled or put into maintenance mode.<br>DRAIN - The server has been put into drain mode.<br>no check - Health checks are not enabled for this server. | haproxy.backend.status[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Sessions per second | Cumulative number of sessions (end-to-end connections) per second. | haproxy.backend.stot.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Weight | Total effective weight. | haproxy.backend.weight[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Redispatched requests per second | Number of times a request was redispatched to a different backend. | haproxy.backend.wredis.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Backend {#PXNAME}: Retried connections per second | Number of times a connection was retried. | haproxy.backend.wretr.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| backend {#PXNAME}: Number of responses with error is high | WARNING | Number of requests on backend, whose responses yielded an error, is more than {$HAPROXY.BACK_ERESP.MAX.WARN}. | min(/HAProxy by Zabbix agent/haproxy.backend.eresp.rate[{#PXNAME},{#SVNAME}],5m)>{$HAPROXY.BACK_ERESP.MAX.WARN} | [{"tag": "scope", "value": "notice"}] | no url |
| backend {#PXNAME}: Current number of requests unassigned in queue is high | WARNING | Current number of requests on backend unassigned in queue is more than {$HAPROXY.BACK_QCUR.MAX.WARN}. | min(/HAProxy by Zabbix agent/haproxy.backend.qcur[{#PXNAME},{#SVNAME}],5m)>{$HAPROXY.BACK_QCUR.MAX.WARN} | [{"tag": "scope", "value": "notice"}] | no url |
| backend {#PXNAME}: Average time spent in queue is high | WARNING | Average time spent in queue (in ms) for the last 1,024 requests is more than {$HAPROXY.BACK_QTIME.MAX.WARN}. | min(/HAProxy by Zabbix agent/haproxy.backend.qtime[{#PXNAME},{#SVNAME}],5m)>{$HAPROXY.BACK_QTIME.MAX.WARN} | [{"tag": "scope", "value": "performance"}] | no url |
| backend {#PXNAME}: Average response time is high | WARNING | Average backend response time (in ms) for the last 1,024 requests is more than {$HAPROXY.BACK_RTIME.MAX.WARN}. | min(/HAProxy by Zabbix agent/haproxy.backend.rtime[{#PXNAME},{#SVNAME}],5m)>{$HAPROXY.BACK_RTIME.MAX.WARN} | [{"tag": "scope", "value": "performance"}] | no url |
| backend {#PXNAME}: Server is DOWN | AVERAGE | Backend is not available. | count(/HAProxy by Zabbix agent/haproxy.backend.status[{#PXNAME},{#SVNAME}],#5,"eq","DOWN")=5 | [{"tag": "scope", "value": "availability"}] | no url |


<a name="discovery_frontend_discovery"></a>

## Discovery Frontend discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| Frontend {#PXNAME}: Incoming traffic | Number of bits received by the frontend | haproxy.frontend.bin.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Frontend {#PXNAME}: Outgoing traffic | Number of bits sent by the frontend | haproxy.frontend.bout.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Frontend {#PXNAME}: Denied requests per second | Requests denied due to security concerns (ACL-restricted) per second. | haproxy.frontend.dreq.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Frontend {#PXNAME}: Request errors per second | Number of request errors per second. | haproxy.frontend.ereq.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Frontend {#PXNAME}: Number of responses with codes 1xx per second | Number of informational HTTP responses per second. | haproxy.frontend.hrsp_1xx.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Frontend {#PXNAME}: Number of responses with codes 2xx per second | Number of successful HTTP responses per second. | haproxy.frontend.hrsp_2xx.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Frontend {#PXNAME}: Number of responses with codes 3xx per second | Number of HTTP redirections per second. | haproxy.frontend.hrsp_3xx.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Frontend {#PXNAME}: Number of responses with codes 4xx per second | Number of HTTP client errors per second. | haproxy.frontend.hrsp_4xx.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Frontend {#PXNAME}: Number of responses with codes 5xx per second | Number of HTTP server errors per second. | haproxy.frontend.hrsp_5xx.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Frontend {#PXNAME}: Sessions rate | Number of sessions created per second | haproxy.frontend.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Frontend {#PXNAME}: Raw data | The raw data of the Frontend with the name `{#PXNAME}` | haproxy.frontend.raw[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Frontend {#PXNAME}: Requests rate | HTTP requests per second | haproxy.frontend.req_rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Frontend {#PXNAME}: Established sessions | The current number of established sessions. | haproxy.frontend.scur[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Frontend {#PXNAME}: Session limits | The most simultaneous sessions that are allowed, as defined by the maxconn setting in the frontend. | haproxy.frontend.slim[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Frontend {#PXNAME}: Status | Possible values: OPEN, STOP.<br>When Status is OPEN, the frontend is operating normally and ready to receive traffic. | haproxy.frontend.status[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Frontend {#PXNAME}: Session utilization | Percentage of sessions used (scur / slim * 100). | haproxy.frontend.sutil[{#PXNAME},{#SVNAME}] | CALCULATED |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| frontend {#PXNAME}: Number of requests denied is high | WARNING | Number of requests denied due to security concerns (ACL-restricted) is more than {$HAPROXY.FRONT_DREQ.MAX.WARN}. | min(/HAProxy by Zabbix agent/haproxy.frontend.dreq.rate[{#PXNAME},{#SVNAME}],5m)>{$HAPROXY.FRONT_DREQ.MAX.WARN} | [{"tag": "scope", "value": "notice"}] | no url |
| frontend {#PXNAME}: Number of request errors is high | WARNING | Number of request errors is more than {$HAPROXY.FRONT_EREQ.MAX.WARN}. | min(/HAProxy by Zabbix agent/haproxy.frontend.ereq.rate[{#PXNAME},{#SVNAME}],5m)>{$HAPROXY.FRONT_EREQ.MAX.WARN} | [{"tag": "scope", "value": "notice"}] | no url |
| frontend {#PXNAME}: Session utilization is high | WARNING | Alerting on this metric is essential to ensure your server has sufficient capacity to handle all concurrent sessions. Unlike requests, upon reaching the session limit HAProxy will deny additional clients until resource consumption drops. Furthermore, if you find your session usage percentage to be hovering above 80%, it could be time to either modify HAProxy's configuration to allow more sessions, or migrate your HAProxy server to a bigger box. | min(/HAProxy by Zabbix agent/haproxy.frontend.sutil[{#PXNAME},{#SVNAME}],5m)>{$HAPROXY.FRONT_SUTIL.MAX.WARN} | [{"tag": "scope", "value": "performance"}] | no url |


<a name="discovery_server_discovery"></a>

## Discovery Server discovery

### Items

| name | description | key | type |
| ------------- |------------- |------------- |------------- |
| {#PXNAME} {#SVNAME}: Server is active | Shows whether the server is active (marked with a Y) or a backup (marked with a -). | haproxy.server.act[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Server is backup | Shows whether the server is a backup (marked with a Y) or active (marked with a -). | haproxy.server.bck[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Incoming traffic | Number of bits received by the backend | haproxy.server.bin.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Outgoing traffic | Number of bits sent by the backend | haproxy.server.bout.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Status of last health check | Status of last health check, one of:<br>UNK     -> unknown<br>INI     -> initializing<br>SOCKERR -> socket error<br>L4OK    -> check passed on layer 4, no upper layers testing enabled<br>L4TOUT  -> layer 1-4 timeout<br>L4CON   -> layer 1-4 connection problem, for example "Connection refused" (tcp rst) or "No route to host" (icmp)<br>L6OK    -> check passed on layer 6<br>L6TOUT  -> layer 6 (SSL) timeout<br>L6RSP   -> layer 6 invalid response - protocol error<br>L7OK    -> check passed on layer 7<br>L7OKC   -> check conditionally passed on layer 7, for example 404 with disable-on-404<br>L7TOUT  -> layer 7 (HTTP/SMTP) timeout<br>L7RSP   -> layer 7 invalid response - protocol error<br>L7STS   -> layer 7 response error, for example HTTP 5xx<br>Notice: If a check is currently running, the last known status will be reported, prefixed with "* ". e. g. "* L7OK". | haproxy.server.check_status[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Responses denied per second | Responses denied due to security concerns (ACL-restricted). | haproxy.server.dresp.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Errors connection per second | Number of requests that encountered an error attempting to connect to a backend server. | haproxy.server.econ.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Response errors per second | Number of requests whose responses yielded an error. | haproxy.server.eresp.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Number of responses with codes 1xx per second | Number of informational HTTP responses per second. | haproxy.server.hrsp_1xx.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Number of responses with codes 2xx per second | Number of successful HTTP responses per second. | haproxy.server.hrsp_2xx.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Number of responses with codes 3xx per second | Number of HTTP redirections per second. | haproxy.server.hrsp_3xx.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Number of responses with codes 4xx per second | Number of HTTP client errors per second. | haproxy.server.hrsp_4xx.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Number of responses with codes 5xx per second | Number of HTTP server errors per second. | haproxy.server.hrsp_5xx.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Server was selected per second | Number of times that server was selected. | haproxy.server.lbtot.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Unassigned requests | Current number of requests unassigned in queue. | haproxy.server.qcur[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Configured maxqueue | Configured maxqueue for the server, or nothing in the value is 0 (default, meaning no limit). | haproxy.server.qlimit[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Time in queue | Average time spent in queue (in ms) for the last 1,024 requests. | haproxy.server.qtime[{#PXNAME},{#SVNAME}] | DEPENDENT |
| Server {#PXNAME} {#SVNAME}: Raw data | The raw data of the Server named `{#SVNAME}` and the proxy with the name `{#PXNAME}` | haproxy.server.raw[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Responses time | Average server response time (in ms) for the last 1,024 requests. | haproxy.server.rtime[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Status | no description | haproxy.server.status[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Sessions per second | Cumulative number of sessions (end-to-end connections) per second. | haproxy.server.stot.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Weight | Effective weight. | haproxy.server.weight[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Redispatched requests per second | Number of times a request was redispatched to a different backend. | haproxy.server.wredis.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |
| {#PXNAME} {#SVNAME}: Retried connections per second | Number of times a connection was retried. | haproxy.server.wretr.rate[{#PXNAME},{#SVNAME}] | DEPENDENT |


### Triggers

| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| {#PXNAME} {#SVNAME}: Health check error | WARNING | Please check the server for faults. | find(/HAProxy by Zabbix agent/haproxy.server.check_status[{#PXNAME},{#SVNAME}],#3,"regexp","(?:L[4-7]OK\|^$)")=0 | [{"tag": "scope", "value": "notice"}] | no url |
| {#PXNAME} {#SVNAME}: Number of responses with error is high | WARNING | Number of requests on server, whose responses yielded an error, is more than {$HAPROXY.SERVER_ERESP.MAX.WARN}. | min(/HAProxy by Zabbix agent/haproxy.server.eresp.rate[{#PXNAME},{#SVNAME}],5m)>{$HAPROXY.SERVER_ERESP.MAX.WARN} | [{"tag": "scope", "value": "notice"}] | no url |
| {#PXNAME} {#SVNAME}: Current number of requests unassigned in queue is high | WARNING | Current number of requests unassigned in queue is more than {$HAPROXY.SERVER_QCUR.MAX.WARN}. | min(/HAProxy by Zabbix agent/haproxy.server.qcur[{#PXNAME},{#SVNAME}],5m)>{$HAPROXY.SERVER_QCUR.MAX.WARN} | [{"tag": "scope", "value": "notice"}] | no url |
| {#PXNAME} {#SVNAME}: Average time spent in queue is high | WARNING | Average time spent in queue (in ms) for the last 1,024 requests is more than {$HAPROXY.SERVER_QTIME.MAX.WARN}. | min(/HAProxy by Zabbix agent/haproxy.server.qtime[{#PXNAME},{#SVNAME}],5m)>{$HAPROXY.SERVER_QTIME.MAX.WARN} | [{"tag": "scope", "value": "performance"}] | no url |
| {#PXNAME} {#SVNAME}: Average response time is high | WARNING | Average server response time (in ms) for the last 1,024 requests is more than {$HAPROXY.SERVER_RTIME.MAX.WARN}. | min(/HAProxy by Zabbix agent/haproxy.server.rtime[{#PXNAME},{#SVNAME}],5m)>{$HAPROXY.SERVER_RTIME.MAX.WARN} | [{"tag": "scope", "value": "performance"}] | no url |
| {#PXNAME} {#SVNAME}: Server is DOWN | WARNING | Server is not available. | count(/HAProxy by Zabbix agent/haproxy.server.status[{#PXNAME},{#SVNAME}],#5,"eq","DOWN")=5 | [{"tag": "scope", "value": "availability"}] | no url |

