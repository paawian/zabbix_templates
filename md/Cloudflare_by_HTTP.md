# Cloudflare by HTTP template description

The template to monitor Cloudflare to see your web traffic and DNS metrics.
It works without any external scripts and uses Script item.

Generated by official Zabbix template tool "Templator"

## Summary
* [items](#items)
* [macros](#macros)
* [triggers](#triggers)

<a name="items"></a>

## Items
| name | description | key | type | delay |
| ------------- |------------- |------------- |------------- |------------- |
| Total bandwidth | The volume of all data. | cloudflare.bandwidth.all | DEPENDENT | 0 |
| Cached bandwidth | The volume of cached data. | cloudflare.bandwidth.cached | DEPENDENT | 0 |
| Cache hit ratio of bandwidth | The ratio of the amount cached bandwidth to the bandwidth in percentage. | cloudflare.bandwidth.cache_hit_ratio | DEPENDENT | 0 |
| SSL encrypted bandwidth | The volume of encrypted data. | cloudflare.bandwidth.ssl.encrypted | DEPENDENT | 0 |
| Unencrypted bandwidth | The volume of unencrypted data. | cloudflare.bandwidth.ssl.unencrypted | DEPENDENT | 0 |
| Uncached bandwidth | The volume of uncached data. | cloudflare.bandwidth.uncached | DEPENDENT | 0 |
| DNS queries | The amount of all DNS queries. | cloudflare.dns.query.all | DEPENDENT | 0 |
| Stale DNS queries | The number of stale DNS queries. | cloudflare.dns.query.stale | DEPENDENT | 0 |
| Uncached DNS queries | The number of uncached DNS queries. | cloudflare.dns.query.uncached | DEPENDENT | 0 |
| Get data | The JSON with result of Cloudflare API request. | cloudflare.get | SCRIPT | 0;m01 |
| Total page views | The amount of all pageviews. | cloudflare.pageviews.all | DEPENDENT | 0 |
| Total requests | The amount of all requests. | cloudflare.requests.all | DEPENDENT | 0 |
| Cached requests | no description | cloudflare.requests.cached | DEPENDENT | 0 |
| Cache hit ratio % over time | The ratio of the amount cached requests to all requests in percentage. | cloudflare.requests.cache_hit_ratio | DEPENDENT | 0 |
| Non-2xx responses ratio | The ratio of the amount requests with non-2xx response codes to all requests in percentage. | cloudflare.requests.others_ratio | DEPENDENT | 0 |
| Response codes 1xx | The number requests with 1xx response codes. | cloudflare.requests.response_100 | DEPENDENT | 0 |
| Response codes 2xx | The number requests with 2xx response codes. | cloudflare.requests.response_200 | DEPENDENT | 0 |
| Response codes 3xx | The number requests with 3xx response codes. | cloudflare.requests.response_300 | DEPENDENT | 0 |
| Response codes 4xx | The number requests with 4xx response codes. | cloudflare.requests.response_400 | DEPENDENT | 0 |
| Response codes 5xx | The number requests with 5xx response codes. | cloudflare.requests.response_500 | DEPENDENT | 0 |
| SSL encrypted requests | The number of encrypted requests. | cloudflare.requests.ssl.encrypted | DEPENDENT | 0 |
| Unencrypted requests | The number of unencrypted requests. | cloudflare.requests.ssl.unencrypted | DEPENDENT | 0 |
| 2xx responses ratio | The ratio of the amount requests with 2xx response codes to all requests in percentage. | cloudflare.requests.success_ratio | DEPENDENT | 0 |
| Uncached requests | The number of uncached requests. | cloudflare.requests.uncached | DEPENDENT | 0 |
| Total threats | The number of all threats. | cloudflare.threats.all | DEPENDENT | 0 |
| Unique visitors | The number of all visitors IPs. | cloudflare.uniques.all | DEPENDENT | 0 |


<a name="macros"></a>

## Macros
| macro | value |
| ------------- |------------- |
| {$CLOUDFLARE.API.TOKEN} | no value |
| {$CLOUDFLARE.API.URL} | https://api.cloudflare.com/client/v4 |
| {$CLOUDFLARE.CACHED_BANDWIDTH.MIN.WARN} | 50 |
| {$CLOUDFLARE.ERRORS.MAX.WARN} | 30 |
| {$CLOUDFLARE.ZONE_ID} | no value |


<a name="triggers"></a>

## Triggers
| name | priority | description | expression | tags | url |
| ------------- |------------- |------------- |------------- |------------- |------------- |
| Cached bandwidth is too low | WARNING | no description | max(/Cloudflare by HTTP/cloudflare.bandwidth.cache_hit_ratio,#3) < {$CLOUDFLARE.CACHED_BANDWIDTH.MIN.WARN} | [{"tag": "scope", "value": "performance"}] | no url |
| Ratio of non-2xx responses is too high | AVERAGE | A large number of errors can indicate a malfunction of the site. | min(/Cloudflare by HTTP/cloudflare.requests.others_ratio,#3) > {$CLOUDFLARE.ERRORS.MAX.WARN} | [{"tag": "scope", "value": "performance"}] | no url |

